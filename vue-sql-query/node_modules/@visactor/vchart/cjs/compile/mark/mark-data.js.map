{"version":3,"sources":["../src/compile/mark/mark-data.ts"],"names":[],"mappings":";;;AAAA,6DAAyD;AACzD,8CAA6C;AAC7C,6CAAkD;AAGlD,MAAa,QAAS,SAAQ,gCAAc;IAG1C,YAAY,MAA2B;QACrC,KAAK,CAAC,MAAM,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,oBAAoB,CAAC,IAAY;QAC/B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,iBAAiB;QACf,MAAM,IAAI,GAAG,KAAK,CAAC,iBAAiB,EAAE,CAAC;QACvC,IAAI,IAAA,gBAAO,EAAC,IAAI,CAAC,EAAE;YACjB,OAAO,IAAI,CAAC;SACb;QACD,OAAO,GAAG,aAAM,aAAa,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC;IAC/C,CAAC;IAES,eAAe;;QACvB,MAAM,IAAI,GAAG,MAAA,IAAI,CAAC,KAAK,0CAAE,UAAU,CAAC;QACpC,IAAI,IAAA,cAAK,EAAC,IAAI,CAAC,IAAI,IAAA,gBAAO,EAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE;YAC7C,OAAO;SACR;QAED,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IAC1B,CAAC;CACF;AA5BD,4BA4BC","file":"mark-data.js","sourcesContent":["import { CompilableData } from '../data/compilable-data';\nimport { PREFIX } from '../../constant/base';\nimport { isNil, isValid } from '@visactor/vutils';\nimport type { ICompilableMark, IMarkData, IMarkDataInitOption } from './interface';\n\nexport class MarkData extends CompilableData implements IMarkData {\n  protected _mark: ICompilableMark;\n\n  constructor(option: IMarkDataInitOption) {\n    super(option);\n    this._mark = option.mark;\n  }\n\n  setCompiledProductId(name: string) {\n    this._compiledProductId = name;\n  }\n\n  generateProductId(): string {\n    const name = super.generateProductId();\n    if (isValid(name)) {\n      return name;\n    }\n    return `${PREFIX}_markData_${this._mark.id}`;\n  }\n\n  protected _compileProduct() {\n    const data = this._data?.latestData;\n    if (isNil(data) || isValid(this.getProduct())) {\n      return;\n    }\n\n    this._initProduct(data);\n  }\n}\n"]}