{"version":3,"sources":["../src/graph/util/events-extend.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAChC,OAAO,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAE9E,OAAO,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAEhD,MAAM,CAAC,OAAO,UAAU,iBAAiB,CAAC,IAAW,EAAE,KAAqB,EAAE,IAAY,EAAE,MAAuB;;IACjH,IAAI,MAAM,KAAK,mBAAmB,EAAE;QAClC,MAAM,CAAC,GAAI,KAAa,CAAC,cAAc,CAAC,CAAC,CAAE,KAAa,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACnF,KAAK,CAAC,CAAC,CAAC,CAAC;KACV;IACD,IAAI,OAAO,GAAG,MAAC,KAAK,CAAC,MAAc,0CAAG,gBAAgB,CAAC,CAAC;IACxD,IAAI,CAAC,OAAO,IAAI,MAAM,KAAK,iBAAiB,EAAE;QAC5C,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAC1B,MAAM,WAAW,GAAG,MAAA,IAAI,CAAC,QAAQ,0CAAE,WAAW,CAAC;QAE/C,OAAO,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,KAAK,MAAM,CAAC,MAAc,KAAK,WAAW,EAAE;YAC/D,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YACvB,IAAK,MAAc,CAAC,gBAAgB,CAAC,EAAE;gBACrC,OAAO,GAAI,MAAc,CAAC,gBAAgB,CAAC,CAAC;gBAC5C,MAAM;aACP;SACF;KACF;IAEA,KAAa,CAAC,OAAO,GAAG,OAAO,CAAC;IAEjC,OAAO,KAAK,CAAC;AACf,CAAC","file":"events-extend.js","sourcesContent":["import type { FederatedEvent } from '@visactor/vrender-core';\nimport type { IView } from './../../types/view';\nimport { point } from './point';\nimport { EVENT_SOURCE_VIEW, EVENT_SOURCE_WINDOW } from '../../view/constants';\nimport type { EventSourceType } from '../../types';\nimport { BridgeElementKey } from '../constants';\n\nexport default function getExtendedEvents(view: IView, event: FederatedEvent, type: string, source: EventSourceType) {\n  if (source === EVENT_SOURCE_WINDOW) {\n    const e = (event as any).changedTouches ? (event as any).changedTouches[0] : event;\n    point(e);\n  }\n  let element = (event.target as any)?.[BridgeElementKey];\n  if (!element && source === EVENT_SOURCE_VIEW) {\n    let target = event.target;\n    const rootGraphic = view.rootMark?.graphicItem;\n\n    while (target?.parent && (target.parent as any) !== rootGraphic) {\n      target = target.parent;\n      if ((target as any)[BridgeElementKey]) {\n        element = (target as any)[BridgeElementKey];\n        break;\n      }\n    }\n  }\n\n  (event as any).element = element;\n\n  return event;\n}\n"]}