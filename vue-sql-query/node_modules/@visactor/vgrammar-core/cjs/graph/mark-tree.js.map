{"version":3,"sources":["../src/graph/mark-tree.ts"],"names":[],"mappings":";;;AACA,mCAA0C;AAEnC,MAAM,gBAAgB,GAAG,CAC9B,QAAe,EACf,WAA0C,EAC1C,KAA2B,EAC3B,MAAiC,EACjC,SAAmB,EACnB,EAAE;IACF,MAAM,QAAQ,GAAG,CAAC,IAAW,EAAE,EAAE;QAC/B,IAAI,CAAC,SAAS,EAAE;YACd,IAAI,IAAI,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;gBACrC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACxB;SACF;QAED,IAAI,IAAI,CAAC,QAAQ,KAAK,uBAAe,CAAC,KAAK,EAAE;YAC3C,MAAM,QAAQ,GAAa,IAAmB,CAAC,WAAW,CAAC,CAAC;YAE5D,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBACvB,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC;aACJ;SACF;QAED,IAAI,SAAS,EAAE;YACb,IAAI,IAAI,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;gBACrC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACxB;SACF;IACH,CAAC,CAAC;IAEF,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACrB,CAAC,CAAC;AAhCW,QAAA,gBAAgB,oBAgC3B","file":"mark-tree.js","sourcesContent":["import type { IGroupMark, IMark } from '../types';\nimport { GrammarMarkType } from './enums';\n\nexport const traverseMarkTree = (\n  rootMark: IMark,\n  childrenKey: 'children' | 'layoutChildren',\n  apply: (mark: IMark) => any,\n  filter?: (mark: IMark) => boolean,\n  leafFirst?: boolean\n) => {\n  const traverse = (mark: IMark) => {\n    if (!leafFirst) {\n      if (mark && (!filter || filter(mark))) {\n        apply.call(null, mark);\n      }\n    }\n\n    if (mark.markType === GrammarMarkType.group) {\n      const children: IMark[] = (mark as IGroupMark)[childrenKey];\n\n      if (children) {\n        children.forEach(child => {\n          traverse(child);\n        });\n      }\n    }\n\n    if (leafFirst) {\n      if (mark && (!filter || filter(mark))) {\n        apply.call(null, mark);\n      }\n    }\n  };\n\n  traverse(rootMark);\n};\n"]}