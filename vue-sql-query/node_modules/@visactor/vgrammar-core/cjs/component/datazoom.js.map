{"version":3,"sources":["../src/component/datazoom.ts"],"names":[],"mappings":"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","file":"datazoom.js","sourcesContent":["import type { IGraphic } from '@visactor/vrender-core';\nimport type { DataZoomAttributes } from '@visactor/vrender-components';\n// eslint-disable-next-line no-duplicate-imports\nimport { DataZoom as DatazoomComponent } from '@visactor/vrender-components';\nimport { isNil, isString, merge, mixin } from '@visactor/vutils';\nimport { ComponentEnum } from '../graph/enums';\nimport type {\n  BaseSingleEncodeSpec,\n  ChannelEncodeType,\n  IData,\n  IElement,\n  IGrammarBase,\n  IGroupMark,\n  ITheme,\n  IView,\n  Nil,\n  RecursivePartial,\n  ScaleEncodeType,\n  StateEncodeSpec\n} from '../types';\nimport type { DatazoomSpec, IDatazoom } from '../types/component';\nimport { invokeEncoder } from '../graph/mark/encode';\nimport { Component } from '../view/component';\nimport { parseEncodeType } from '../parse/mark';\nimport { Factory } from '../core/factory';\nimport { DatazoomFilter } from '../interactions/datazoom-filter';\nimport { Filter, FilterMixin } from '../interactions/filter';\n\nexport const generateDatazoomAttributes = (\n  data: any[],\n  theme?: ITheme,\n  addition?: RecursivePartial<DataZoomAttributes>\n): DataZoomAttributes => {\n  const datazoomTheme = theme?.components?.datazoom;\n  if (!data) {\n    return merge({}, datazoomTheme, addition ?? {});\n  }\n\n  return merge({}, datazoomTheme, { previewData: data }, addition ?? {});\n};\n\nexport class Datazoom extends Component implements IDatazoom {\n  static readonly componentType: string = ComponentEnum.datazoom;\n  protected declare spec: DatazoomSpec;\n\n  constructor(view: IView, group?: IGroupMark) {\n    super(view, ComponentEnum.datazoom, group);\n    this.spec.componentType = ComponentEnum.datazoom;\n  }\n\n  protected parseAddition(spec: DatazoomSpec) {\n    super.parseAddition(spec);\n    const { data, x, y, x1, y1 } = spec.preview ?? {};\n    this.preview(data, x, y, x1, y1);\n    this._updateComponentEncoders();\n    return this;\n  }\n\n  preview(\n    data: IData | string | Nil,\n    x: ScaleEncodeType | Nil,\n    y: ScaleEncodeType | Nil,\n    x1?: ChannelEncodeType | Nil,\n    y1?: ChannelEncodeType | Nil\n  ) {\n    if (!isNil(this.spec.preview)) {\n      const lastData = this.spec.preview.data;\n      const lastDataGrammar = isString(lastData) ? this.view.getDataById(lastData) : lastData;\n      this.detach(lastDataGrammar);\n      this.detach(parseEncodeType(this.spec.preview.x, this.view));\n      this.detach(parseEncodeType(this.spec.preview.y, this.view));\n      this.detach(parseEncodeType(this.spec.preview.x1, this.view));\n      this.detach(parseEncodeType(this.spec.preview.y1, this.view));\n    }\n    this.spec.preview = undefined;\n    if (data) {\n      this.spec.preview = { data, x, y, x1, y1 };\n      const dataGrammar = isString(data) ? this.view.getDataById(data) : data;\n      this.attach(dataGrammar);\n      this.attach(parseEncodeType(x, this.view));\n      this.attach(parseEncodeType(y, this.view));\n      this.attach(parseEncodeType(x1, this.view));\n      this.attach(parseEncodeType(y1, this.view));\n    }\n    this._updateComponentEncoders();\n    this.commit();\n    return this;\n  }\n\n  setStartEndValue(start?: number, end?: number) {\n    const datazoom = this.getGroupGraphicItem() as unknown as DatazoomComponent;\n    if (datazoom && datazoom.setStartAndEnd) {\n      datazoom.setStartAndEnd(start, end);\n    }\n    return this;\n  }\n\n  getStartEndValue() {\n    const datazoom = this.getGroupGraphicItem() as unknown as DatazoomComponent;\n    if (datazoom) {\n      const state = datazoom.state;\n      return {\n        start: state.start,\n        end: state.end\n      };\n    }\n\n    return null;\n  }\n\n  addGraphicItem(attrs: any, groupKey?: string) {\n    const theme = this.spec.skipTheme ? null : this.view.getCurrentTheme();\n    const initialAttributes = Object.assign({}, theme?.components?.datazoom, attrs);\n    const graphicItem = Factory.createGraphicComponent(this.componentType, initialAttributes, {\n      skipDefault: this.spec.skipTheme\n    });\n    this.setDatazoomHandlers(graphicItem as unknown as DatazoomComponent);\n    return super.addGraphicItem(initialAttributes, groupKey, graphicItem);\n  }\n\n  reuse(grammar: IGrammarBase) {\n    super.reuse(grammar);\n    // update datazoom handler when mark is reused\n    this.setDatazoomHandlers();\n    return this;\n  }\n\n  protected _updateComponentEncoders() {\n    const data = this.spec.preview?.data;\n    const dataGrammar = isString(data) ? this.view.getDataById(data) : data;\n    const encoders = Object.assign({ update: {} }, this.spec.encode);\n    const componentEncoders: StateEncodeSpec = Object.keys(encoders).reduce((res, state) => {\n      const encoder = encoders[state];\n      if (encoder) {\n        res[state] = {\n          callback: (datum: any, element: IElement, parameters: any) => {\n            const theme = this.spec.skipTheme ? null : this.view.getCurrentTheme();\n            const addition = invokeEncoder(encoder as BaseSingleEncodeSpec, datum, element, parameters);\n            return generateDatazoomAttributes(dataGrammar?.getValue?.(), theme, addition);\n          }\n        };\n      }\n      return res;\n    }, {});\n    this._encoders = componentEncoders;\n  }\n\n  invertDatazoomRatio(ratio: number): any {\n    const scale = this.getDatazoomMainScale();\n    if (scale) {\n      const range = scale.range();\n      const scaledValue = (range[range.length - 1] - range[0]) * ratio + range[0];\n      return scale.invert(scaledValue);\n    }\n    return null;\n  }\n\n  getDatazoomMainScale() {\n    const datazoom = this.getGroupGraphicItem() as unknown as DatazoomComponent;\n    if (datazoom && this.spec.preview) {\n      const isHorizontal = datazoom.attribute.orient === 'top' || datazoom.attribute.orient === 'bottom';\n      const scale = isHorizontal ? this.spec.preview.x?.scale : this.spec.preview.y?.scale;\n      const scaleGrammar = isString(scale) ? this.view.getScaleById(scale) : scale;\n      return scaleGrammar?.getScale();\n    }\n    return null;\n  }\n\n  private setDatazoomHandlers(graphicItem?: DatazoomComponent) {\n    const datazoom = graphicItem ?? (this.getGroupGraphicItem() as unknown as DatazoomComponent);\n    datazoom.setStatePointToData(state => {\n      if (this.spec.preview) {\n        return this.invertDatazoomRatio(state) ?? state;\n      }\n      return state;\n    });\n\n    // set preview callbacks\n    const { data, x, y, x1, y1 } = this.spec.preview ?? {};\n    datazoom.setPreviewPointsX((datum: any) => {\n      if (x && data) {\n        return invokeEncoder({ x }, datum, this.elements[0], this.parameters()).x;\n      }\n\n      return undefined;\n    });\n    datazoom.setPreviewPointsY((datum: any) => {\n      if (y && data) {\n        return invokeEncoder({ y }, datum, this.elements[0], this.parameters()).y;\n      }\n\n      return undefined;\n    });\n    datazoom.setPreviewPointsX1((datum: any) => {\n      if (x1 && data) {\n        return invokeEncoder({ x1 }, datum, this.elements[0], this.parameters()).x1;\n      }\n\n      return undefined;\n    });\n    datazoom.setPreviewPointsY1((datum: any) => {\n      if (y1 && data) {\n        return invokeEncoder({ y1 }, datum, this.elements[0], this.parameters()).y1;\n      }\n\n      return undefined;\n    });\n  }\n}\n\nexport const registerDataZoom = () => {\n  Factory.registerGraphicComponent(\n    ComponentEnum.datazoom,\n    (attrs: DataZoomAttributes) => new DatazoomComponent(attrs) as unknown as IGraphic\n  );\n\n  Factory.registerComponent(ComponentEnum.datazoom, Datazoom);\n\n  mixin(Filter, FilterMixin);\n  Factory.registerInteraction(DatazoomFilter.type, DatazoomFilter);\n};\n"]}