{"version":3,"sources":["../src/scenegraph/graphic/mark.ts"],"names":[],"mappings":"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","file":"mark.js","sourcesContent":["import { createRect, createArc, createPolygon } from './../../vrender';\n\nimport type { Group, IFillType } from './../../vrender';\n\nimport type { MarkCellStyle, MarkedPropertyDefine } from '../../ts-types';\nimport type { BaseTableAPI } from '../../ts-types/base-table';\n\nexport function createMark(marked: MarkedPropertyDefine, cellGroup: Group, table: BaseTableAPI) {\n  if (typeof marked === 'boolean') {\n    // 默认是右上角显示个扇形\n    const mark = createArc({\n      x: cellGroup.attribute.width,\n      y: 0,\n      startAngle: Math.PI / 2,\n      endAngle: Math.PI,\n      outerRadius: 6,\n      fill: '#3073F2',\n      pickable: false\n    });\n    mark.name = 'mark';\n\n    cellGroup.appendChild(mark);\n  } else {\n    const {\n      bgColor = '#3073F2',\n      shape = 'sector',\n      position = 'right-top',\n      size = 10,\n      offset = 0\n    } = marked as MarkCellStyle;\n    let x;\n    let y;\n    let startAngle;\n    let endAngle;\n    let fill;\n    let mark;\n\n    if (shape === 'sector') {\n      if (position === 'right-top') {\n        x = cellGroup.attribute.width - offset;\n        y = offset;\n        startAngle = Math.PI / 2;\n        endAngle = Math.PI;\n      } else if (position === 'left-top') {\n        x = offset;\n        y = offset;\n        startAngle = 0;\n        endAngle = Math.PI / 2;\n      } else if (position === 'right-bottom') {\n        x = cellGroup.attribute.width - offset;\n        y = cellGroup.attribute.height - offset;\n        startAngle = Math.PI;\n        endAngle = (Math.PI / 2) * 3;\n      } else if (position === 'left-bottom') {\n        x = offset;\n        y = cellGroup.attribute.height - offset;\n        startAngle = (Math.PI / 2) * 3;\n        endAngle = Math.PI * 2;\n      }\n\n      fill = bgColor;\n      mark = createArc({\n        x,\n        y,\n        startAngle,\n        endAngle,\n        outerRadius: size,\n        fill: fill as IFillType,\n        pickable: false\n      });\n    } else if (shape === 'triangle') {\n      let x2;\n      let y2;\n      let x3;\n      let y3;\n      if (position === 'right-top') {\n        x = cellGroup.attribute.width - offset;\n        y = offset;\n        x2 = x - size;\n        y2 = y;\n        x3 = x;\n        y3 = y + size;\n      } else if (position === 'left-top') {\n        x = offset;\n        y = offset;\n        x2 = x + size;\n        y2 = y;\n        x3 = x;\n        y3 = y + size;\n      } else if (position === 'right-bottom') {\n        x = cellGroup.attribute.width - offset;\n        y = cellGroup.attribute.height - offset;\n        x2 = x - size;\n        y2 = y;\n        x3 = x;\n        y3 = y - size;\n      } else if (position === 'left-bottom') {\n        x = offset;\n        y = cellGroup.attribute.height - offset;\n        x2 = x + size;\n        y2 = y;\n        x3 = x;\n        y3 = y - size;\n      }\n      fill = bgColor;\n      mark = createPolygon({\n        points: [\n          { x: x, y: y },\n          { x: x2, y: y2 },\n          { x: x3, y: y3 }\n        ],\n        fill: fill as IFillType,\n        pickable: false\n      });\n    } else if (shape === 'rect') {\n      if (position === 'right-top') {\n        x = cellGroup.attribute.width - size - offset;\n        y = offset;\n      } else if (position === 'left-top') {\n        x = offset;\n        y = offset;\n      } else if (position === 'right-bottom') {\n        x = cellGroup.attribute.width - size - offset;\n        y = cellGroup.attribute.height - size - offset;\n      } else if (position === 'left-bottom') {\n        x = offset;\n        y = cellGroup.attribute.height - size - offset;\n      }\n      fill = bgColor;\n      mark = createRect({\n        x,\n        y,\n        width: size,\n        height: size,\n        fill: fill as IFillType,\n        pickable: false\n      });\n    }\n    mark.name = 'mark';\n    cellGroup.appendChild(mark);\n  }\n}\n"]}