{"version":3,"sources":["../src/scenegraph/utils/render-service.ts"],"names":[],"mappings":";;;AACA,6CAAuF;AAIvF,kBAAe,IAAI,yBAAe,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IACnE,IAAI,CAAC,sBAAsB,CAAC,CAAC,MAAM,EAAE,CAAC;IACtC,MAAM,CAAC,uBAAa,CAAC,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;AAC1D,CAAC,CAAC,CAAC;AAEH,MAAa,sBAAuB,SAAQ,8BAAoB;IAAhE;;QACE,oBAAe,GAAG,CAAC,CAAC;IAoBtB,CAAC;IAlBC,OAAO,CAAC,YAAqB;QAC3B,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;;YAC/B,MAAM,KAAK,GAAI,CAAC,CAAC,KAAa,CAAC,KAAqB,CAAC;YACrD,IAAI,KAAK,IAAI,KAAK,CAAC,YAAY,CAAC,aAAa,EAAE;gBAQ7C,MAAA,CAAC,CAAC,KAAK,CAAC,WAAW,0CAAE,KAAK,EAAE,CAAC;aAC9B;iBAAM;gBACL,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;aAChC;QACH,CAAC,CAAC,CAAC;QACH,OAAO;IACT,CAAC;CACF;AArBD,wDAqBC","file":"render-service.js","sourcesContent":["import type { IGraphic } from './../../vrender';\nimport { ContainerModule, DefaultRenderService, RenderService } from './../../vrender';\nimport type { BaseTableAPI } from '../../ts-types/base-table';\nimport { InteractionState } from '../../ts-types';\n\nexport default new ContainerModule((bind, unbind, isBound, rebind) => {\n  bind(RenderServiceForVTable).toSelf();\n  rebind(RenderService).toService(RenderServiceForVTable);\n});\n\nexport class RenderServiceForVTable extends DefaultRenderService {\n  lastPrepareTime = 0;\n  // 渲染前准备工作，计算bounds等逻辑\n  prepare(updateBounds: boolean): void {\n    this.renderTreeRoots.forEach(g => {\n      const table = (g.stage as any).table as BaseTableAPI;\n      if (table && table.stateManager.fastScrolling) {\n        // const now = Date.now();\n        // if (now - this.lastPrepareTime > 50) {\n        //   this.lastPrepareTime = now;\n        //   this._prepare(g, updateBounds);\n        // } else {\n        //   // do nothing\n        // }\n        g.stage.dirtyBounds?.empty();\n      } else {\n        this._prepare(g, updateBounds);\n      }\n    });\n    return;\n  }\n}\n"]}