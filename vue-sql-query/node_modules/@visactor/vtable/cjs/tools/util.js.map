{"version":3,"sources":["../src/tools/util.ts"],"names":[],"mappings":"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","file":"util.js","sourcesContent":["import { isValid } from '@visactor/vutils';\nimport type { SortOrder } from '../ts-types';\n\nexport const judgeType = (value: any) => {\n  switch (Object.prototype.toString.call(value)) {\n    case '[object Object]':\n      return 'object';\n    case '[object Function]':\n      return 'function';\n    case '[object Array]':\n      return 'array';\n    case '[object String]':\n      return 'string';\n    case '[object Number]':\n      return 'number';\n    case '[object RegExp]':\n      return 'regExp';\n    case '[object Boolean]':\n      return 'boolean';\n    case '[object Symbol]':\n      return 'symbol';\n    case '[object Date]':\n      return 'date';\n    case '[object Undefined]':\n      return 'undefined';\n    case '[object Null]':\n      return 'null';\n    case '[object Error]':\n      return 'error';\n    case '[object HTMLDocument]':\n      return 'document';\n    case '[object global]':\n      return 'global'; // window 是全局对象 global 的引用\n    default:\n      return null;\n  }\n};\n\nexport const isIt = (v: any, type: string): boolean => judgeType(v) === type;\n\nexport const isObject = (v: any): boolean => isIt(v, 'object');\nexport const isFunction = (v: any): boolean => isIt(v, 'function');\nexport const isArray = (v: any): boolean => isIt(v, 'array');\nexport const isString = (v: any): boolean => isIt(v, 'string');\nexport const isNumber = (v: any): boolean => isIt(v, 'number');\nexport const isRegExp = (v: any): boolean => isIt(v, 'regExp');\nexport const isBoolean = (v: any): boolean => isIt(v, 'boolean');\nexport const isSymbol = (v: any): boolean => isIt(v, 'symbol');\nexport const isDate = (v: any): boolean => isIt(v, 'date');\nexport const isUndefined = (v: any): boolean => isIt(v, 'undefined');\nexport const isNull = (v: any): boolean => isIt(v, 'null');\nexport const isError = (v: any): boolean => isIt(v, 'error');\nexport const isDocument = (v: any): boolean => isIt(v, 'document');\nexport const isGlobal = (v: any): boolean => isIt(v, 'global');\n\nexport function merge(target: any, ...sources: any[]): any {\n  if (!sources.length) {\n    return target || {};\n  }\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n        if (!isObject(target[key])) {\n          Object.assign(target, { [key]: source[key] });\n        }\n        merge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return merge(target, ...sources);\n}\nexport function ingoreNoneValueMerge(target: any, ...sources: any[]): any {\n  if (!sources.length) {\n    return target || {};\n  }\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n        if (!isObject(target[key])) {\n          Object.assign(target, { [key]: source[key] });\n        }\n        ingoreNoneValueMerge(target[key], source[key]);\n      } else if (source[key] !== null && source[key] !== undefined) {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return ingoreNoneValueMerge(target, ...sources);\n}\n\n// 使用vutils库中的cloneDeep\n// export function cloneDeep(item: any) {\n//   if (!item) {\n//     return item;\n//   } // null, undefined values check\n\n//   const types = [Number, String, Boolean];\n//   let result: any;\n\n//   // normalizing primitives if someone did new String('aaa'), or new Number('444');\n//   types.forEach(function (type) {\n//     if (item instanceof type) {\n//       result = type(item);\n//     }\n//   });\n\n//   if (typeof result === 'undefined') {\n//     if (Object.prototype.toString.call(item) === '[object Array]') {\n//       result = [];\n//       item.forEach(function (child: any, index: number) {\n//         result[index] = cloneDeep(child);\n//       });\n//     } else if (typeof item === 'object') {\n//       // testing that this is DOM\n//       if (item.nodeType && typeof item.cloneNode === 'function') {\n//         result = item.cloneNode(true);\n//       } else if (!item.prototype) {\n//         // check that this is a literal\n//         if (item instanceof Date) {\n//           result = new Date(item);\n//         } else if (item.clone) {\n//           result = item.clone();\n//         } else {\n//           // it is an object literal\n//           result = {};\n//           for (const i in item) {\n//             result[i] = cloneDeep(item[i]);\n//           }\n//         }\n//       } else {\n//         // depending what you would like here,\n//         // just keep the reference, or create new object\n//         if (item.constructor) {\n//           // would not advice to do that, reason? Read below\n//           result = new item.constructor();\n//         } else {\n//           result = item;\n//         }\n//       }\n//     } else {\n//       result = item;\n//     }\n//   }\n\n//   return result;\n// }\n\nexport function convertInternal(value: unknown): string {\n  if (typeof value === 'function') {\n    value = value();\n  }\n  // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n  return isValid(value) ? `${value}` : '';\n}\n/**\n * 返回 matrix 的 转置矩阵\n * @param matrix\n * @returns\n */\nexport function transpose(matrix: Array<Array<any>>) {\n  if (matrix?.length <= 0) {\n    return matrix;\n  }\n  const m = matrix.length;\n  const n = matrix[0].length;\n  const transposed = new Array(n);\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      if (!transposed[j]) {\n        transposed[j] = new Array(m);\n      }\n      transposed[j][i] = matrix[i][j];\n    }\n  }\n  return transposed;\n}\n\nexport function debounce(fn: Function, delay: number, immediate = false) {\n  let timer: any;\n  let result: any;\n  return function (this: any, ...args: any[]) {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // 如果timer存在，说明第二次调用的时候还没到delay时间，因为如果超过delay时间\n      // timer会被赋值为0，所以这个时候我们不应该执行fn，应该重新设置一个定时器\n      // 但如果是一次的时候，因为还没有设过定时器，所以这里timer会是undefined\n      if (timer) {\n        timer = setTimeout(() => (timer = 0), delay);\n      } else {\n        result = fn.apply(this, args);\n        return result;\n      }\n    } else {\n      timer = setTimeout(() => fn.apply(this, args), delay);\n    }\n  };\n}\n/**\n * throttle 保障了首次立即执行 后续触发的回调执行间隔delay时间 区别于throttle2 最后执行时机会提前\n * @param { Function } func 执行函数\n * @param { Interger } time 多长时间内不能第二次执行\n * @returns function 返回经过节流处理的函数\n */\nexport function throttle(func: Function, delay: number) {\n  let timer: any = null;\n  return function (this: any, ...args: any[]) {\n    // let args=arguments 也可以写成这种或...args也是代表我们传过来的实参\n    if (!timer) {\n      func.apply(this, args); //先执行函数,保证第一次立即执行\n      timer = setTimeout(() => {\n        timer = null;\n      }, delay);\n    }\n    // console.log('throttle');\n    // 当我们第一次触发事件，定时器不存在时就执行函数，当我们再次点击时，因为定时器存在，\n    // 所以无法再进入函数调用(无论事件如何执行),那么只能等定时器事件结束，\n    // 我们让timer=null，回到第一次的状态,就又重新开始新的一轮\n  };\n}\n/**\n * throttle节流 间隔delay时间后执行 保障了最后执行时机是在delay之后\n * @param { Function } func 执行函数\n * @param { Interger } time 多长时间内不能第二次执行\n * @returns function 返回经过节流处理的函数\n */\nexport function throttle2(func: Function, delay: number) {\n  let timer: any = null;\n  return function (this: any, ...args: any[]) {\n    // let args=arguments 也可以写成这种或...args也是代表我们传过来的实参\n    if (!timer) {\n      timer = setTimeout(() => {\n        func.apply(this, args);\n        timer = null;\n      }, delay);\n    }\n  };\n}\n\nfunction pad(num: string, totalChars: number) {\n  const pad = '0';\n  num = `${num}`;\n  while (num.length < totalChars) {\n    num = pad + num;\n  }\n  return num;\n}\n/**\n * 在某个颜色的基础上 获取变暗或者变亮的颜色\n * @param color 基础颜色值\n * @param ratio  Ratio is between 0 and 1\n * @param isDarker 是否获取变暗的颜色\n * @returns\n */\nexport function changeColor(color: string, ratio: number, isDarker: boolean) {\n  // Trim trailing/leading whitespace\n  color = color.replace(/^\\s*|\\s*$/, '');\n\n  // Expand three-digit hex\n  color = color.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i, '#$1$1$2$2$3$3');\n\n  // Calculate ratio\n  const difference = Math.round(ratio * 256) * (isDarker ? -1 : 1);\n  // Determine if input is RGB(A)\n  const rgb = color.match(\n    new RegExp(\n      '^rgba?\\\\(\\\\s*' +\n        '(\\\\d|[1-9]\\\\d|1\\\\d{2}|2[0-4][0-9]|25[0-5])' +\n        '\\\\s*,\\\\s*' +\n        '(\\\\d|[1-9]\\\\d|1\\\\d{2}|2[0-4][0-9]|25[0-5])' +\n        '\\\\s*,\\\\s*' +\n        '(\\\\d|[1-9]\\\\d|1\\\\d{2}|2[0-4][0-9]|25[0-5])' +\n        '(?:\\\\s*,\\\\s*' +\n        '(0|1|0?\\\\.\\\\d+))?' +\n        '\\\\s*\\\\)$',\n      'i'\n    )\n  );\n  const alpha = !!rgb && isValid(rgb[4]) ? rgb[4] : null;\n  // Convert hex to decimal\n  const decimal = rgb\n    ? [rgb[1], rgb[2], rgb[3]]\n    : color\n        .replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i, function () {\n          return `${parseInt(arguments[1], 16)},${parseInt(arguments[2], 16)},${parseInt(arguments[3], 16)}`;\n        })\n        .split(/,/);\n\n  // Return RGB(A)\n  return rgb\n    ? `rgb${alpha !== null ? 'a' : ''}(${Math[isDarker ? 'max' : 'min'](\n        parseInt(decimal[0], 10) + difference,\n        isDarker ? 0 : 255\n      )}, ${Math[isDarker ? 'max' : 'min'](parseInt(decimal[1], 10) + difference, isDarker ? 0 : 255)}, ${Math[\n        isDarker ? 'max' : 'min'\n      ](parseInt(decimal[2], 10) + difference, isDarker ? 0 : 255)}${alpha !== null ? `, ${alpha}` : ''})`\n    : // Return hex\n      [\n        '#',\n        pad(Math[isDarker ? 'max' : 'min'](parseInt(decimal[0], 10) + difference, isDarker ? 0 : 255).toString(16), 2),\n        pad(Math[isDarker ? 'max' : 'min'](parseInt(decimal[1], 10) + difference, isDarker ? 0 : 255).toString(16), 2),\n        pad(Math[isDarker ? 'max' : 'min'](parseInt(decimal[2], 10) + difference, isDarker ? 0 : 255).toString(16), 2)\n      ].join('');\n}\n/**\n * 解决加减出现很多小数位的问题\n * @param n\n * @param fixed\n * @returns\n */\nexport function toFixed(n: number, fixed = 0) {\n  return parseFloat(n.toFixed(fixed));\n}\n\nexport function validToString(v: any) {\n  if (isString(v) || isNumber(v) || isBoolean(v)) {\n    return v.toString();\n  }\n  return '';\n}\nexport function isMobile() {\n  return navigator.userAgent.match(\n    // eslint-disable-next-line max-len\n    /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i\n  );\n}\nexport function defaultOrderFn(v1: any, v2: any, order: SortOrder): -1 | 0 | 1 {\n  if (order !== 'desc') {\n    return v1 === v2 ? 0 : v1 > v2 ? 1 : -1;\n  }\n  return v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\n}\n/**\n * 针对一个具有多级结构的对象，根据层级路径获取到具体值\n * @param obj\n * @param paths\n * @returns\n */\nexport function getValueByPath(obj: any, paths: string[]) {\n  let res = obj;\n  let prop;\n  while ((prop = paths.shift())) {\n    res = res[prop];\n    if (!res) {\n      break;\n    }\n  }\n  return res;\n}\nexport function inBound(\n  { x, y }: { x: number; y: number },\n  { left, top, width, height }: { left: number; top: number; width: number; height: number }\n) {\n  if (x > left && x < left + width && y > top && y < top + height) {\n    return true;\n  }\n  return false;\n}\n\nexport const isArrEqual = (arr1: Array<any>, arr2: Array<any>) => {\n  return arr1.length === arr2.length && arr1.every((ele, index) => Object.is(ele, arr2[index]));\n};\n/**\n * 根据string生成hash值\n * @param input\n * @returns\n */\nexport function hashCode(input: string) {\n  const I64BIT_TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-'.split('');\n  let hash = 5381;\n  let i = input.length - 1;\n\n  for (; i > -1; i--) {\n    hash += (hash << 5) + input.charCodeAt(i);\n  }\n\n  let value = hash & 0x7fffffff;\n\n  let retValue = '';\n  do {\n    retValue += I64BIT_TABLE[value & 0x3f];\n  } while ((value >>= 6));\n  return retValue;\n}\n\nexport function toBoolean(val: unknown): boolean {\n  if (typeof val === 'string') {\n    if (val === 'false') {\n      return false;\n    } else if (val === 'off') {\n      return false;\n    } else if (/^0+$/.exec(val)) {\n      return false;\n    }\n  }\n  return Boolean(val);\n}\n\nexport function isAllDigits(str: string) {\n  const pattern = /^-?\\d+(\\.\\d+)?$/;\n  return pattern.test(str);\n}\n// array deduplication\nexport function deduplication(array: number[]) {\n  const result = [];\n  for (let i = 0; i < array.length; i++) {\n    if (result.indexOf(array[i]) === -1) {\n      result.push(array[i]);\n    }\n  }\n  return result;\n}\n\n/** 判断div中的文本是否有被选中 */\nexport function isDivSelected(div: HTMLDivElement) {\n  const selection = window.getSelection();\n  if (selection.rangeCount) {\n    const range = selection.getRangeAt(0);\n    return range.endOffset > range.startOffset && div.contains(range.commonAncestorContainer);\n  }\n  return false;\n}\n\nexport function traverseObject(obj: any, childrenProperty: string, callback: Function) {\n  callback(obj);\n\n  if (obj?.[childrenProperty] && Array.isArray(obj?.[childrenProperty])) {\n    obj[childrenProperty].forEach((child: any) => traverseObject(child, childrenProperty, callback));\n  }\n}\n"]}