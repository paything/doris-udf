{"version":3,"sources":["../src/components/tooltip/logic/BubbleTooltipElement.ts"],"names":[],"mappings":"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","file":"BubbleTooltipElement.js","sourcesContent":["import { EventHandler } from '../../../event/EventHandler';\nimport type { RectProps } from '../../../ts-types';\nimport { Placement } from '../../../ts-types';\nimport { createElement } from '../../../tools/dom';\nimport { importStyle } from './BubbleTooltipElementStyle';\nimport { isDivSelected, isMobile } from '../../../tools/util';\nimport type { TooltipOptions } from '../../../ts-types/tooltip';\nimport type { BaseTableAPI } from '../../../ts-types/base-table';\nimportStyle();\nconst TOOLTIP_CLASS = 'vtable__bubble-tooltip-element';\nconst CONTENT_CLASS = `${TOOLTIP_CLASS}__content`;\nconst TRIANGLE_CLASS = `${TOOLTIP_CLASS}__triangle`;\nconst HIDDEN_CLASS = `${TOOLTIP_CLASS}--hidden`;\nconst SHOWN_CLASS = `${TOOLTIP_CLASS}--shown`;\n\nexport class BubbleTooltipElement {\n  private _handler: EventHandler;\n  private _rootElement?: HTMLElement;\n  private _messageElement?: HTMLElement;\n  private _triangleElement?: HTMLElement;\n  private _disappearDelay?: number; // 提示框延迟多久消失\n  private _disappearDelayId?: any;\n  constructor() {\n    this._handler = new EventHandler();\n    const rootElement = (this._rootElement = createElement('div', [TOOLTIP_CLASS, HIDDEN_CLASS]));\n    const messageElement = createElement('div', [CONTENT_CLASS]);\n    const triangle = createElement('span', [TRIANGLE_CLASS]);\n    rootElement.appendChild(triangle);\n    rootElement.appendChild(messageElement);\n    this._messageElement = <HTMLElement>rootElement.querySelector(`.${CONTENT_CLASS}`) || undefined;\n    this._triangleElement = <HTMLElement>rootElement.querySelector(`.${TRIANGLE_CLASS}`) || undefined;\n\n    rootElement.addEventListener('mousemove', () => {\n      this._disappearDelayId && clearTimeout(this._disappearDelayId);\n    });\n    rootElement.addEventListener('mouseleave', () => {\n      this._disappearDelay = undefined;\n      this.unbindFromCell();\n    });\n\n    messageElement.addEventListener('wheel', e => {\n      e.stopPropagation();\n    });\n    messageElement.addEventListener('copy', e => {\n      const isSelected = isDivSelected(messageElement as HTMLDivElement); // 判断tooltip弹框内容是否有选中\n      if (isSelected) {\n        e.stopPropagation();\n      }\n    });\n  }\n  bindToCell(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    tooltipInstanceInfo: TooltipOptions,\n    confine: boolean\n  ): boolean {\n    this._disappearDelay = tooltipInstanceInfo?.disappearDelay;\n    this._disappearDelayId && clearTimeout(this._disappearDelayId);\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    const triangle = this._triangleElement;\n\n    rootElement?.classList.remove(SHOWN_CLASS);\n    rootElement?.classList.add(HIDDEN_CLASS);\n    if (this._canBindToCell(table, col, row)) {\n      //设置style及类名\n      messageElement.setAttribute('style', '');\n      triangle.setAttribute('style', '');\n      tooltipInstanceInfo?.className && rootElement.classList.add(tooltipInstanceInfo.className);\n      tooltipInstanceInfo?.style?.bgColor &&\n        (messageElement.style.backgroundColor = tooltipInstanceInfo?.style?.bgColor);\n      tooltipInstanceInfo?.style?.bgColor && (triangle.style.backgroundColor = tooltipInstanceInfo?.style?.bgColor);\n      triangle.style.display = tooltipInstanceInfo?.style?.arrowMark === true ? 'block' : 'none';\n      tooltipInstanceInfo?.style?.fontSize &&\n        (messageElement.style.fontSize = (tooltipInstanceInfo?.style?.fontSize ?? 12) + 'px');\n      tooltipInstanceInfo?.style?.fontFamily &&\n        (messageElement.style.fontFamily = tooltipInstanceInfo?.style?.fontFamily);\n      tooltipInstanceInfo?.style?.color && (messageElement.style.color = tooltipInstanceInfo?.style?.color);\n      tooltipInstanceInfo?.style?.padding &&\n        (messageElement.style.padding = `${tooltipInstanceInfo?.style?.padding.join('px ')}px`);\n      tooltipInstanceInfo?.style?.maxHeight &&\n        (messageElement.style.maxHeight = `${tooltipInstanceInfo?.style?.maxHeight}px`);\n      tooltipInstanceInfo?.style?.maxWidth &&\n        (messageElement.style.maxWidth = `${tooltipInstanceInfo?.style?.maxWidth}px`);\n      messageElement && (messageElement.textContent = tooltipInstanceInfo?.content);\n      const binded = this._bindToCell(\n        table,\n        col,\n        row,\n        tooltipInstanceInfo?.position,\n        tooltipInstanceInfo?.referencePosition,\n        confine,\n        tooltipInstanceInfo?.style?.arrowMark\n      );\n      if (binded) {\n        rootElement?.classList.add(SHOWN_CLASS);\n        rootElement?.classList.remove(HIDDEN_CLASS);\n        return true;\n      }\n    } else {\n      this.unbindFromCell();\n    }\n    return false;\n  }\n  release(): void {\n    this.unbindFromCell();\n\n    const rootElement = this._rootElement;\n    if (rootElement?.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler?.release?.();\n    delete this._rootElement;\n    delete this._messageElement;\n  }\n  move(table: BaseTableAPI, col: number, row: number, tooltipOptions?: TooltipOptions, confine?: boolean): void {\n    const rootElement = this._rootElement;\n    if (this._canBindToCell(table, col, row)) {\n      this._bindToCell(table, col, row, tooltipOptions?.position, tooltipOptions?.referencePosition, confine);\n      rootElement?.classList.add(SHOWN_CLASS);\n      rootElement?.classList.remove(HIDDEN_CLASS);\n    } else {\n      this.unbindFromCell();\n    }\n  }\n  unbindFromCell(): void {\n    if (this._disappearDelay) {\n      this._disappearDelayId = setTimeout(() => {\n        const rootElement = this._rootElement;\n        if (rootElement?.parentElement) {\n          rootElement.classList.remove(SHOWN_CLASS);\n          rootElement.classList.add(HIDDEN_CLASS);\n        }\n      }, this._disappearDelay ?? 0);\n    } else {\n      const rootElement = this._rootElement;\n      if (rootElement?.parentElement) {\n        rootElement.classList.remove(SHOWN_CLASS);\n        rootElement.classList.add(HIDDEN_CLASS);\n      }\n    }\n  }\n  _canBindToCell(table: BaseTableAPI, col: number, row: number): boolean {\n    const rect = table.getCellRangeRelativeRect({ col, row });\n    const element = table.getElement();\n    const { bottom, left, right, top } = rect;\n    // const { frozenRowCount, frozenColCount } = table;\n    // if (row >= frozenRowCount && frozenRowCount > 0) {\n    //   const frozenRect = table.getCellRangeRelativeRect({ col, row: frozenRowCount - 1 });\n    //   if (bottom < frozenRect.bottom) {\n    //     // 范围外\n    //     return false;\n    //   }\n    // } else if (bottom < 0) {\n    //   // 范围外\n    //   return false;\n    // }\n    // if (col >= frozenColCount && frozenColCount > 0) {\n    //   const frozenRect = table.getCellRangeRelativeRect({ col: frozenColCount - 1, row });\n    //   if (right < frozenRect.right) {\n    //     //整个是被冻结列盖住的 不需要提示toolTip\n    //     return false;\n    //   }\n    // } else if (left < 0) {\n    //   return false;\n    // }\n\n    if (table.isFrozenCell(col, row)) {\n      return true;\n    } else if (\n      bottom < table.getFrozenRowsHeight() ||\n      right < table.getFrozenColsWidth() ||\n      left > table.tableNoFrameWidth - table.getRightFrozenColsWidth() ||\n      top > table.tableNoFrameHeight - table.getBottomFrozenRowsHeight()\n    ) {\n      // 范围外\n      return false;\n    }\n    const { offsetHeight, offsetWidth } = element;\n    if (top > offsetHeight) {\n      return false;\n    }\n    if (left > offsetWidth) {\n      return false;\n    }\n    return true;\n  }\n  _bindToCell(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    position?: { x: number; y: number },\n    referencePosition?: { rect: RectProps; placement?: Placement },\n    confine?: boolean,\n    arrowMark?: boolean\n  ): boolean {\n    const rootElement = this._rootElement;\n    const rect = table.getCellRangeRelativeRect({ col, row });\n    const element = table.internalProps.tooltip.parentElement;\n    const containerWidth = table.internalProps.element.offsetWidth;\n    const { width } = rect;\n    if (rootElement) {\n      if (rootElement.parentElement !== element) {\n        element.appendChild(rootElement);\n      }\n      rootElement.style.left = `0px`;\n      // 边界碰撞检测\n      let tooltipY: number;\n      let tooltipX: number;\n      //设置最宽尺寸\n      const maxWidth = Math.min(containerWidth * 0.8, width * 4);\n      rootElement.style.maxWidth = `${maxWidth}px`;\n      //计算弹出框的宽度\n      const rootElementWidth = rootElement.clientWidth; //Math.min(Math.max(rootElement.clientWidth, width), maxWidth);\n      const rootElementHeight = rootElement.clientHeight;\n      if (position || referencePosition) {\n        const tooltipPosition = this.getComputedPosition(\n          table,\n          col,\n          row,\n          position,\n          referencePosition,\n          confine,\n          arrowMark\n        );\n        tooltipX = tooltipPosition.x;\n        tooltipY = tooltipPosition.y;\n      } else {\n        return false;\n      }\n\n      rootElement.style.left = `${tooltipX}px`;\n      rootElement.style.top = `${tooltipY}px`;\n      // rootElement.style.width=rootElementWidth+'px';\n      if (isMobile()) {\n        rootElement.style.fontSize = '11px';\n      }\n\n      // 判断当前tooltip范围是否与tooltip重合\n      const { x1: menuLeft, x2: menuRight, y1: menuTop, y2: menuBottom } = table.stateManager.menu.bounds;\n      const tooltipLeft = tooltipX;\n      const tooltipRight = tooltipLeft + rootElementWidth;\n      const tooltipTop = tooltipY;\n      const tooltipBottom = tooltipLeft + rootElementHeight;\n      if (\n        table.stateManager.menu.isShow &&\n        menuLeft < tooltipRight &&\n        menuRight > tooltipLeft &&\n        menuBottom > tooltipTop &&\n        menuTop < tooltipBottom\n      ) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }\n  private getComputedPosition(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    position?: { x: number; y: number },\n    referencePosition?: { rect: RectProps; placement?: Placement },\n    confine?: boolean,\n    arrowMark?: boolean\n  ) {\n    const rootElement = this._rootElement;\n    const rect = table.getCellRangeRelativeRect({ col, row });\n    const { x: parentX, y: parentY } = table.internalProps.tooltip.parentElement.getBoundingClientRect();\n    const {\n      width: containerWidth,\n      height: containerHeight,\n      x,\n      y\n    } = table.internalProps.element.getBoundingClientRect();\n    // const { width: containerWidth, height: containerHeight } = document.body.getBoundingClientRect();\n    const { width } = rect;\n    // 边界碰撞检测\n    let tooltipY: number;\n    let tooltipX: number;\n    //设置最宽尺寸\n    const maxWidth = Math.min(containerWidth * 0.8, width * 4);\n    rootElement.style.maxWidth = `${maxWidth}px`;\n    //计算弹出框的宽度\n    const rootElementWidth = rootElement.clientWidth; //Math.min(Math.max(rootElement.clientWidth, width), maxWidth);\n    const rootElementHeight = rootElement.clientHeight;\n    // this._triangleElement.setAttribute('style', '');\n    const triangleHeight = arrowMark ? 6 : 0;\n    if (position) {\n      tooltipX = position.x;\n      tooltipY = position.y + triangleHeight;\n      this._triangleElement.style.left = '50%';\n      this._triangleElement.style.marginLeft = '-5px';\n      this._triangleElement.style.top = '-5px';\n    } else if (referencePosition) {\n      let placement = referencePosition.placement ?? Placement.bottom;\n      const referenceXMiddle = referencePosition.rect.left + referencePosition.rect.width / 2;\n      const referenceYMiddle = referencePosition.rect.top + referencePosition.rect.height / 2;\n      const referenceTop = referencePosition.rect.top;\n      const referenceBottom = referencePosition.rect.bottom;\n      const referenceLeft = referencePosition.rect.left;\n      const referenceRight = referencePosition.rect.right;\n\n      let callCount = 0;\n      /** 根据placement计算弹出框的位置 躲避策略[dom的这块先去除 dom可以超出显示]：根据顺时针方向依次检测placement */\n      const adjustPosition = () => {\n        callCount++;\n        if (callCount >= 4) {\n          return;\n        }\n        this.removeStyleFromTriangle();\n        if (placement === Placement.top) {\n          tooltipX = referenceXMiddle - rootElementWidth / 2;\n          tooltipY = referenceTop - rootElementHeight - triangleHeight;\n          this._triangleElement.style.left = '50%';\n          this._triangleElement.style.marginLeft = '-5px';\n          this._triangleElement.style.bottom = '-5px';\n\n          // 判断如果超出左右范围则靠边显示\n          if (confine && tooltipY < 0) {\n            placement = Placement.right;\n            adjustPosition();\n          }\n        } else if (placement === Placement.bottom) {\n          tooltipX = referenceXMiddle - rootElementWidth / 2;\n          tooltipY = referenceBottom + triangleHeight;\n          this._triangleElement.style.left = '50%';\n          this._triangleElement.style.marginLeft = '-5px';\n          this._triangleElement.style.top = '-5px';\n          if (confine && tooltipY + rootElementHeight > containerHeight) {\n            placement = Placement.left;\n            adjustPosition();\n          }\n        } else if (placement === Placement.left) {\n          tooltipY = referenceYMiddle - rootElementHeight / 2;\n          tooltipX = referenceLeft - rootElementWidth - triangleHeight;\n          this._triangleElement.style.top = '50%';\n          this._triangleElement.style.marginTop = '-5px';\n          this._triangleElement.style.right = '-5px';\n          if (confine && tooltipX < 0) {\n            placement = Placement.top;\n            adjustPosition();\n          }\n        } else if (placement === Placement.right) {\n          tooltipY = referenceYMiddle - rootElementHeight / 2;\n          tooltipX = referenceRight + triangleHeight;\n          this._triangleElement.style.top = '50%';\n          this._triangleElement.style.marginTop = '-5px';\n          this._triangleElement.style.left = '-5px';\n          if (confine && tooltipX + rootElementWidth > containerWidth) {\n            placement = Placement.bottom;\n            adjustPosition();\n          }\n        }\n      };\n      adjustPosition();\n    }\n    // 判断如果超出左右范围则靠边显示\n    if (confine) {\n      if (tooltipX < 0) {\n        tooltipX = 0;\n      } else if (tooltipX + rootElement.offsetWidth > containerWidth) {\n        tooltipX = containerWidth - rootElement.offsetWidth;\n      }\n    }\n    return {\n      x: tooltipX + x - parentX,\n      y: tooltipY + y - parentY\n    };\n  }\n  private removeStyleFromTriangle() {\n    this._triangleElement.style.left = '';\n    this._triangleElement.style.right = '';\n    this._triangleElement.style.top = '';\n    this._triangleElement.style.bottom = '';\n    this._triangleElement.style.marginLeft = '';\n    this._triangleElement.style.marginTop = '';\n  }\n  _locate(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    position?: { x: number; y: number },\n    referencePosition?: {\n      rect: RectProps;\n      placement?: Placement;\n    },\n    confine?: boolean\n  ) {\n    const tooltipPosition = this.getComputedPosition(table, col, row, position, referencePosition, confine);\n    const tooltipX = tooltipPosition.x;\n    const tooltipY = tooltipPosition.y;\n    this._rootElement.style.left = `${tooltipX}px`;\n    this._rootElement.style.top = `${tooltipY}px`;\n  }\n}\n"]}