{"version":3,"sources":["../src/components/legend/continue-legend/get-continue-legend-attributes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,6CAA2D;AAE3D,oDAAmH;AAEnH,MAAM,yBAAyB,GAAG;IAChC,MAAM,EAAE,OAAO;IACf,QAAQ,EAAE,QAAQ;IAClB,OAAO,EAAE,EAAE;IACX,KAAK,EAAE;QACL,OAAO,EAAE,KAAK;QACd,OAAO,EAAE,CAAC;QACV,SAAS,EAAE;YACT,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,QAAQ;YACpB,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,gBAAgB,EAAE;SACjD;QACD,KAAK,EAAE,EAAE;KACV;IACD,OAAO,EAAE;QACP,OAAO,EAAE,IAAI;KACd;IACD,SAAS,EAAE;QACT,KAAK,EAAE;YACL,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,QAAQ;YACpB,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,gBAAgB,EAAE;SACjD;KACF;IACD,OAAO,EAAE;QACP,KAAK,EAAE;YACL,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,QAAQ;YACpB,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,gBAAgB,EAAE;SACjD;KACF;IACD,WAAW,EAAE;QACX,KAAK,EAAE;YACL,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,QAAQ;YACpB,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,gBAAgB,EAAE;SACjD;KACF;CACF,CAAC;AAEF,MAAM,sBAAsB,GAAG;IAC7B,UAAU,kCACL,yBAAyB,KAC5B,IAAI,EAAE;YACJ,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,CAAC;YACT,KAAK,EAAE;gBACL,IAAI,EAAE,kBAAkB;aACzB;SACF,GACF;IACD,QAAQ,kCACH,yBAAyB,KAC5B,IAAI,EAAE;YACJ,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,GAAG;YACX,KAAK,EAAE;gBACL,IAAI,EAAE,kBAAkB;aACzB;SACF,GACF;CACF,CAAC;AAEF,MAAM,qBAAqB,GAAG;IAC5B,UAAU,kBACR,cAAc,EAAE;YACd,IAAI,EAAE,SAAS;SAChB,EACD,KAAK,EAAE;YACL,KAAK,EAAE;gBACL,IAAI,EAAE,oBAAoB;aAC3B;SACF,EACD,IAAI,EAAE;YACJ,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,CAAC;YACT,KAAK,EAAE;gBACL,IAAI,EAAE,kBAAkB;aACzB;SACF,IACE,yBAAyB,CAC7B;IACD,QAAQ,kBACN,cAAc,EAAE;YACd,IAAI,EAAE,SAAS;SAChB,EACD,KAAK,EAAE;YACL,KAAK,EAAE;gBACL,IAAI,EAAE,oBAAoB;aAC3B;SACF,EACD,IAAI,EAAE;YACJ,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,GAAG;YACX,KAAK,EAAE;gBACL,IAAI,EAAE,kBAAkB;aACzB;SACF,IACE,yBAAyB,CAC7B;CACF,CAAC;AAEF,SAAgB,6BAA6B,CAC3C,IAAsD,EACtD,IAAuC;IAEvC,MAAM,KA6BF,IAAA,cAAK,EACP,EAAE,EACF,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,qBAAqB,CAAC,CACtE,IAAI,CAAC,MAAM,KAAK,QAAQ,IAAI,IAAI,CAAC,MAAM,KAAK,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,UAAU,CAC9E,EACD,IAAI,CACL,EAnCK,EAEJ,KAAK,GAAG,EAAE,EACV,OAAO,GAAG,EAAE,EACZ,IAAI,GAAG,EAAE,EACT,KAAK,GAAG,EAAE,EACV,SAAS,EACT,OAAO,EACP,WAAW,EACX,cAAc,EACd,UAAU,GAAG,EAAE,EAGf,IAAI,EACJ,EAAE,EACF,OAAO,EACP,MAAM,EACN,QAAQ,EACR,IAAI,EACJ,eAAe,EACf,KAAK,EACL,MAAM,EACN,QAAQ,EACR,WAAW,EACX,WAAW,EACX,QAAQ,EACR,OAAO,OASR,EAPI,QAAQ,cA5BP,0QA6BL,CAMA,CAAC;IAEF,MAAM,KAAK,GAAG,QAAQ,CAAC;IAGvB,IAAI,KAAK,CAAC,OAAO,EAAE;QACjB,KAAK,CAAC,KAAK,GAAG,IAAA,0CAA8B,EAAC,KAAK,CAAC,CAAC;KACrD;IAGD,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,KAAK,KAAK,CAAC;IAC9C,IAAI,CAAC,IAAA,gBAAO,EAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QAC3B,KAAK,CAAC,YAAY,GAAG,IAAA,8BAAkB,EAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACxD;IACD,IAAI,IAAA,gBAAO,EAAC,IAAI,CAAC,KAAK,CAAC,EAAE;QACvB,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;KAC9B;IACD,IAAI,IAAA,gBAAO,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;QACxB,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC;KAChC;IACD,IAAI,CAAC,IAAA,gBAAO,EAAC,IAAI,CAAC,KAAK,CAAC,EAAE;QACxB,KAAK,CAAC,SAAS,GAAG,IAAA,8BAAkB,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClD;IACD,IAAI,CAAC,IAAA,gBAAO,EAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QACzB,KAAK,CAAC,UAAU,GAAG,IAAA,8BAAkB,EAAC,KAAK,CAAC,KAAK,CAAC,CAAC;KACpD;IAED,KAAK,CAAC,SAAS,GAAG,IAAA,mCAAuB,EAAC,SAAS,CAAC,CAAC;IACrD,KAAK,CAAC,OAAO,GAAG,IAAA,mCAAuB,EAAC,OAAO,CAAC,CAAC;IACjD,KAAK,CAAC,WAAW,GAAG,IAAA,mCAAuB,EAAC,WAAW,CAAC,CAAC;IAEzD,IAAI,CAAC,IAAA,gBAAO,EAAC,cAAc,CAAC,EAAE;QAC5B,KAAK,CAAC,cAAc,GAAG,IAAA,8BAAkB,EAAC,cAAc,CAAC,CAAC;KAC3D;IAED,IAAI,UAAU,CAAC,OAAO,IAAI,CAAC,IAAA,gBAAO,EAAC,UAAU,CAAC,KAAK,CAAC,EAAE;QACpD,IAAA,cAAK,EAAC,KAAK,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,IAAA,gBAAO,EAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YAC/B,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;SACpC;KACF;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAlFD,sEAkFC","file":"get-continue-legend-attributes.js","sourcesContent":["import { isEmpty, isValid, merge } from '@visactor/vutils';\nimport type { IColorTableLegendOption, ISizeTableLegendOption } from '../../../ts-types/component/legend';\nimport { transformComponentStyle, transformLegendTitleAttributes, transformToGraphic } from '../../util/transform';\n\nconst defaultContinueLegendSpec = {\n  orient: 'right',\n  position: 'middle',\n  padding: 30,\n  title: {\n    visible: false,\n    padding: 0,\n    textStyle: {\n      fontSize: 14,\n      fontWeight: 'normal',\n      fill: { type: 'palette', key: 'titleFontColor' }\n    },\n    space: 12\n  },\n  handler: {\n    visible: true\n  },\n  startText: {\n    style: {\n      fontSize: 14,\n      fontWeight: 'normal',\n      fill: { type: 'palette', key: 'labelFontColor' }\n    }\n  },\n  endText: {\n    style: {\n      fontSize: 14,\n      fontWeight: 'normal',\n      fill: { type: 'palette', key: 'labelFontColor' }\n    }\n  },\n  handlerText: {\n    style: {\n      fontSize: 14,\n      fontWeight: 'normal',\n      fill: { type: 'palette', key: 'labelFontColor' }\n    }\n  }\n};\n\nconst defaultColorLegendSpec = {\n  horizontal: {\n    ...defaultContinueLegendSpec,\n    rail: {\n      width: 200,\n      height: 8,\n      style: {\n        fill: 'rgba(0,0,0,0.04)'\n      }\n    }\n  },\n  vertical: {\n    ...defaultContinueLegendSpec,\n    rail: {\n      width: 8,\n      height: 200,\n      style: {\n        fill: 'rgba(0,0,0,0.04)'\n      }\n    }\n  }\n};\n\nconst defaultSizeLegendSpec = {\n  horizontal: {\n    sizeBackground: {\n      fill: '#cdcdcd'\n    },\n    track: {\n      style: {\n        fill: 'rgba(20,20,20,0.1)'\n      }\n    },\n    rail: {\n      width: 200,\n      height: 4,\n      style: {\n        fill: 'rgba(0,0,0,0.04)'\n      }\n    },\n    ...defaultContinueLegendSpec\n  },\n  vertical: {\n    sizeBackground: {\n      fill: '#cdcdcd'\n    },\n    track: {\n      style: {\n        fill: 'rgba(20,20,20,0.1)'\n      }\n    },\n    rail: {\n      width: 4,\n      height: 200,\n      style: {\n        fill: 'rgba(0,0,0,0.04)'\n      }\n    },\n    ...defaultContinueLegendSpec\n  }\n};\n\nexport function getContinuousLegendAttributes(\n  spec: IColorTableLegendOption | ISizeTableLegendOption,\n  rect: { width: number; height: number }\n) {\n  const {\n    // 需要进行样式转换的属性\n    title = {},\n    handler = {},\n    rail = {},\n    track = {},\n    startText,\n    endText,\n    handlerText,\n    sizeBackground,\n    background = {},\n\n    // 以下不属于 legend 需要的属性，单独拿出来以免污染传递给组件的属性\n    type,\n    id,\n    visible,\n    orient,\n    position,\n    data,\n    defaultSelected,\n    field,\n    filter,\n    regionId,\n    regionIndex,\n    seriesIndex,\n    seriesId,\n    padding, // vchart 布局模块已经处理了\n\n    ...restSpec\n  } = merge(\n    {},\n    (spec.type === 'color' ? defaultColorLegendSpec : defaultSizeLegendSpec)[\n      spec.orient === 'bottom' || spec.orient === 'top' ? 'horizontal' : 'vertical'\n    ],\n    spec\n  );\n\n  const attrs = restSpec;\n\n  // transform title\n  if (title.visible) {\n    attrs.title = transformLegendTitleAttributes(title);\n  }\n\n  // handlerStyle\n  attrs.showHandler = handler.visible !== false;\n  if (!isEmpty(handler.style)) {\n    attrs.handlerStyle = transformToGraphic(handler.style);\n  }\n  if (isValid(rail.width)) {\n    attrs.railWidth = rail.width;\n  }\n  if (isValid(rail.height)) {\n    attrs.railHeight = rail.height;\n  }\n  if (!isEmpty(rail.style)) {\n    attrs.railStyle = transformToGraphic(rail.style);\n  }\n  if (!isEmpty(track.style)) {\n    attrs.trackStyle = transformToGraphic(track.style);\n  }\n\n  attrs.startText = transformComponentStyle(startText);\n  attrs.endText = transformComponentStyle(endText);\n  attrs.handlerText = transformComponentStyle(handlerText);\n\n  if (!isEmpty(sizeBackground)) {\n    attrs.sizeBackground = transformToGraphic(sizeBackground);\n  }\n\n  if (background.visible && !isEmpty(background.style)) {\n    merge(attrs, background.style);\n    if (isValid(background.padding)) {\n      attrs.padding = background.padding;\n    }\n  }\n\n  return attrs;\n}\n"]}