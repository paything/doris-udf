{"version":3,"sources":["../src/components/legend/discrete-legend/get-discrete-legend-attributes.ts"],"names":[],"mappings":"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","file":"get-discrete-legend-attributes.js","sourcesContent":["import { isEmpty, isValid, merge } from '@visactor/vutils';\nimport type { IDiscreteTableLegendOption } from '../../../ts-types/component/legend';\nimport { isPercent } from '../../../tools/calc';\nimport { transformComponentStyle, transformLegendTitleAttributes, transformToGraphic } from '../../util/transform';\n\nconst defaultLegendSpec = {\n  orient: 'bottom',\n  position: 'middle',\n  padding: 30,\n  title: {\n    visible: false,\n    padding: 0,\n    textStyle: {\n      fontSize: 14,\n      fill: '#000000',\n      fontWeight: 'normal'\n    },\n    space: 12\n  },\n  item: {\n    visible: true,\n    spaceCol: 10,\n    spaceRow: 10,\n    padding: 2,\n    background: {\n      state: {\n        selectedHover: {\n          fill: 'gray',\n          fillOpacity: 0.7\n        },\n        unSelectedHover: {\n          fill: 'gray',\n          fillOpacity: 0.2\n        }\n      }\n    },\n    shape: {\n      space: 4,\n      state: {\n        unSelected: {\n          fillOpacity: 0.5\n        }\n      }\n    },\n    label: {\n      space: 4,\n      style: {\n        fill: '#89909D',\n        fontSize: 14\n      },\n      state: {\n        unSelected: {\n          fillOpacity: 0.5\n        }\n      }\n    }\n  },\n  allowAllCanceled: true,\n  visible: true\n};\n\nexport function getLegendAttributes(spec: IDiscreteTableLegendOption, rect: { width: number; height: number }) {\n  const {\n    // 需要进行样式转换的属性\n    title = {},\n    item = {},\n    pager = {},\n    background = {},\n\n    // 以下不属于 legend 需要的属性，单独拿出来以免污染传递给组件的属性\n    type,\n    id,\n    visible,\n    orient,\n    position,\n    data,\n    filter,\n    regionId,\n    regionIndex,\n    seriesIndex,\n    seriesId,\n    padding, // vchart 布局模块已经处理了\n\n    ...restSpec\n  } = merge({}, defaultLegendSpec, spec);\n\n  const attrs: any = restSpec;\n\n  // transform title\n  if (title.visible) {\n    attrs.title = transformLegendTitleAttributes(title);\n  }\n\n  // transform item\n  if (!isEmpty(item.focusIconStyle)) {\n    transformToGraphic(item.focusIconStyle);\n  }\n  transformComponentStyle(item.shape);\n  transformComponentStyle(item.label);\n  transformComponentStyle(item.value);\n  transformComponentStyle(item.background);\n\n  if (isPercent(item.maxWidth)) {\n    item.maxWidth = (Number(item.maxWidth.substring(0, item.maxWidth.length - 1)) * rect.width) / 100;\n  }\n  if (isPercent(item.width)) {\n    item.width = (Number(item.width.substring(0, item.width.length - 1)) * rect.width) / 100;\n  }\n  if (isPercent(item.height)) {\n    item.height = (Number(item.height.substring(0, item.height.length - 1)) * rect.width) / 100;\n  }\n  attrs.item = item;\n\n  // transform pager\n  if (!isEmpty(pager.textStyle)) {\n    transformToGraphic(pager.textStyle);\n  }\n  transformComponentStyle(pager.handler);\n  attrs.pager = pager;\n\n  if (background.visible && !isEmpty(background.style)) {\n    merge(attrs, background.style);\n    if (isValid(background.padding)) {\n      attrs.padding = background.padding;\n    }\n  }\n\n  return attrs;\n}\n"]}