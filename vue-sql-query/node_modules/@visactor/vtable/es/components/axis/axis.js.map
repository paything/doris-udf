{"version":3,"sources":["../src/components/axis/axis.ts"],"names":[],"mappings":"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","file":"axis.js","sourcesContent":["import { degreeToRadian, isNil, isValidNumber, merge } from '@visactor/vutils';\nimport type { BaseTableAPI } from '../../ts-types/base-table';\nimport type { ICellAxisOption } from '../../ts-types/component/axis';\nimport { LineAxis, type LineAxisAttributes } from './../../vrender';\nimport { getAxisAttributes, getCommonAxis } from './get-axis-attributes';\nimport { isXAxis, isYAxis } from '../util/orient';\nimport type { IOrientType } from '../../ts-types/component/util';\nimport { BandAxisScale } from './band-scale';\nimport { registerDataSetInstanceParser, registerDataSetInstanceTransform } from '../util/register';\nimport type { Parser } from '@visactor/vdataset';\nimport { DataSet, DataView } from '@visactor/vdataset';\nimport type { IBaseScale } from '@visactor/vscale';\nimport { ticks } from './../../vrender';\nimport { LinearAxisScale } from './linear-scale';\nimport { doOverlap } from './label-overlap';\nimport type { TableTheme } from '../../themes/theme-define';\n\nconst DEFAULT_BAND_INNER_PADDING = 0.1;\nconst DEFAULT_BAND_OUTER_PADDING = 0.3;\nconst scaleParser: Parser = (scale: IBaseScale) => {\n  return scale;\n};\n\nexport interface ICartesianAxis {\n  new (\n    option: ICellAxisOption,\n    width: number,\n    height: number,\n    padding: [number, number, number, number],\n    table: BaseTableAPI\n  ): CartesianAxis;\n}\n\nexport class CartesianAxis {\n  width: number;\n  height: number;\n  x: number = 0;\n  y: number = 0;\n  table: BaseTableAPI;\n  option: ICellAxisOption;\n  orient: IOrientType;\n  visible: boolean;\n  type: 'linear' | 'band' | 'point' | 'time' | 'log' | 'symlog';\n  inverse: boolean;\n  data?: any[];\n  tickData: DataView;\n  scale: BandAxisScale | LinearAxisScale;\n  component: LineAxis;\n  padding: [number, number, number, number];\n\n  constructor(\n    option: ICellAxisOption,\n    width: number,\n    height: number,\n    padding: [number, number, number, number],\n    table: BaseTableAPI\n  ) {\n    this.padding = padding;\n    this.table = table;\n    this.orient = option.orient ?? 'left';\n    this.type = option.type ?? 'band';\n    this.option = merge(\n      {},\n      // commonAxis,\n      getCommonAxis(option.__vtableChartTheme),\n      getTableAxisTheme(this.orient, table.theme),\n      getChartSpecAxisTheme(this.orient, this.type, option.__vtableChartTheme),\n      option\n    );\n\n    if (this.orient === 'left' || this.orient === 'right') {\n      // const innerOffsetTop = this.option.innerOffset?.top ?? 0;\n      // const innerOffsetBottom = this.option.innerOffset?.bottom ?? 0;\n      const innerOffsetTop = 0;\n      const innerOffsetBottom = 0;\n      this.width = width;\n      this.height = height - padding[0] - padding[2] - innerOffsetBottom;\n      this.y = padding[0] + innerOffsetTop;\n    } else if (this.orient === 'top' || this.orient === 'bottom') {\n      // const innerOffsetLeft = this.option.innerOffset?.left ?? 0;\n      // const innerOffsetRight = this.option.innerOffset?.right ?? 0;\n      const innerOffsetLeft = 0;\n      const innerOffsetRight = 0;\n      this.width = width - padding[1] - padding[3] - innerOffsetRight;\n      this.height = height;\n      this.x = padding[3] + innerOffsetLeft;\n    }\n\n    this.visible = option.visible ?? true;\n    this.inverse = 'inverse' in option ? !!option.inverse : false;\n    if (option.type === 'band') {\n      this.data = option.domain;\n    }\n\n    this.initScale();\n    this.initData();\n    this.createComponent();\n    this.initEvent();\n  }\n\n  initScale() {\n    const option = this.option as any;\n    if (this.type === 'band' || this.type === 'point') {\n      this.scale = new BandAxisScale();\n      this.scale.bandPadding = option.bandPadding;\n      this.scale.paddingInner = option.paddingInner;\n      this.scale.paddingOuter = option.paddingOuter;\n      this.scale.calcScales(DEFAULT_BAND_INNER_PADDING, DEFAULT_BAND_OUTER_PADDING); // 0.1 0.3\n      this.scale.updateScaleDomain(this.data);\n      this.updateScaleRange();\n    } else if (this.type === 'linear' || this.type === 'time' || this.type === 'log' || this.type === 'symlog') {\n      this.scale = new LinearAxisScale(this.type);\n      this.scale.setExtraAttrFromSpec(\n        option.nice,\n        option.zero,\n        option.range,\n        option.expand,\n        option.base,\n        option.constant\n      );\n      this.scale.transformScaleDomain();\n      this.scale.updateScaleDomain();\n      this.updateScaleRange();\n    }\n  }\n\n  initData() {\n    if (!this.table._vDataSet) {\n      this.table._vDataSet = new DataSet();\n    }\n\n    registerDataSetInstanceParser(this.table._vDataSet, 'scale', scaleParser);\n    registerDataSetInstanceTransform(this.table._vDataSet, 'ticks', ticks);\n\n    const label = this.option.label || {};\n    const tick = this.option.tick || {};\n\n    const tickData = new DataView(this.table._vDataSet)\n      .parse(this.scale._scale, {\n        type: 'scale'\n      })\n      .transform(\n        {\n          type: 'ticks',\n          options: {\n            sampling: this.option.sampling !== false, // default do sampling\n            tickCount: tick.tickCount,\n            forceTickCount: tick.forceTickCount,\n            tickStep: tick.tickStep,\n            tickMode: tick.tickMode,\n            noDecimals: tick.noDecimals,\n\n            axisOrientType: this.orient,\n            coordinateType: 'cartesian',\n\n            labelStyle: label.style,\n            labelFormatter: label.formatMethod,\n            labelGap: label.minGap,\n\n            labelLastVisible: label.lastVisible,\n            labelFlush: label.flush\n          }\n        },\n        false\n      );\n    this.tickData = tickData;\n\n    this.computeData();\n  }\n\n  computeData(): void {\n    this.tickData.reRunAllTransform();\n  }\n\n  initEvent() {\n    // to be added\n  }\n\n  createComponent() {\n    const axisStylrAttrs = getAxisAttributes(this.option);\n    const attrs = this.getUpdateAttribute();\n    attrs.verticalFactor = this.orient === 'top' || this.orient === 'right' ? -1 : 1;\n    this.component = new LineAxis(\n      merge(\n        {\n          disableTriggerEvent: this.table.options.disableInteraction\n        },\n        axisStylrAttrs,\n        attrs\n      )\n    );\n    this.component.setAttributes(this.setLayoutStartPosition({ x: this.x, y: this.y }));\n    (this.component as any).originAxis = this;\n  }\n\n  resize(width: number, height: number) {\n    this.width = width - (this.orient === 'top' || this.orient === 'bottom' ? this.padding[1] + this.padding[3] : 0);\n    this.height = height - (this.orient === 'left' || this.orient === 'right' ? this.padding[2] + this.padding[0] : 0);\n    this.updateScaleRange();\n    this.computeData();\n    const axisStylrAttrs = getAxisAttributes(this.option);\n    const attrs = this.getUpdateAttribute();\n    attrs.verticalFactor = this.orient === 'top' || this.orient === 'right' ? -1 : 1;\n    this.component.setAttributes(merge({}, axisStylrAttrs, attrs));\n    this.component.setAttributes(this.setLayoutStartPosition({ x: this.x, y: this.y }));\n    this.overlap();\n  }\n\n  overlap() {\n    doOverlap(this.component, this);\n  }\n\n  getLayoutRect() {\n    // const padding = getQuadProps(this.table.theme.bodyStyle.padding as number);\n    return {\n      // width: this.width - (this.orient === 'top' || this.orient === 'bottom' ? padding[3] + padding[1] : 0),\n      // height: this.height - (this.orient === 'left' || this.orient === 'right' ? padding[0] + padding[2] : 0)\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  getUpdateAttribute() {\n    // 获取更新的坐标轴属性\n    const regionHeight = this.table.tableNoFrameHeight;\n    const regionWidth = this.table.tableNoFrameWidth;\n\n    const { width, height } = this.getLayoutRect();\n    const isX = isXAxis(this.orient);\n    const isY = isYAxis(this.orient);\n    let end = { x: 0, y: 0 };\n    let gridLength = 0;\n    let axisLength = 0;\n    if (isX) {\n      end = { x: width, y: 0 };\n      gridLength = regionHeight;\n      axisLength = width;\n    } else if (isY) {\n      end = { x: 0, y: height };\n      gridLength = regionWidth;\n      axisLength = height;\n    }\n    const size = this.orient === 'top' || this.orient === 'bottom' ? height : width;\n    const attrs: LineAxisAttributes = {\n      // start: { x: this.x, y: this.y },\n      // x: this.x,\n      // y: this.y,\n      start: { x: 0, y: 0 },\n      end,\n      // grid: {\n      //   type: 'line',\n      //   length: gridLength,\n      //   visible: this.option.grid.visible\n      // },\n      title: {\n        text: this.option.title.text as string,\n        maxWidth: this._getTitleLimit(isX)\n      },\n      items: this.getLabelItems(axisLength),\n      verticalLimitSize: size,\n      verticalMinSize: size\n    };\n    return attrs;\n  }\n\n  getLabelItems(length: number) {\n    return [\n      this.tickData.latestData\n        .map((obj: any) => {\n          return {\n            id: obj.value,\n            label: obj.value,\n            value: length === 0 ? 0 : this.scale.dataToPosition([obj.value]) / length,\n            rawValue: obj.value\n          };\n        })\n        .filter((entry: any) => entry.value >= 0 && entry.value <= 1)\n    ];\n  }\n\n  updateScaleRange() {\n    const right = this.option.innerOffset?.right ?? 0;\n    const left = this.option.innerOffset?.left ?? 0;\n    const top = this.option.innerOffset?.top ?? 0;\n    const bottom = this.option.innerOffset?.bottom ?? 0;\n\n    const { width, height } = this.getLayoutRect();\n    const inverse = (this.option as any).inverse || false;\n    let newRange: [number, number] = [0, 0];\n    if (isXAxis(this.orient)) {\n      if (isValidNumber(width)) {\n        // newRange = inverse ? [width, 0] : [0, width];\n        newRange = inverse ? [width - right, left] : [left, width - right];\n      }\n    } else {\n      if (isValidNumber(height)) {\n        // newRange = inverse ? [0, height] : [height, 0];\n        newRange = inverse ? [top, height - bottom] : [height - bottom, top];\n      }\n    }\n\n    this.scale.updateRange(newRange);\n  }\n\n  setLayoutStartPosition(pos: any) {\n    let { x, y } = pos;\n\n    if (isValidNumber(x)) {\n      x += Number(this.orient === 'left') * this.getLayoutRect().width;\n    }\n    if (isValidNumber(y)) {\n      y += Number(this.orient === 'top') * this.getLayoutRect().height;\n    }\n\n    return { x, y };\n    // super.setLayoutStartPosition({ x, y });\n  }\n\n  private _getTitleLimit(isX: boolean) {\n    if (this.option.title.visible && isNil(this.option.title.style?.maxLineWidth)) {\n      let angle = this.option.title.style?.angle || 0;\n      if (this.option.title?.autoRotate && isNil(this.option.title.angle)) {\n        angle = this.option.orient === 'left' ? -90 : 90;\n      }\n      if (isX) {\n        const width = this.getLayoutRect().width;\n        const cosValue = Math.abs(Math.cos(degreeToRadian(angle)));\n        // VRender 接收到的limit是考虑角度计算后的宽度\n        // TODO：还需要考虑angle后，高度是否太高，综合计算一个limit，比如高度不能超过图表整体高度的1/4\n        return cosValue < 1e-6 ? Infinity : width / cosValue;\n      }\n      const height = this.getLayoutRect().height;\n      const sinValue = Math.abs(Math.sin(degreeToRadian(angle)));\n\n      // TODO：还需要考虑angle后，宽度是否太宽，综合计算一个limit，比如宽度度不能超过图表整体宽度的1/4\n      return sinValue < 1e-6 ? Infinity : height / sinValue;\n    }\n\n    return null;\n  }\n\n  getScale() {\n    return this.scale._scale;\n  }\n\n  getDomainSpec() {\n    return (this.scale as LinearAxisScale).domain;\n  }\n}\n\nfunction getTableAxisTheme(orient: IOrientType, theme: TableTheme) {\n  let directionStyle;\n  if (orient === 'left') {\n    directionStyle = theme.axisStyle.leftAxisStyle;\n  } else if (orient === 'right') {\n    directionStyle = theme.axisStyle.rightAxisStyle;\n  } else if (orient === 'top') {\n    directionStyle = theme.axisStyle.topAxisStyle;\n  } else if (orient === 'bottom') {\n    directionStyle = theme.axisStyle.bottomAxisStyle;\n  }\n  return merge({}, theme.axisStyle.defaultAxisStyle, directionStyle);\n}\n\nfunction getChartSpecAxisTheme(\n  orient: IOrientType,\n  type: 'linear' | 'band' | 'point' | 'time' | 'log' | 'symlog',\n  chartSpecTheme?: any\n) {\n  if (!chartSpecTheme) {\n    return {};\n  }\n  const axisTheme = chartSpecTheme.axis;\n  let axisTypeTheme;\n  if (type === 'linear' || type === 'log' || type === 'symlog') {\n    axisTypeTheme = chartSpecTheme.axisLinear;\n  } else if (type === 'band') {\n    axisTypeTheme = chartSpecTheme.axisBand;\n  }\n\n  let axisOrientTheme;\n  if (orient === 'top' || orient === 'bottom') {\n    axisOrientTheme = chartSpecTheme.axisX;\n  } else if (orient === 'left' || orient === 'right') {\n    axisOrientTheme = chartSpecTheme.axisY;\n  }\n  return merge({}, axisTheme, axisTypeTheme, axisOrientTheme);\n}\n"]}