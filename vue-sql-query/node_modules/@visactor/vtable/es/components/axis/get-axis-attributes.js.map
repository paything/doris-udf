{"version":3,"sources":["../src/components/axis/get-axis-attributes.ts"],"names":[],"mappings":"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","file":"get-axis-attributes.js","sourcesContent":["import { degreeToRadian, isNil, merge, pickWithout } from '@visactor/vutils';\nimport { transformAxisLineStyle, transformStateStyle, transformToGraphic } from '../util/transform';\nimport type { ICellAxisOption } from '../../ts-types/component/axis';\n\nconst DEFAULT_TITLE_STYLE = {\n  left: {\n    textAlign: 'center',\n    textBaseline: 'bottom'\n  },\n  right: {\n    textAlign: 'center',\n    textBaseline: 'bottom'\n  },\n  radius: {},\n  angle: {}\n};\n\nexport const DEFAULT_TEXT_FONT_FAMILY =\n  // eslint-disable-next-line max-len\n  'PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol';\n\nexport const DEFAULT_TEXT_FONT_SIZE = 14;\n\nexport const THEME_CONSTANTS = {\n  FONT_FAMILY: DEFAULT_TEXT_FONT_FAMILY,\n  LABEL_FONT_SIZE: DEFAULT_TEXT_FONT_SIZE,\n  MAP_LABEL_FONT_SIZE: 10,\n  TITLE_FONT_SIZE: 18,\n  AXIS_TICK_SIZE: 4\n};\n\nexport const commonAxis = {\n  domainLine: {\n    visible: true,\n    style: {\n      lineWidth: 1,\n      stroke: '#D9DDE4',\n      strokeOpacity: 1\n    }\n  },\n  grid: {\n    visible: true,\n    style: {\n      lineWidth: 1,\n      stroke: '#EBEDF2',\n      strokeOpacity: 1,\n      lineDash: [] as any[]\n    }\n  },\n  subGrid: {\n    visible: false,\n    style: {\n      lineWidth: 1,\n      stroke: '#EBEDF2',\n      strokeOpacity: 1,\n      lineDash: [4, 4]\n    }\n  },\n  tick: {\n    visible: true,\n    tickSize: THEME_CONSTANTS.AXIS_TICK_SIZE,\n    style: {\n      lineWidth: 1,\n      stroke: '#D9DDE4',\n      strokeOpacity: 1\n    }\n  },\n  subTick: {\n    visible: false,\n    tickSize: THEME_CONSTANTS.AXIS_TICK_SIZE / 2,\n    style: {\n      lineWidth: 1,\n      stroke: '#D9DDE4',\n      strokeOpacity: 1\n    }\n  },\n  label: {\n    visible: true,\n    space: 1, // hack: VChart中为0，为了方便fs调试暂时改为1\n    style: {\n      fontSize: THEME_CONSTANTS.LABEL_FONT_SIZE,\n      fill: '#89909D',\n      fontWeight: 'normal',\n      fillOpacity: 1\n    },\n    autoLimit: true\n  },\n  title: {\n    space: 10,\n    style: {\n      fontSize: THEME_CONSTANTS.LABEL_FONT_SIZE,\n      fill: '#333333',\n      fontWeight: 'normal',\n      fillOpacity: 1\n    }\n  }\n};\n\nexport function getCommonAxis(theme: any) {\n  if (!theme?.colorScheme?.default?.palette) {\n    return commonAxis;\n  }\n  return merge({}, commonAxis, {\n    tick: {\n      style: {\n        stroke: theme.colorScheme.default.palette.axisDomainColor || '#D9DDE4'\n      }\n    },\n    subTick: {\n      style: {\n        stroke: theme.colorScheme.default.palette.axisDomainColor || '#D9DDE4'\n      }\n    },\n    label: {\n      style: {\n        fill: theme.colorScheme.default.palette.axisLabelFontColor || '#89909D'\n      }\n    },\n    title: {\n      style: {\n        fill: theme.colorScheme.default.palette.secondaryFontColor || '#333333'\n      }\n    }\n  });\n}\n\nexport function getAxisAttributes(option: ICellAxisOption) {\n  const spec = merge({}, option);\n  // const spec = option;\n  let titleAngle = spec.title?.angle ?? 0;\n  let titleTextStyle;\n  if (spec.orient === 'left' || spec.orient === 'right') {\n    // 处理纵轴的标题样式\n    if (spec.title?.autoRotate && isNil(spec.title.angle)) {\n      titleAngle = spec.orient === 'left' ? -90 : 90;\n      titleTextStyle = DEFAULT_TITLE_STYLE[spec.orient];\n    }\n  }\n\n  const labelSpec = pickWithout(spec.label, ['style', 'formatMethod', 'state']);\n\n  return {\n    orient: spec.orient,\n    select: spec.select,\n    hover: spec.hover,\n    line: transformAxisLineStyle(spec.domainLine),\n    label: {\n      style:\n        // isFunction(spec.label.style)\n        //   ? (datum: Datum, index: number) => {\n        //       const style = this._preprocessSpec(spec.label.style(datum.rawValue, index, datum));\n\n        //       return transformToGraphic(this._preprocessSpec(merge({}, this._theme.label?.style, style)));\n        //     }\n        //   :\n        transformToGraphic(spec.label.style),\n      formatMethod: spec.label.formatMethod\n        ? (value: any, datum: any, index: number) => {\n            return spec.label.formatMethod(datum.rawValue, datum);\n          }\n        : null,\n      state: transformStateStyle(spec.label.state),\n      ...labelSpec\n    },\n    tick: {\n      visible: spec.tick.visible,\n      length: spec.tick.tickSize,\n      inside: spec.tick.inside,\n      alignWithLabel: spec.tick.alignWithLabel,\n      style:\n        // isFunction(spec.tick.style)\n        //   ? (datum: Datum, index: number) => {\n        //       const style = this._preprocessSpec(spec.tick.style(datum.rawValue, index, datum));\n\n        //       return transformToGraphic(this._preprocessSpec(merge({}, this._theme.tick?.style, style)));\n        //     }\n        //   :\n        transformToGraphic(spec.tick.style),\n      state: transformStateStyle(spec.tick.state),\n      dataFilter: spec.tick.dataFilter\n    },\n    subTick: {\n      visible: spec.subTick.visible,\n      length: spec.subTick.tickSize,\n      inside: spec.subTick.inside,\n      count: spec.subTick.tickCount,\n      style: transformToGraphic(spec.subTick.style),\n      state: transformStateStyle(spec.subTick.state)\n    },\n    grid: {\n      type: 'line',\n      visible: spec.grid.visible,\n      alternateColor: spec.grid.alternateColor,\n      alignWithLabel: spec.grid.alignWithLabel,\n      style:\n        // isFunction(spec.grid.style)\n        //   ? (datum: Datum, index: number) => {\n        //       const style = spec.grid.style(datum.datum?.rawValue, index, datum.datum);\n\n        //       return transformToGraphic(this._preprocessSpec(merge({}, this._theme.grid?.style, style)));\n        //     }\n        //   :\n        transformToGraphic(spec.grid.style)\n    },\n    subGrid: {\n      type: 'line',\n      visible: spec.subGrid.visible,\n      alternateColor: spec.subGrid.alternateColor,\n      style: transformToGraphic(spec.subGrid.style)\n    },\n    title: {\n      visible: spec.title.visible,\n      position: spec.title.position,\n      space: spec.title.space,\n      autoRotate: false, // 默认不对外提供该配置\n      angle: titleAngle ? degreeToRadian(titleAngle) : null,\n      textStyle: merge({}, titleTextStyle, transformToGraphic(spec.title.style)),\n      padding: spec.title.padding,\n      shape: {\n        visible: spec.title.shape?.visible,\n        space: spec.title.shape?.space,\n        style: transformToGraphic(spec.title.shape?.style)\n      },\n      background: {\n        visible: spec.title.background?.visible,\n        style: transformToGraphic(spec.title.background?.style)\n      },\n      state: {\n        text: transformStateStyle(spec.title.state),\n        shape: transformStateStyle(spec.title.shape?.state),\n        background: transformStateStyle(spec.title.background?.state)\n      }\n    },\n    panel: {\n      visible: spec.background?.visible,\n      style: transformToGraphic(spec.background?.style),\n      state: transformStateStyle(spec.background?.state)\n    }\n  };\n}\n"]}