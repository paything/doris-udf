{"version":3,"sources":["../src/components/menu/dom/logic/MenuElement.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,gCAAgC,CAAC;AAS9D,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACtD,OAAO,EAAE,WAAW,EAAE,MAAM,oBAAoB,CAAC;AACjD,OAAO,EAAE,gBAAgB,EAAE,MAAM,mCAAmC,CAAC;AACrE,OAAO,EAAE,WAAW,EAAE,MAAM,0BAA0B,CAAC;AACvD,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAE3C,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAElD,WAAW,EAAE,CAAC;AAEd,MAAM,SAAS,GAAG,sBAAsB,CAAC;AACzC,MAAM,cAAc,GAAG,GAAG,SAAS,QAAQ,CAAC;AAC5C,MAAM,iBAAiB,GAAG,GAAG,SAAS,WAAW,CAAC;AAClD,MAAM,gBAAgB,GAAG,GAAG,SAAS,UAAU,CAAC;AAChD,MAAM,eAAe,GAAG,GAAG,SAAS,SAAS,CAAC;AAC9C,MAAM,gBAAgB,GAAG,GAAG,SAAS,UAAU,CAAC;AAChD,MAAM,gBAAgB,GAAG,GAAG,SAAS,UAAU,CAAC;AAChD,MAAM,cAAc,GAAG,GAAG,SAAS,QAAQ,CAAC;AAC5C,MAAM,eAAe,GAAG,GAAG,SAAS,SAAS,CAAC;AAC9C,MAAM,eAAe,GAAG,GAAG,SAAS,SAAS,CAAC;AAC9C,MAAM,eAAe,GAAG,GAAG,SAAS,SAAS,CAAC;AAC9C,MAAM,iBAAiB,GAAG,GAAG,SAAS,YAAY,CAAC;AACnD,MAAM,kBAAkB,GAAG,GAAG,SAAS,aAAa,CAAC;AACrD,MAAM,uBAAuB,GAAG,GAAG,SAAS,iBAAiB,CAAC;AAE9D,SAAS,oBAAoB;IAC3B,MAAM,WAAW,GAAG,aAAa,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC,CAAC;IACxE,OAAO,WAAW,CAAC;AACrB,CAAC;AAED,MAAM,UAAU,eAAe,CAC7B,MAAoB,EACpB,KAAkC,EAClC,cAAsB,EACtB,UAAkB,EAClB,UAAkB,EAClB,KAAa;IAEb,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;IAC9D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QAC3B,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,SAAS,CAAC;QAC7B,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,SAAS,CAAC;QAErC,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YACtD,IAAI,MAAM,CAAC,YAAY,EAAE,IAAI,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACxD,MAAM,WAAW,GAAI,MAAM,CAAC,aAAa,CAAC,SAAkC,CAAC,kBAAkB,CAC7F,KAAyB,CAC1B,CAAC;gBACF,IAAI,CAAC,WAAW,EAAE;oBAChB,SAAS;iBACV;gBACD,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;gBACtB,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;aACvB;iBAAM;gBACL,MAAM,WAAW,GAAG,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,2BAA2B,CAAC,KAAe,CAAC,CAAC;gBAChG,IAAI,CAAC,WAAW,EAAE;oBAChB,SAAS;iBACV;gBACD,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;gBACtB,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;aACvB;SACF;QAED,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,SAAS,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE;YAKpE,IAAI,cAAc,KAAK,OAAO,EAAE;gBAC9B,OAAO,IAAI,CAAC;aACb;SACF;KACF;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,OAAO,WAAW;IAOtB,YAAY,KAAmB;;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,EAAE,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,oBAAoB,EAAE,CAAC;QAC3C,IAAI,CAAC,cAAc,GAAG,oBAAoB,EAAE,CAAC;QAC5C,IAAI,CAAC,cAAsB,CAAC,GAAG,GAAG,IAAI,CAAC;QACxC,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;QAG7B,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YAC9C,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACnD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE;YACrD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QAMH,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE;YAClD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YAGnB,IAAK,CAAC,CAAC,MAAsB,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE;gBACzE,OAAO;aACR;YACD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBAC1D,OAAO;aACR;YAGD,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC,MAAa,CAAC;YAChF,IAAI,OAAO,aAAa,KAAK,QAAQ,IAAI,WAAW,EAAE;gBACpD,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,OAAO;aACR;YAED,MAAM,KAAK,GAAG,KAAK,CAAC,YAAY,EAAE;gBAChC,CAAC,CAAE,KAAK,CAAC,aAAa,CAAC,SAAkC,CAAC,qBAAqB,CAAC,GAAG,EAAE,GAAG,CAAC;gBACzF,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAEnC,MAAM,SAAS,GAAG,KAAK,CAAC,wBAAwB,CAAC,GAAG,EAAE,GAAG,EAAE,aAAa,CAAC,CAAC;YAC1E,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE;gBACxD,GAAG;gBACH,GAAG;gBACH,KAAK,EAAU,KAAK;gBACpB,OAAO;gBAGP,IAAI;gBACJ,SAAS;gBACT,YAAY,EAAE,KAAK,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC;gBAC7C,KAAK,EAAE,CAAC;aACT,CAAC,CAAC;YAEH,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YAChE,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAEtD,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YAC/C,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YAGnB,IAAK,CAAC,CAAC,MAAsB,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE;gBACzE,OAAO;aACR;YACD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBAC1D,OAAO;aACR;YAGD,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC,MAAa,CAAC;YAChF,IAAI,OAAO,aAAa,KAAK,QAAQ,IAAI,WAAW,EAAE;gBACpD,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,OAAO;aACR;YAED,MAAM,KAAK,GAAG,KAAK,CAAC,YAAY,EAAE;gBAChC,CAAC,CAAE,KAAK,CAAC,aAAa,CAAC,SAAkC,CAAC,qBAAqB,CAAC,GAAG,EAAE,GAAG,CAAC;gBACzF,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAEnC,MAAM,SAAS,GAAG,KAAK,CAAC,wBAAwB,CAAC,GAAG,EAAE,GAAG,EAAE,aAAa,CAAC,CAAC;YAC1E,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE;gBACxD,GAAG;gBACH,GAAG;gBACH,KAAK,EAAU,KAAK;gBACpB,OAAO;gBAGP,IAAI;gBACJ,SAAS;gBACT,YAAY,EAAE,KAAK,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC;gBAC7C,KAAK,EAAE,CAAC;aACT,CAAC,CAAC;YAEH,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YAChE,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACtD,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;;YACnD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBAC1D,OAAO;aACR;YAED,CAAC,CAAC,eAAe,EAAE,CAAC;YAGpB,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,MAAa,CAAC;YACtE,IAAI,WAAW,EAAE;gBAEf,IAAI,CAAC,kBAAkB,GAAG,aAAa,CAAC;gBACxC,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;gBAC1C,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;gBAClD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBAC9C,aAAa,CAAC,SAAS,GAAG,EAAE,CAAC;gBAG7B,MAAM,QAAQ,GAAG,MAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,aAAa,CAAS,0CAAE,QAAQ,CAAC;gBAClF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACxC,MAAM,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC7B,MAAM,WAAW,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB;wBAC/D,CAAC,CAAC,eAAe,CACb,KAAK,EACL,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB,EAC7C,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,MAAI,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,IAAI,CAAA,CAAC,CAAC,CAAC,QAAQ,EAC7E,GAAG,EACH,GAAG,EACH,CAAC,CACF;wBACH,CAAC,CAAC,KAAK,CAAC;oBAEV,MAAM,IAAI,GAAG,UAAU,CAAC,QAAQ,EAAE,WAAW,CAAQ,CAAC;oBAEtD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;oBACf,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;oBACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;oBACvB,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;wBAChC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;wBACrB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;qBACzB;yBAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;wBACvC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;wBAC1B,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC;qBAClD;oBACD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;oBAChB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;oBAChB,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBACjC;gBAGD,MAAM,IAAI,GAAI,CAAC,CAAC,MAAc,CAAC,qBAAqB,EAAE,CAAC;gBACvD,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;aAChE;iBAAM,IAAI,WAAW,IAAI,IAAI,CAAC,kBAAkB,KAAK,aAAa,EAAE;gBACnE,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;gBAC1C,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;gBAClD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;aAC/C;iBAAM,IAAI,CAAC,GAAG,KAAI,MAAA,IAAI,CAAC,cAAc,0CAAE,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAA,EAAE;gBAC3E,UAAU,CAAC,GAAG,EAAE;oBAEd,IAAI,IAAI,CAAC,wBAAwB,KAAK,IAAI,EAAE;wBAC1C,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;wBAC7B,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;wBAC1C,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;wBACjD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;qBAChD;gBACH,CAAC,EAAE,GAAG,CAAC,CAAC;aACT;QACH,CAAC,CAAC,CAAC;QAGH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YACjD,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACrD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBAC1D,OAAO;aACR;YAID,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE;YACtD,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACvC,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE;YACtD,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC;QACxC,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACrD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,MAAA,IAAI,CAAC,cAAc,0CAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YACjD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YAGnB,IAAK,CAAC,CAAC,MAAsB,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE;gBACzE,OAAO;aACR;YACD,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBAC5D,OAAO;aACR;YAED,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC,MAAa,CAAC;YAChF,IAAI,OAAO,aAAa,KAAK,QAAQ,IAAI,WAAW,EAAE;gBACpD,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,OAAO;aACR;YACD,MAAM,KAAK,GAAG,KAAK,CAAC,YAAY,EAAE;gBAChC,CAAC,CAAE,KAAK,CAAC,aAAa,CAAC,SAAkC,CAAC,qBAAqB,CAAC,GAAG,EAAE,GAAG,CAAC;gBACzF,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YACnC,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,MAAM,KAAK,GAAmB,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;YAC7D,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;gBACxB,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;oBACrE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC7C,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;wBACnC,IACE,eAAe,CACb,KAAK,EACL,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB,EAC7C,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,OAAO,CAAC,CAAC,CAAC,SAAS,EAC9D,GAAG,EACH,GAAG,EACH,CAAC,CAAC,CACH;4BACD,OAAO,KAAK,CAAC,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,EAC5E;4BACA,SAAS,GAAG,IAAI,CAAC;4BACjB,OAAO;yBACR;qBACF;iBACF;YACH,CAAC,CAAC,CAAC;YAEH,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE;gBACxD,GAAG;gBACH,GAAG;gBACH,KAAK,EAAU,KAAK;gBACpB,eAAe,EAAE,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS;gBACtF,OAAO;gBACP,IAAI;gBACJ,SAAS;gBACT,YAAY,EAAE,KAAK,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC;gBAC7C,KAAK,EAAE,CAAC;aACT,CAAC,CAAC;YAEH,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YAChE,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACtD,CAAC,CAAC,eAAe,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,IAAI,WAAW;QACb,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IACD,OAAO;QACL,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,aAAa,EAAE;YAC9B,WAAW,CAAC,aAAa,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SACpD;QAED,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACxB,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IACD,UAAU,CAAC,KAAmB,EAAE,GAAW,EAAE,GAAW,EAAE,gBAAkC;;QAC1F,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QAC1C,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;QAE1C,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC/C,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC7C,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QACjD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAE/C,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE;YAGxC,WAAW,CAAC,SAAS,GAAG,EAAE,CAAC;YAE3B,IAAI,KAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAE;gBAC3C,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAO,CAAC;gBAC9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,MAAA,CAAC,IAAG,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,MAAM,CAAA,mCAAI,CAAC,EAAE,CAAC,EAAE,EAAE;oBAClD,MAAM,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;oBACjC,IAAI,WAAW,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB;wBAC7D,CAAC,CAAC,eAAe,CACb,KAAK,EACL,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB,EAC7C,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,MAAI,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,IAAI,CAAA,CAAC,CAAC,CAAC,QAAQ,EAC7E,GAAG,EACH,GAAG,EACH,CAAC,CACF;wBACH,CAAC,CAAC,KAAK,CAAC;oBAEV,IACE,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB;wBAC7C,OAAO,QAAQ,KAAK,QAAQ;wBAC5B,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC;wBAChC,QAAQ,CAAC,QAAQ,CAAC,MAAM,EACxB;wBAEA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;4BACjD,MAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;4BAEvC,IACE,eAAe,CACb,KAAK,EACL,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAqB,EAC7C,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,OAAO,MAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,IAAI,CAAA,CAAC,CAAC,CAAC,SAAS,EACjF,GAAG,EACH,GAAG,EACH,CAAC,CACF,EACD;gCACA,WAAW,GAAG,IAAI,CAAC;gCACnB,MAAM;6BACP;yBACF;qBACF;oBAED,MAAM,IAAI,GAAG,UAAU,CAAC,QAAQ,EAAE,WAAW,CAAQ,CAAC;oBAEtD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;oBACf,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;oBACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;oBACvB,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;wBAChC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;wBACrB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;qBACzB;yBAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;wBACvC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;wBAC1B,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC;wBACjD,IAAI,MAAA,QAAQ,CAAC,QAAQ,0CAAE,MAAM,EAAE;4BAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;yBACzB;qBACF;oBACD,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBAC/B;aACF;YACD,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,gBAAgB,CAAC,QAAQ,EAAE,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;YAEhH,IAAI,MAAM,EAAE;gBACV,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBAC5C,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;gBAChD,OAAO,IAAI,CAAC;aACb;SACF;aAAM;YACL,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IACD,cAAc;QACZ,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QAC1C,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;QACnC,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,aAAa,EAAE;YAC9B,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YAC9C,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;SAC7C;QACD,IAAI,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,aAAa,EAAE;YAChC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YAChD,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;SAC/C;IACH,CAAC;IACD,cAAc,CAAC,KAAmB,EAAE,GAAW,EAAE,GAAW;;QAC1D,MAAM,IAAI,GAAG,KAAK,CAAC,wBAAwB,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;QAE1D,MAAM,OAAO,GAAG,MAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,mCAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QAC7E,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QAC1C,IAAI,KAAK,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE;YAChC,OAAO,IAAI,CAAC;SACb;aAAM,IACL,MAAM,GAAG,KAAK,CAAC,mBAAmB,EAAE;YACpC,KAAK,GAAG,KAAK,CAAC,kBAAkB,EAAE;YAClC,IAAI,GAAG,KAAK,CAAC,iBAAiB,GAAG,KAAK,CAAC,uBAAuB,EAAE;YAChE,GAAG,GAAG,KAAK,CAAC,kBAAkB,GAAG,KAAK,CAAC,yBAAyB,EAAE,EAClE;YAEA,OAAO,KAAK,CAAC;SACd;QACD,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,OAAO,CAAC;QAC9C,IAAI,YAAY,GAAG,GAAG,EAAE;YACtB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,WAAW,GAAG,IAAI,EAAE;YACtB,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,WAAW,CACT,KAAmB,EACnB,GAAW,EACX,GAAW,EACX,QAAmC,EACnC,iBAA8D;;QAE9D,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QAEtC,MAAM,OAAO,GAAG,MAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,mCAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QAC7E,MAAM,EACJ,KAAK,EAAE,cAAc,EACrB,MAAM,EAAE,eAAe,EACvB,IAAI,EAAE,aAAa,EACnB,GAAG,EAAE,YAAY,EAClB,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;QACpC,IAAI,WAAW,EAAE;YACf,IAAI,WAAW,CAAC,aAAa,KAAK,OAAO,EAAE;gBACzC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;aAClC;YACD,WAAW,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;YAE/B,MAAM,QAAQ,GAAG,cAAc,GAAG,GAAG,CAAC;YACtC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,QAAQ,IAAI,CAAC;YAE7C,MAAM,gBAAgB,GAAG,WAAW,CAAC,WAAW,CAAC;YACjD,MAAM,iBAAiB,GAAG,WAAW,CAAC,YAAY,CAAC;YACnD,IAAI,eAAe,CAAC;YACpB,IAAI,cAAc,CAAC;YACnB,IAAI,QAAQ,EAAE;gBACZ,eAAe,GAAG,QAAQ,CAAC,CAAC,CAAC;gBAC7B,cAAc,GAAG,QAAQ,CAAC,CAAC,CAAC;aAC7B;iBAAM,IAAI,iBAAiB,EAAE;gBAC5B,eAAe,GAAG,iBAAiB,CAAC,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC;gBAClE,cAAc,GAAG,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC;aAChD;YAGD,MAAM,IAAI,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;YAG7C,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,WAAW,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC;YAKlD,IAAI,cAAc,GAAG,MAAM,GAAG,iBAAiB,GAAG,eAAe,EAAE;gBACjE,cAAc,GAAG,CAAC,eAAe,GAAG,iBAAiB,CAAC,GAAG,MAAM,CAAC;aAEjE;YAED,IAAI,cAAc,GAAG,CAAC,EAAE;gBACtB,cAAc,GAAG,cAAc,GAAG,CAAC,CAAC;aACrC;YAED,IAAI,QAAQ,GAAG,CAAC,CAAC;YACjB,IAAI,SAAS,GAAG,CAAC,CAAC;YAClB,IAAI,KAAK,CAAC,UAAU,EAAE,KAAK,OAAO,EAAE;gBAClC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,qBAAqB,EAAE,CAAC;gBACjE,QAAQ,GAAG,GAAG,GAAG,YAAY,CAAC;gBAC9B,SAAS,GAAG,IAAI,GAAG,aAAa,CAAC;aAClC;YACD,WAAW,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,cAAc,GAAG,QAAQ,IAAI,CAAC;YAGzD,IAAI,eAAe,GAAG,CAAC,EAAE;gBACvB,eAAe,GAAG,CAAC,CAAC;aACrB;iBAAM,IAAI,eAAe,GAAG,MAAM,GAAG,gBAAgB,GAAG,cAAc,EAAE;gBACvE,eAAe,GAAG,CAAC,cAAc,GAAG,gBAAgB,CAAC,GAAG,MAAM,CAAC;aAChE;YACD,WAAW,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,eAAe,GAAG,SAAS,IAAI,CAAC;YAE5D,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IACD,kBAAkB,CAAC,KAAmB,EAAE,GAAW,EAAE,GAAW,EAAE,CAAS,EAAE,CAAS;;QACpF,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QAC1C,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QAEtC,MAAM,OAAO,GAAG,MAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,mCAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QAC7E,MAAM,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,EAAE,YAAY,EAAE,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAC1G,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,WAAW,CAAC,qBAAqB,EAAE,CAAC;QAE1F,IAAI,aAAa,EAAE;YAIjB,IAAI,aAAa,CAAC,aAAa,KAAK,OAAO,EAAE;gBAC3C,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;aACpC;YAED,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;YAEjC,MAAM,QAAQ,GAAG,cAAc,GAAG,GAAG,CAAC;YACtC,aAAa,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,QAAQ,IAAI,CAAC;YAE/C,MAAM,kBAAkB,GAAG,aAAa,CAAC,WAAW,CAAC;YAGrD,MAAM,gBAAgB,GAAG,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC;YAC9C,MAAM,iBAAiB,GAAG,CAAC,GAAG,aAAa,CAAC;YAE5C,aAAa,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,gBAAgB,IAAI,CAAC;YAClD,IAAI,SAAS,GAAG,iBAAiB,CAAC;YAGlC,IAAI,SAAS,GAAG,kBAAkB,GAAG,cAAc,EAAE;gBACnD,SAAS,GAAG,SAAS,GAAG,kBAAkB,GAAG,SAAS,CAAC;aACxD;iBAAM;gBACL,SAAS,IAAI,CAAC,CAAC;aAChB;YACD,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,SAAS,IAAI,CAAC;YAE5C,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,kBAAkB,CAAC,CAAS,EAAE,CAAS;QACrC,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QAEtC,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,WAAW,CAAC,qBAAqB,EAAE,CAAC;QAC9G,IAAI,CAAC,GAAG,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,QAAQ,GAAG,SAAS,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,GAAG,UAAU,GAAG,CAAC,EAAE;YACvG,OAAO,IAAI,CAAC;SACb;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QAC1C,IAAI,aAAa,EAAE;YACjB,MAAM,EACJ,CAAC,EAAE,UAAU,EACb,CAAC,EAAE,SAAS,EACZ,KAAK,EAAE,WAAW,EAClB,MAAM,EAAE,YAAY,EACrB,GAAG,aAAa,CAAC,qBAAqB,EAAE,CAAC;YAC1C,IACE,CAAC,GAAG,UAAU,GAAG,CAAC;gBAClB,CAAC,GAAG,UAAU,GAAG,WAAW,GAAG,CAAC;gBAChC,CAAC,GAAG,SAAS,GAAG,CAAC;gBACjB,CAAC,GAAG,SAAS,GAAG,YAAY,GAAG,CAAC,EAChC;gBACA,OAAO,IAAI,CAAC;aACb;SACF;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF;AAED,SAAS,UAAU,CAAC,IAAkB,EAAE,WAAoB;;IAC1D,MAAM,aAAa,GAAG,aAAa,CAAC,KAAK,EAAE;QACzC,cAAc;QACd,WAAW,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,gBAAgB;KAClD,CAAmB,CAAC;IAGrB,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;QAC7C,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;KACtD;IAED,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAI,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACjC;SAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QACnC,MAAM,IAAI,GAAG,MAAA,IAAI,CAAC,IAAI,mCAAI,MAAM,CAAC;QACjC,IAAI,IAAI,KAAK,OAAO,EAAE;YACpB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAC9C,OAAO,aAAa,CAAC;SACtB;QACD,IAAI,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,0CAAE,GAAG,EAAE;YACnB,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBAC9B,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;gBAC1B,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;oBACnB,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC;iBACvD;qBAAM;oBACL,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;iBAC5B;gBACD,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBACpB,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC;iBACzD;qBAAM;oBACL,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;iBAC7B;gBACD,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBAC1B,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aAClC;iBAAM;gBACL,MAAM,GAAG,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC,CAAC;gBACvE,GAAG,CAAC,SAAS;oBACX,WAAW,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACpG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAK,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAgB,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACrG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAK,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAgB,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACxG,aAAa,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;aAChC;SACF;QACD,MAAM,IAAI,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;QAC3B,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAChC,IAAI,IAAI,KAAK,OAAO,EAAE;YACpB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;SAClE;aAAM,IAAI,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,MAAM,EAAE;YACjC,MAAM,KAAK,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,eAAe,CAAC,CAAC,CAAC;YAC7F,KAAK,CAAC,SAAS,GAAG,WAAW;gBAC3B,CAAC,CAAC,8SAA8S;gBAChT,CAAC,CAAC,8SAA8S,CAAC;YACnT,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAClC;KACF;IACD,OAAO,aAAa,CAAC;AACvB,CAAC","file":"MenuElement.js","sourcesContent":["import { EventHandler } from '../../../../event/EventHandler';\nimport type {\n  DropDownMenuHighlightInfo,\n  IDimensionInfo,\n  MenuInstanceInfo,\n  MenuListItem,\n  Placement,\n  RectProps\n} from '../../../../ts-types';\nimport { createElement } from '../../../../tools/dom';\nimport { importStyle } from './MenuElementStyle';\nimport { TABLE_EVENT_TYPE } from '../../../../core/TABLE_EVENT_TYPE';\nimport { cellInRange } from '../../../../tools/helper';\nimport { isValid } from '@visactor/vutils';\nimport type { PivotHeaderLayoutMap } from '../../../../layout/pivot-header-layout';\nimport { regUrl } from '../../../../tools/global';\nimport type { BaseTableAPI } from '../../../../ts-types/base-table';\nimportStyle();\n\nconst CLASSNAME = 'vtable__menu-element';\nconst ITEM_CLASSNAME = `${CLASSNAME}__item`;\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst NORAML_CLASSNAME = `${CLASSNAME}--normal`;\nconst SELECT_CLASSNAME = `${CLASSNAME}--select`;\nconst ICOM_CLASSNAME = `${CLASSNAME}__icon`;\nconst SPLIT_CLASSNAME = `${CLASSNAME}__split`;\nconst TITLE_CLASSNAME = `${CLASSNAME}__title`;\nconst ARROW_CLASSNAME = `${CLASSNAME}__arrow`;\nconst NOEVENT_CLASSNAME = `${CLASSNAME}__no-event`;\nconst ITEMTEXT_CLASSNAME = `${CLASSNAME}__item-text`;\nconst ITEM_DISABLED_CLASSNAME = `${CLASSNAME}__item-disabled`;\n\nfunction createMenuDomElement(): HTMLElement {\n  const rootElement = createElement('div', [CLASSNAME, HIDDEN_CLASSNAME]);\n  return rootElement;\n}\n\nexport function isMenuHighlight(\n  _table: BaseTableAPI,\n  cells: DropDownMenuHighlightInfo[],\n  menuKeyCurrent: string,\n  colCurrent: number,\n  rowCurrent: number,\n  index: number\n) {\n  const cellRange = _table.getCellRange(colCurrent, rowCurrent);\n  for (let i = 0; i < cells.length; i++) {\n    const highlight = cells[i];\n    let { col, row } = highlight;\n    const { field, menuKey } = highlight;\n\n    if (typeof col !== 'number' || typeof row !== 'number') {\n      if (_table.isPivotTable() && typeof Array.isArray(field)) {\n        const cellAddress = (_table.internalProps.layoutMap as PivotHeaderLayoutMap).getPivotCellAdress(\n          field as IDimensionInfo[]\n        );\n        if (!cellAddress) {\n          continue;\n        }\n        col = cellAddress.col;\n        row = cellAddress.row;\n      } else {\n        const cellAddress = _table.internalProps.layoutMap.getHeaderCellAddressByField(field as string);\n        if (!cellAddress) {\n          continue;\n        }\n        col = cellAddress.col;\n        row = cellAddress.row;\n      }\n    }\n\n    if (isValid(col) && isValid(row) && cellInRange(cellRange, col, row)) {\n      // dropDownIndex在多级菜单中判断会有问题\n      // if (typeof dropDownIndex === 'number' && dropDownIndex === index) {\n      //   return true;\n      // }\n      if (menuKeyCurrent === menuKey) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nexport class MenuElement {\n  private _handler: EventHandler;\n  private _rootElement?: HTMLElement;\n  private _secondElement?: HTMLElement;\n  private _menuInstanceInfo?: MenuInstanceInfo;\n  private _showChildrenIndex: number;\n  private _mouseEnterSecondElement: boolean;\n  constructor(table: BaseTableAPI) {\n    this._handler = new EventHandler();\n    this._rootElement = createMenuDomElement();\n    this._secondElement = createMenuDomElement();\n    (this._secondElement as any).sub = true;\n    this._showChildrenIndex = -1;\n\n    // 鼠标在菜单上滚动阻止冒泡\n    this._rootElement.addEventListener('wheel', e => {\n      e.stopPropagation();\n    });\n    // 绑定交互事件\n    this._rootElement?.addEventListener('mousedown', e => {\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    this._rootElement?.addEventListener('contextmenu', e => {\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    // 在移动端_rootElement的click事件在表格的touchend事件后触发，\n    // 表格的touchend事件会引发selecter.start，从而清空菜单\n    // 这样就会导致_rootElement的click事件无法触发\n    // 因此菜_rootElement监听touchend事件，在表格的touchend事件前触发\n    // 执行菜单点击功能\n    this._rootElement?.addEventListener('touchend', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      // disabled菜单项，禁用菜单点击\n      if ((e.target as HTMLElement).classList.contains(ITEM_DISABLED_CLASSNAME)) {\n        return;\n      }\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // console.log('menu mousedown', e);\n      // 触发菜单条目点击事件\n      const { col, row, dropDownIndex, menuKey, text, hasChildren } = e.target as any;\n      if (typeof dropDownIndex !== 'number' || hasChildren) {\n        e.stopPropagation();\n        return;\n      }\n      // const field = table.getHeaderField(col, row);\n      const field = table.isPivotTable()\n        ? (table.internalProps.layoutMap as PivotHeaderLayoutMap).getPivotDimensionInfo(col, row)\n        : table.getHeaderField(col, row);\n\n      const highlight = table._dropDownMenuIsHighlight(col, row, dropDownIndex);\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK, {\n        col,\n        row,\n        field: <string>field,\n        menuKey,\n        // fieldKey,\n        // dropDownIndex,\n        text,\n        highlight,\n        cellLocation: table.getCellLocation(col, row),\n        event: e\n      });\n\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR, null); // 清除菜单\n      table.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU, null); // 清除菜单\n      // table.invalidateCell(col, row); // 更新状态图表\n      e.stopPropagation();\n    });\n    this._rootElement?.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      // disabled菜单项，禁用菜单点击\n      if ((e.target as HTMLElement).classList.contains(ITEM_DISABLED_CLASSNAME)) {\n        return;\n      }\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // console.log('menu mousedown', e);\n      // 触发菜单条目点击事件\n      const { col, row, dropDownIndex, menuKey, text, hasChildren } = e.target as any;\n      if (typeof dropDownIndex !== 'number' || hasChildren) {\n        e.stopPropagation();\n        return;\n      }\n      // const field = table.getHeaderField(col, row);\n      const field = table.isPivotTable()\n        ? (table.internalProps.layoutMap as PivotHeaderLayoutMap).getPivotDimensionInfo(col, row)\n        : table.getHeaderField(col, row);\n\n      const highlight = table._dropDownMenuIsHighlight(col, row, dropDownIndex);\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK, {\n        col,\n        row,\n        field: <string>field,\n        menuKey,\n        // fieldKey,\n        // dropDownIndex,\n        text,\n        highlight,\n        cellLocation: table.getCellLocation(col, row),\n        event: e\n      });\n\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR, null); // 清除菜单\n      table.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU, null); // 清除菜单\n      e.stopPropagation();\n    });\n    this._rootElement?.addEventListener('mousemove', e => {\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n\n      e.stopPropagation();\n\n      // 处理二级菜单\n      const { hasChildren, dropDownIndex, col, row, sub } = e.target as any;\n      if (hasChildren) {\n        // 更新二级菜单\n        this._showChildrenIndex = dropDownIndex;\n        const secondElement = this._secondElement;\n        secondElement?.classList.remove(HIDDEN_CLASSNAME);\n        secondElement?.classList.add(SHOWN_CLASSNAME);\n        secondElement.innerHTML = '';\n\n        // 添加item\n        const children = (this._menuInstanceInfo.content[dropDownIndex] as any)?.children;\n        for (let i = 0; i < children.length; i++) {\n          const menuItem = children[i];\n          const isHighlight = table.stateManager.menu.dropDownMenuHighlight\n            ? isMenuHighlight(\n                table,\n                table.stateManager.menu.dropDownMenuHighlight,\n                typeof menuItem === 'object' ? menuItem?.menuKey || menuItem?.text : menuItem,\n                col,\n                row,\n                i\n              )\n            : false;\n\n          const item = createItem(menuItem, isHighlight) as any;\n          // dom绑定相关属性\n          item.col = col;\n          item.row = row;\n          item.dropDownIndex = i;\n          if (typeof menuItem === 'string') {\n            item.text = menuItem;\n            item.menuKey = menuItem;\n          } else if (typeof menuItem === 'object') {\n            item.text = menuItem.text;\n            item.menuKey = menuItem.menuKey || menuItem.text;\n          }\n          item.sub = true;\n          item.sub = true;\n          secondElement.appendChild(item);\n        }\n\n        // 对齐菜单位置\n        const rect = (e.target as any).getBoundingClientRect();\n        this._bindSecondElement(table, col, row, rect.right, rect.top);\n      } else if (hasChildren && this._showChildrenIndex === dropDownIndex) {\n        const secondElement = this._secondElement;\n        secondElement?.classList.remove(HIDDEN_CLASSNAME);\n        secondElement?.classList.add(SHOWN_CLASSNAME);\n      } else if (!sub && this._secondElement?.classList.contains(SHOWN_CLASSNAME)) {\n        setTimeout(() => {\n          //因为增加了主菜单和子菜单的间距 鼠标在移入子菜单的过程中 可能引起子菜单消失 这里增加延时处理\n          if (this._mouseEnterSecondElement !== true) {\n            this._showChildrenIndex = -1;\n            const secondElement = this._secondElement;\n            secondElement?.classList.remove(SHOWN_CLASSNAME);\n            secondElement?.classList.add(HIDDEN_CLASSNAME);\n          }\n        }, 300);\n      }\n    });\n\n    // 鼠标在菜单上滚动阻止冒泡\n    this._secondElement?.addEventListener('wheel', e => {\n      e.stopPropagation();\n    });\n    this._secondElement?.addEventListener('mousemove', e => {\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // console.log('menu mousemove', e);\n      // table.hoverIcon = undefined;\n\n      e.stopPropagation();\n    });\n    this._secondElement?.addEventListener('mouseenter', e => {\n      this._mouseEnterSecondElement = true;\n    });\n    this._secondElement?.addEventListener('mouseleave', e => {\n      this._mouseEnterSecondElement = false;\n    });\n    this._secondElement?.addEventListener('mousedown', e => {\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    this._secondElement?.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n\n      // disabled菜单项，禁用菜单点击\n      if ((e.target as HTMLElement).classList.contains(ITEM_DISABLED_CLASSNAME)) {\n        return;\n      }\n      if (this._secondElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // 触发菜单条目点击事件\n      const { col, row, dropDownIndex, menuKey, text, hasChildren } = e.target as any;\n      if (typeof dropDownIndex !== 'number' || hasChildren) {\n        e.stopPropagation();\n        return;\n      }\n      const field = table.isPivotTable()\n        ? (table.internalProps.layoutMap as PivotHeaderLayoutMap).getPivotDimensionInfo(col, row)\n        : table.getHeaderField(col, row);\n      let highlight = false;\n      const menus = <MenuListItem[]>this._menuInstanceInfo.content;\n      menus.forEach((menu, i) => {\n        if (typeof menu === 'object' && menu.children && menu.children.length) {\n          for (let j = 0; j < menu.children.length; j++) {\n            const childItem = menu.children[j];\n            if (\n              isMenuHighlight(\n                table,\n                table.stateManager.menu.dropDownMenuHighlight,\n                typeof childItem === 'object' ? childItem?.menuKey : childItem,\n                col,\n                row,\n                -1\n              ) &&\n              menuKey === (typeof childItem === 'object' ? childItem?.menuKey : childItem)\n            ) {\n              highlight = true;\n              return;\n            }\n          }\n        }\n      });\n\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK, {\n        col,\n        row,\n        field: <string>field,\n        cellHeaderPaths: table.isPivotTable() ? table.getCellHeaderPaths(col, row) : undefined,\n        menuKey,\n        text,\n        highlight,\n        cellLocation: table.getCellLocation(col, row),\n        event: e\n      });\n\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR, null); // 清除菜单\n      table.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU, null); // 清除菜单\n      e.stopPropagation();\n    });\n  }\n  get rootElement() {\n    return this._rootElement;\n  }\n  release(): void {\n    this.unbindFromCell();\n\n    const rootElement = this._rootElement;\n    if (rootElement?.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.release();\n    delete this._rootElement;\n  }\n  bindToCell(table: BaseTableAPI, col: number, row: number, menuInstanceInfo: MenuInstanceInfo): boolean {\n    const rootElement = this._rootElement;\n    const secondElement = this._secondElement;\n    this._menuInstanceInfo = menuInstanceInfo;\n\n    rootElement?.classList.remove(SHOWN_CLASSNAME);\n    rootElement?.classList.add(HIDDEN_CLASSNAME);\n    secondElement?.classList.remove(SHOWN_CLASSNAME);\n    secondElement?.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._canBindToCell(table, col, row)) {\n      // messageElement && (messageElement.textContent = 'aaa');\n      // 生成下拉菜单dom\n      rootElement.innerHTML = '';\n\n      if (Array.isArray(menuInstanceInfo.content)) {\n        const menuListItem = menuInstanceInfo.content;\n        for (let i = 0; i < menuListItem?.length ?? 0; i++) {\n          const menuItem = menuListItem[i];\n          let isHighlight = table.stateManager.menu.dropDownMenuHighlight\n            ? isMenuHighlight(\n                table,\n                table.stateManager.menu.dropDownMenuHighlight,\n                typeof menuItem === 'object' ? menuItem?.menuKey || menuItem?.text : menuItem,\n                col,\n                row,\n                i\n              )\n            : false;\n\n          if (\n            table.stateManager.menu.dropDownMenuHighlight &&\n            typeof menuItem === 'object' &&\n            Array.isArray(menuItem.children) &&\n            menuItem.children.length\n          ) {\n            // 判断子项目是否高亮\n            for (let i = 0; i < menuItem.children.length; i++) {\n              const childItem = menuItem.children[i];\n              // eslint-disable-next-line max-depth\n              if (\n                isMenuHighlight(\n                  table,\n                  table.stateManager.menu.dropDownMenuHighlight,\n                  typeof childItem === 'object' ? childItem?.menuKey || childItem?.text : childItem,\n                  col,\n                  row,\n                  i\n                )\n              ) {\n                isHighlight = true;\n                break;\n              }\n            }\n          }\n\n          const item = createItem(menuItem, isHighlight) as any;\n          // dom绑定相关属性\n          item.col = col;\n          item.row = row;\n          item.dropDownIndex = i;\n          if (typeof menuItem === 'string') {\n            item.text = menuItem;\n            item.menuKey = menuItem;\n          } else if (typeof menuItem === 'object') {\n            item.text = menuItem.text;\n            item.menuKey = menuItem.menuKey || menuItem.text;\n            if (menuItem.children?.length) {\n              item.hasChildren = true;\n            }\n          }\n          rootElement.appendChild(item);\n        }\n      }\n      const binded = this._bindToCell(table, col, row, menuInstanceInfo.position, menuInstanceInfo.referencePosition);\n\n      if (binded) {\n        rootElement?.classList.add(SHOWN_CLASSNAME);\n        rootElement?.classList.remove(HIDDEN_CLASSNAME);\n        return true;\n      }\n    } else {\n      this.unbindFromCell();\n    }\n    return false;\n  }\n  unbindFromCell(): void {\n    const rootElement = this._rootElement;\n    const secondElement = this._secondElement;\n    this._menuInstanceInfo = undefined;\n    if (rootElement?.parentElement) {\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n    if (secondElement?.parentElement) {\n      secondElement.classList.remove(SHOWN_CLASSNAME);\n      secondElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n  _canBindToCell(table: BaseTableAPI, col: number, row: number): boolean {\n    const rect = table.getCellRangeRelativeRect({ col, row });\n    // const element = table.getElement();\n    const element = table.internalProps.menu.parentElement ?? table.getElement();\n    const { top, bottom, left, right } = rect;\n    if (table.isFrozenCell(col, row)) {\n      return true;\n    } else if (\n      bottom < table.getFrozenRowsHeight() ||\n      right < table.getFrozenColsWidth() ||\n      left > table.tableNoFrameWidth - table.getRightFrozenColsWidth() ||\n      top > table.tableNoFrameHeight - table.getBottomFrozenRowsHeight()\n    ) {\n      // 范围外\n      return false;\n    }\n    const { offsetHeight, offsetWidth } = element;\n    if (offsetHeight < top) {\n      return false;\n    }\n    if (offsetWidth < left) {\n      return false;\n    }\n    return true;\n  }\n  _bindToCell(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    position?: { x: number; y: number },\n    referencePosition?: { rect: RectProps; placement?: Placement }\n  ): boolean {\n    const rootElement = this._rootElement;\n    // const element = table.getElement();\n    const element = table.internalProps.menu.parentElement ?? table.getElement();\n    const {\n      width: containerWidth,\n      height: containerHeight,\n      left: containerLeft,\n      top: containerTop\n    } = element.getBoundingClientRect();\n    if (rootElement) {\n      if (rootElement.parentElement !== element) {\n        element.appendChild(rootElement); // 之前在做dom边缘躲避的时候放到了table.getParentElement()上，但发现不是相对定位导致位置错位\n      }\n      rootElement.style.left = `0px`;\n      //设置最宽尺寸\n      const maxWidth = containerWidth * 0.8;\n      rootElement.style.maxWidth = `${maxWidth}px`;\n      //计算弹出框的宽度\n      const rootElementWidth = rootElement.offsetWidth;\n      const rootElementHeight = rootElement.offsetHeight;\n      let rootElementLeft;\n      let rootElementTop;\n      if (position) {\n        rootElementLeft = position.x;\n        rootElementTop = position.y;\n      } else if (referencePosition) {\n        rootElementLeft = referencePosition.rect.right - rootElementWidth;\n        rootElementTop = referencePosition.rect.bottom;\n      }\n\n      // 获取元素的边界矩形\n      const rect = element.getBoundingClientRect();\n\n      // 计算缩放比例\n      const scaleX = rect.width / element.offsetWidth;\n      const scaleY = rect.height / element.offsetHeight;\n\n      //  rootElementLeft = position.x - rootElementWidth;\n      // let leftStyle = rootElementLeft;\n      // 检测下方能否容纳，不能容纳向上偏移\n      if (rootElementTop * scaleY + rootElementHeight > containerHeight) {\n        rootElementTop = (containerHeight - rootElementHeight) / scaleY;\n        // rootElementLeft += rootElementWidth - 2;\n      }\n      // 偏移后上方超出canvas范围，居中显示\n      if (rootElementTop < 0) {\n        rootElementTop = rootElementTop / 2;\n      }\n\n      let deltaTop = 0;\n      let deltaLeft = 0;\n      if (table.getElement() !== element) {\n        const { left, top } = table.getElement().getBoundingClientRect();\n        deltaTop = top - containerTop;\n        deltaLeft = left - containerLeft;\n      }\n      rootElement.style.top = `${rootElementTop + deltaTop}px`;\n\n      // 判断如果超出左右范围则靠边显示\n      if (rootElementLeft < 0) {\n        rootElementLeft = 0;\n      } else if (rootElementLeft * scaleX + rootElementWidth > containerWidth) {\n        rootElementLeft = (containerWidth - rootElementWidth) / scaleX;\n      }\n      rootElement.style.left = `${rootElementLeft + deltaLeft}px`;\n\n      return true;\n    }\n    return false;\n  }\n  _bindSecondElement(table: BaseTableAPI, col: number, row: number, x: number, y: number): boolean {\n    const secondElement = this._secondElement;\n    const rootElement = this._rootElement;\n    // const element = table.getElement();\n    const element = table.internalProps.menu.parentElement ?? table.getElement();\n    const { width: containerWidth, left: containerLeft, top: containerTop } = element.getBoundingClientRect();\n    const { x: rootLeft, y: rootTop, width: rootWidth } = rootElement.getBoundingClientRect();\n\n    if (secondElement) {\n      // if (secondElement.parentElement !== rootElement) {\n      //   rootElement.appendChild(secondElement);\n      // }\n      if (secondElement.parentElement !== element) {\n        element.appendChild(secondElement);\n      }\n\n      secondElement.style.left = `0px`;\n      //设置最宽尺寸\n      const maxWidth = containerWidth * 0.8;\n      secondElement.style.maxWidth = `${maxWidth}px`;\n      //计算弹出框的宽度\n      const secondElementWidth = secondElement.clientWidth;\n      // const secondElementHeight = secondElement.clientHeight;\n\n      const secondElementTop = y - 4 - containerTop;\n      const secondElementLeft = x - containerLeft;\n\n      secondElement.style.top = `${secondElementTop}px`;\n      let leftStyle = secondElementLeft;\n\n      // 判断如果超出右范围则靠左边显示\n      if (leftStyle + secondElementWidth > containerWidth) {\n        leftStyle = leftStyle - secondElementWidth - rootWidth;\n      } else {\n        leftStyle += 4; //位置调整 需要和主菜单之间有4px的间隔\n      }\n      secondElement.style.left = `${leftStyle}px`;\n\n      return true;\n    }\n    return false;\n  }\n  /** 鼠标坐标位置 是否位于下拉菜单内 */\n  pointInMenuElement(x: number, y: number): boolean {\n    const rootElement = this._rootElement;\n\n    const { x: rootLeft, y: rootTop, width: rootWidth, height: rootHeight } = rootElement.getBoundingClientRect();\n    if (x > rootLeft - 5 && x < rootLeft + rootWidth + 5 && y > rootTop - 5 && y < rootTop + rootHeight + 5) {\n      return true;\n    }\n    const secondElement = this._secondElement;\n    if (secondElement) {\n      const {\n        x: secondLeft,\n        y: secondTop,\n        width: secondWidth,\n        height: secondHeight\n      } = secondElement.getBoundingClientRect();\n      if (\n        x > secondLeft - 5 &&\n        x < secondLeft + secondWidth + 5 &&\n        y > secondTop - 5 &&\n        y < secondTop + secondHeight + 5\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nfunction createItem(info: MenuListItem, isHighlight: boolean): HTMLDivElement {\n  const itemContainer = createElement('div', [\n    ITEM_CLASSNAME,\n    isHighlight ? SELECT_CLASSNAME : NORAML_CLASSNAME\n  ]) as HTMLDivElement;\n\n  // 添加disabled样式\n  if (typeof info === 'object' && info.disabled) {\n    itemContainer.classList.add(ITEM_DISABLED_CLASSNAME);\n  }\n\n  if (typeof info === 'string') {\n    const item = createElement('span', [CONTENT_CLASSNAME, NOEVENT_CLASSNAME, ITEMTEXT_CLASSNAME]);\n    item.innerHTML = info;\n    itemContainer.appendChild(item);\n  } else if (typeof info === 'object') {\n    const type = info.type ?? 'item';\n    if (type === 'split') {\n      itemContainer?.classList.add(SPLIT_CLASSNAME);\n      return itemContainer;\n    }\n    if (info?.icon?.svg) {\n      if (regUrl.test(info.icon.svg)) {\n        const image = new Image();\n        if (info.icon.width) {\n          image.style.width = info.icon.width.toString() + 'px';\n        } else {\n          image.style.width = '16px';\n        }\n        if (info.icon.height) {\n          image.style.height = info.icon.height.toString() + 'px';\n        } else {\n          image.style.height = '16px';\n        }\n        image.src = info.icon.svg;\n        itemContainer.appendChild(image);\n      } else {\n        const svg = createElement('span', [ICOM_CLASSNAME, NOEVENT_CLASSNAME]);\n        svg.innerHTML =\n          isHighlight && info.selectedIcon && info.selectedIcon.svg ? info.selectedIcon.svg : info.icon.svg;\n        info.icon.width && (svg.children[0] as SVGElement).setAttribute('width', info.icon.width.toString());\n        info.icon.height && (svg.children[0] as SVGElement).setAttribute('height', info.icon.height.toString());\n        itemContainer.appendChild(svg);\n      }\n    }\n    const item = createElement('span', [CONTENT_CLASSNAME, NOEVENT_CLASSNAME, ITEMTEXT_CLASSNAME]);\n    item.innerHTML = info.text;\n    itemContainer.appendChild(item);\n    if (type === 'title') {\n      itemContainer?.classList.add(NOEVENT_CLASSNAME, TITLE_CLASSNAME);\n    } else if (info?.children?.length) {\n      const arrow = createElement('span', [CONTENT_CLASSNAME, NOEVENT_CLASSNAME, ARROW_CLASSNAME]);\n      arrow.innerHTML = isHighlight\n        ? '<svg width=\"8\" height=\"12\" viewBox=\"0 0 10 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"vertical-align: baseline\"><path d=\"M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z\" fill=\"#2E68CF\" fill-opacity=\"0.65\"></path></svg>'\n        : '<svg width=\"8\" height=\"12\" viewBox=\"0 0 10 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"vertical-align: baseline\"><path d=\"M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z\" fill=\"#141414\" fill-opacity=\"0.65\"></path></svg>';\n      itemContainer.appendChild(arrow);\n    }\n  }\n  return itemContainer;\n}\n"]}