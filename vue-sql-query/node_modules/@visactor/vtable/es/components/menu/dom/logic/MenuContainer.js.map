{"version":3,"sources":["../src/components/menu/dom/logic/MenuContainer.ts"],"names":[],"mappings":"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","file":"MenuContainer.js","sourcesContent":["import { EventHandler } from '../../../../event/EventHandler';\nimport type { MenuInstanceInfo, Placement, RectProps } from '../../../../ts-types';\nimport { createElement } from '../../../../tools/dom';\nimport { TABLE_EVENT_TYPE } from '../../../../core/TABLE_EVENT_TYPE';\nimport type { PivotHeaderLayoutMap } from '../../../../layout/pivot-header-layout';\nimport type { BaseTableAPI } from '../../../../ts-types/base-table';\n\nconst CLASSNAME = 'vtable__menu-element';\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createMenuDomElement(): HTMLElement {\n  const rootElement = createElement('div', [CLASSNAME, HIDDEN_CLASSNAME]);\n  return rootElement;\n}\n\nexport class MenuContainer {\n  private _handler: EventHandler;\n  private _rootElement?: HTMLElement;\n  private _menuInstanceInfo?: MenuInstanceInfo;\n  constructor(table: BaseTableAPI) {\n    this._handler = new EventHandler();\n    this._rootElement = createMenuDomElement();\n\n    // 鼠标在菜单上滚动阻止冒泡\n    this._rootElement.addEventListener('wheel', e => {\n      e.stopPropagation();\n    });\n    // 绑定交互事件\n    this._rootElement?.addEventListener('mousedown', e => {\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    this._rootElement?.addEventListener('click', e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // console.log('menu mousedown', e);\n      // 触发菜单条目点击事件\n      const { col, row, dropDownIndex, menuKey, text, hasChildren } = e.target as any;\n      if (typeof dropDownIndex !== 'number' || hasChildren) {\n        e.stopPropagation();\n        return;\n      }\n      // const field = table.getHeaderField(col, row);\n      const field = table.isPivotTable()\n        ? (table.internalProps.layoutMap as PivotHeaderLayoutMap).getPivotDimensionInfo(col, row)\n        : table.getHeaderField(col, row);\n\n      const highlight = table._dropDownMenuIsHighlight(col, row, dropDownIndex);\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK, {\n        col,\n        row,\n        field: <string>field,\n        menuKey,\n        // fieldKey,\n        // dropDownIndex,\n        text,\n        highlight,\n        cellLocation: table.getCellLocation(col, row),\n        event: e\n      });\n\n      table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR, null); // 清除菜单\n      table.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU, null); // 清除菜单\n      // table.invalidateCell(col, row); // 更新状态图表\n      e.stopPropagation();\n    });\n    this._rootElement?.addEventListener('mousemove', e => {\n      if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) {\n        return;\n      }\n      // console.log('menu mousemove', e);\n      // table.hoverIcon = undefined;\n\n      e.stopPropagation();\n    });\n    // this._rootElement?.addEventListener('mouseenter', () => {\n    //   if (this._rootElement.classList.contains(HIDDEN_CLASSNAME)) return;\n    //   if (!table.hoverIcon) return;\n    //   // console.log('menu mousemove', e);\n    //   table.showHoverIcon = table.hoverIcon;\n    //   table.hoverIcon = undefined; // 避免在hover icon后不能交互表格区域\n    //   table.invalidateCell(table.showHoverIcon.col, table.showHoverIcon.row);\n    //   // console.log('showHoverIcon', table.showHoverIcon);\n    // });\n    // this._rootElement?.addEventListener('blur', () => {\n    //   // table.fireListeners(LG_EVENT_TYPE.DROPDOWN_MENU_CLEAR, null); // 清除菜单\n    //   table.showHoverIcon = undefined;\n    // });\n  }\n  get rootElement() {\n    return this._rootElement;\n  }\n  release(): void {\n    this.unbindFromCell();\n\n    const rootElement = this._rootElement;\n    if (rootElement?.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.release();\n    delete this._rootElement;\n    // delete this._messageElement;\n  }\n  bindToCell(table: BaseTableAPI, col: number, row: number, menuInstanceInfo: MenuInstanceInfo): boolean {\n    const rootElement = this._rootElement;\n    this._menuInstanceInfo = menuInstanceInfo;\n    // const messageElement = this._messageElement;\n\n    rootElement?.classList.remove(SHOWN_CLASSNAME);\n    rootElement?.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._canBindToCell(table, col, row)) {\n      rootElement.innerHTML = '';\n      rootElement.appendChild(<HTMLElement>menuInstanceInfo.content);\n\n      const binded = this._bindCell(table, col, row, menuInstanceInfo.position, menuInstanceInfo.referencePosition);\n\n      if (binded) {\n        rootElement?.classList.add(SHOWN_CLASSNAME);\n        rootElement?.classList.remove(HIDDEN_CLASSNAME);\n        return true;\n      }\n    } else {\n      this.unbindFromCell();\n    }\n    return false;\n  }\n  unbindFromCell(): void {\n    const rootElement = this._rootElement;\n    this._menuInstanceInfo = undefined;\n    if (rootElement?.parentElement) {\n      // rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n  _canBindToCell(table: BaseTableAPI, col: number, row: number): boolean {\n    const rect = table.getCellRangeRelativeRect({ col, row });\n    // const element = table.getElement();\n    const element = table.internalProps.menu.parentElement ?? table.getElement();\n    const { top, bottom, left, right } = rect;\n    if (table.isFrozenCell(col, row)) {\n      return true;\n    } else if (\n      bottom < table.getFrozenRowsHeight() ||\n      right < table.getFrozenColsWidth() ||\n      left > table.tableNoFrameWidth - table.getRightFrozenColsWidth() ||\n      top > table.tableNoFrameHeight - table.getBottomFrozenRowsHeight()\n    ) {\n      // 范围外\n      return false;\n    }\n\n    const { offsetHeight, offsetWidth } = element;\n    if (offsetHeight < top) {\n      return false;\n    }\n    if (offsetWidth < left) {\n      return false;\n    }\n    return true;\n  }\n  _bindCell(\n    table: BaseTableAPI,\n    col: number,\n    row: number,\n    position: { x: number; y: number },\n    referencePosition: { rect: RectProps; placement?: Placement }\n  ): boolean {\n    const rootElement = this._rootElement;\n    // const element = table.getElement(); // container element\n    const element = table.internalProps.menu.parentElement ?? table.getElement();\n    const {\n      width: containerWidth,\n      height: containerHeight,\n      left: containerLeft,\n      top: containerTop\n    } = element.getBoundingClientRect();\n    if (rootElement) {\n      if (rootElement.parentElement !== element) {\n        element.appendChild(rootElement); // 之前在做dom边缘躲避的时候放到了table.getParentElement()上，但发现不是相对定位导致位置错位\n      }\n      rootElement.style.left = `0px`;\n      //设置最宽尺寸\n      const maxWidth = containerWidth * 0.8;\n      rootElement.style.maxWidth = `${maxWidth}px`;\n      //计算弹出框的宽度\n      const rootElementWidth = rootElement.clientWidth;\n      const rootElementHeight = rootElement.clientHeight;\n      let rootElementLeft;\n      let rootElementTop;\n      if (position) {\n        rootElementLeft = position.x;\n        rootElementTop = position.y;\n      }\n      if (referencePosition) {\n        rootElementLeft = referencePosition.rect.right - rootElementWidth;\n        rootElementTop = referencePosition.rect.bottom;\n      }\n      //  rootElementLeft = position.x - rootElementWidth;\n      // let leftStyle = rootElementLeft;\n      // 检测下方能否容纳，不能容纳向上偏移\n      if (rootElementTop + rootElementHeight > containerHeight) {\n        rootElementTop = containerHeight - rootElementHeight;\n        rootElementLeft += rootElementWidth - 2;\n      }\n      // 偏移后上方超出canvas范围，居中显示\n      if (rootElementTop < 0) {\n        rootElementTop = rootElementTop / 2;\n      }\n\n      let deltaTop = 0;\n      let deltaLeft = 0;\n      if (table.getElement() !== element) {\n        const { left, top } = table.getElement().getBoundingClientRect();\n        deltaTop = top - containerTop;\n        deltaLeft = left - containerLeft;\n      }\n\n      rootElement.style.top = `${rootElementTop + deltaTop}px`;\n\n      // 判断如果超出左右范围则靠边显示\n      if (rootElementLeft < 0) {\n        rootElementLeft = 0;\n      } else if (rootElementLeft + rootElementWidth > containerWidth) {\n        rootElementLeft = containerWidth - rootElementWidth;\n      }\n      rootElement.style.left = `${rootElementLeft + deltaLeft}px`;\n\n      return true;\n    }\n    return false;\n  }\n  /** 鼠标坐标位置 是否位于下拉菜单内 */\n  pointInMenuElement(x: number, y: number): boolean {\n    const rootElement = this._rootElement;\n\n    const { x: rootLeft, y: rootTop, width: rootWidth, height: rootHeight } = rootElement.getBoundingClientRect();\n    if (x > rootLeft - 5 && x < rootLeft + rootWidth + 5 && y > rootTop - 5 && y < rootTop + rootHeight + 5) {\n      return true;\n    }\n\n    return false;\n  }\n}\n"]}