{"version":3,"sources":["../src/state/drill/index.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,WAAW,CAAC,GAAW,EAAE,GAAW,EAAE,SAAkB,EAAE,OAAgB,EAAE,KAAmB;IAE7G,MAAM,UAAU,GAAG,KAAK,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACnD,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,IAAI,OAAO,GAAG,KAAK,CAAC;IACpB,IAAI,UAAU,KAAK,cAAc,EAAE;QACjC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,CAAC,mBAAmB,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,cAAc,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/G,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAClE,OAAO,GAAG,IAAI,CAAC;KAChB;SAAM,IAAI,UAAU,KAAK,WAAW,EAAE;QACrC,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,KAAK,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC;QAC7D,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAIhE,OAAO,GAAG,IAAI,CAAC;KAChB;IAGD,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;AAClE,CAAC","file":"index.js","sourcesContent":["import type { BaseTableAPI } from '../../ts-types/base-table';\n\nexport function updateDrill(col: number, row: number, drillDown: boolean, drillUp: boolean, table: BaseTableAPI) {\n  // 找到当前单元格显示drill icon位置\n  const headerType = table.getCellLocation(col, row);\n  let x = 0;\n  let y = 0;\n  let visible = false;\n  if (headerType === 'columnHeader') {\n    x = table.getColsWidth(0, table.rowHeaderLevelCount - 1) - (table.frozenColCount === 0 ? table.scrollLeft : 0); //还需要考虑 行表头过宽被滚动后的情况\n    y = table.getRowsHeight(0, row - 1) + table.getRowHeight(row) / 2;\n    visible = true;\n  } else if (headerType === 'rowHeader') {\n    y = table.getRowsHeight(0, table.columnHeaderLevelCount - 1);\n    x = table.getColsWidth(0, col - 1) + table.getColWidth(col) / 2;\n    // 位置按自动吸附到中间位置计算【行表头滚动后有用】\n    // const rectObj = table.getVisibleCellRangeRelativeRect(table.hover.state.address);\n    // x = rectObj.left + rectObj.width / 2;\n    visible = true;\n  }\n\n  // 更新drill icon 位置\n  table.scenegraph.updateDrill(visible, x, y, drillDown, drillUp);\n}\n"]}