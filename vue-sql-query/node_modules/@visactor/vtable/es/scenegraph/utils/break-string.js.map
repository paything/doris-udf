{"version":3,"sources":["../src/scenegraph/utils/break-string.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AAC5C,OAAO,EAAE,eAAe,EAAE,MAAM,kBAAkB,CAAC;AAGnD,MAAM,UAAU,WAAW,CAAC,OAAe,EAAE,KAAmB;;IAC9D,IAAI,qBAAqB,GAAG,KAAK,CAAC;IAClC,IAAI,QAAQ,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG,CAAC,EAAE;QACpF,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG,CAAC,CAAC;QACrE,OAAO,IAAI,QAAQ,CAAC;QACpB,qBAAqB,GAAG,IAAI,CAAC;KAC9B;IACD,IAAI,IAAI,CAAC;IACT,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,eAAe,IAAI,CAAC,CAAA,MAAA,KAAK,CAAC,OAAO,CAAC,YAAY,0CAAE,mBAAmB,CAAA,EAAE;QAC5F,IAAI,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;KACnC;SAAM;QACL,IAAI,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;KAChG;IAGD,OAAO,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE;QAC/D,IAAI,CAAC,GAAG,EAAE,CAAC;KACZ;IAED,IAAI,CAAA,MAAA,KAAK,CAAC,OAAO,CAAC,YAAY,0CAAE,mBAAmB,KAAI,CAAC,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE;QAGxF,OAAO,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YACjD,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;KACF;IAED,OAAO;QACL,IAAI;QACJ,qBAAqB;KACtB,CAAC;AACJ,CAAC","file":"break-string.js","sourcesContent":["import { isString } from '@visactor/vutils';\nimport { convertInternal } from '../../tools/util';\nimport type { BaseTableAPI } from '../../ts-types/base-table';\n\nexport function breakString(textStr: string, table: BaseTableAPI) {\n  let moreThanMaxCharacters = false;\n  if (isString(textStr) && textStr.length > (table.options.maxCharactersNumber || 200)) {\n    textStr = textStr.slice(0, table.options.maxCharactersNumber || 200);\n    textStr += '\\u2026';\n    moreThanMaxCharacters = true;\n  }\n  let text;\n  if (!table.internalProps.enableLineBreak && !table.options.customConfig?.multilinesForXTable) {\n    text = [convertInternal(textStr)];\n  } else {\n    text = convertInternal(textStr).replace(/\\r?\\n/g, '\\n').replace(/\\r/g, '\\n').split('\\n') || [];\n  }\n\n  // clear empty string in array end\n  while (text.length && text.length > 1 && !text[text.length - 1]) {\n    text.pop();\n  }\n\n  if (table.options.customConfig?.multilinesForXTable && !table.internalProps.autoWrapText) {\n    // clear empty string in array start;\n    // align width xtable display\n    while (text.length && text.length > 1 && !text[0]) {\n      text.shift();\n    }\n  }\n\n  return {\n    text,\n    moreThanMaxCharacters\n  };\n}\n"]}