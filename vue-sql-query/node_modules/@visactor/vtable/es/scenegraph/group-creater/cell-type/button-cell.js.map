{"version":3,"sources":["../src/scenegraph/group-creater/cell-type/button-cell.ts"],"names":[],"mappings":"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","file":"button-cell.js","sourcesContent":["import { Tag } from './../../../vrender';\nimport type { IThemeSpec, TagAttributes } from './../../../vrender';\nimport type { CellRange, ButtonColumnDefine, ButtonStyleOption, ButtonStyle } from '../../../ts-types';\nimport type { BaseTableAPI } from '../../../ts-types/base-table';\nimport { Group } from '../../graphic/group';\nimport { getCellBorderStrokeWidth } from '../../utils/cell-border-stroke-width';\nimport { getProp } from '../../utils/get-prop';\nimport { isObject } from '@visactor/vutils';\nimport { getOrApply } from '../../../tools/helper';\nimport { getHierarchyOffset } from '../../utils/get-hierarchy-offset';\nimport { dealWithIconLayout } from '../../utils/text-icon-layout';\n\nexport function createButtonCellGroup(\n  cellGroup: Group | null,\n  columnGroup: Group,\n  xOrigin: number,\n  yOrigin: number,\n  col: number,\n  row: number,\n  colWidth: number,\n  width: number,\n  height: number,\n  padding: number[],\n  textAlign: CanvasTextAlign,\n  textBaseline: CanvasTextBaseline,\n  mayHaveIcon: boolean,\n  table: BaseTableAPI,\n  cellTheme: IThemeSpec,\n  define: ButtonColumnDefine,\n  range: CellRange | undefined,\n  isAsync: boolean\n) {\n  // cell\n  if (!cellGroup) {\n    const strokeArrayWidth = getCellBorderStrokeWidth(col, row, cellTheme, table);\n\n    if (isAsync) {\n      cellGroup = table.scenegraph.highPerformanceGetCell(col, row, true);\n      if (cellGroup && cellGroup.role === 'cell') {\n        cellGroup.setAttributes({\n          x: xOrigin,\n          y: yOrigin,\n          width,\n          height,\n          // 背景相关，cell背景由cellGroup绘制\n          lineWidth: cellTheme?.group?.lineWidth ?? undefined,\n          fill: cellTheme?.group?.fill ?? undefined,\n          stroke: cellTheme?.group?.stroke ?? undefined,\n          strokeArrayWidth: strokeArrayWidth,\n          strokeArrayColor: (cellTheme?.group as any)?.strokeArrayColor ?? undefined,\n          cursor: (cellTheme?.group as any)?.cursor ?? undefined,\n          lineDash: cellTheme?.group?.lineDash ?? undefined,\n          lineCap: 'butt',\n          clip: true,\n          cornerRadius: cellTheme.group.cornerRadius\n        } as any);\n      }\n    }\n    if (!cellGroup || cellGroup.role !== 'cell') {\n      cellGroup = new Group({\n        x: xOrigin,\n        y: yOrigin,\n        width,\n        height,\n        // 背景相关，cell背景由cellGroup绘制\n        lineWidth: cellTheme?.group?.lineWidth ?? undefined,\n        fill: cellTheme?.group?.fill ?? undefined,\n        stroke: cellTheme?.group?.stroke ?? undefined,\n        strokeArrayWidth: strokeArrayWidth,\n        strokeArrayColor: (cellTheme?.group as any)?.strokeArrayColor ?? undefined,\n        cursor: (cellTheme?.group as any)?.cursor ?? undefined,\n        lineDash: cellTheme?.group?.lineDash ?? undefined,\n        lineCap: 'butt',\n        clip: true,\n        cornerRadius: cellTheme.group.cornerRadius\n      } as any);\n      cellGroup.role = 'cell';\n      cellGroup.col = col;\n      cellGroup.row = row;\n      columnGroup?.addCellGroup(cellGroup);\n    }\n  }\n\n  let icons;\n  if (mayHaveIcon) {\n    let iconCol = col;\n    let iconRow = row;\n    if (range) {\n      iconCol = range.start.col;\n      iconRow = range.start.row;\n    }\n    icons = table.getCellIcons(iconCol, iconRow);\n  }\n\n  let iconWidth = 0;\n  let cellLeftIconWidth = 0;\n  let cellRightIconWidth = 0;\n  if (Array.isArray(icons) && icons.length !== 0) {\n    const { leftIconWidth, rightIconWidth, absoluteLeftIconWidth, absoluteRightIconWidth } = dealWithIconLayout(\n      icons,\n      cellGroup,\n      range,\n      table\n    );\n\n    iconWidth = leftIconWidth + rightIconWidth;\n    cellLeftIconWidth = leftIconWidth;\n    cellRightIconWidth = rightIconWidth;\n\n    // 更新各个部分横向位置\n    cellGroup.forEachChildren((child: any) => {\n      if (child.role === 'icon-left') {\n        child.setAttribute('x', child.attribute.x + padding[3]);\n      } else if (child.role === 'icon-right') {\n        child.setAttribute('x', child.attribute.x + width - rightIconWidth - padding[1]);\n      } else if (child.role === 'icon-absolute-right') {\n        child.setAttribute('x', child.attribute.x + width - absoluteRightIconWidth - padding[1]);\n      }\n    });\n\n    // 更新各个部分纵向位置\n    cellGroup.forEachChildren((child: any) => {\n      if (textBaseline === 'middle') {\n        child.setAttribute('y', (height - child.AABBBounds.height()) / 2);\n      } else if (textBaseline === 'bottom') {\n        child.setAttribute('y', height - child.AABBBounds.height() - padding[2]);\n      } else {\n        child.setAttribute('y', padding[0]);\n      }\n    });\n  }\n\n  const buttonComponent = createButton(\n    col,\n    row,\n    colWidth - iconWidth,\n    width,\n    height,\n    padding,\n    cellTheme,\n    define,\n    table\n  );\n  if (buttonComponent) {\n    cellGroup.appendChild(buttonComponent);\n  }\n\n  // buttonComponent.render();\n\n  width -= padding[1] + padding[3] + iconWidth;\n  height -= padding[0] + padding[2];\n  if (textAlign === 'center') {\n    buttonComponent.setAttribute(\n      'x',\n      padding[3] + cellLeftIconWidth + (width - buttonComponent.AABBBounds.width()) / 2\n    );\n  } else if (textAlign === 'right') {\n    buttonComponent.setAttribute('x', padding[3] + cellLeftIconWidth + width - buttonComponent.AABBBounds.width());\n  } else {\n    buttonComponent.setAttribute('x', padding[3] + cellLeftIconWidth);\n  }\n\n  if (textBaseline === 'middle') {\n    buttonComponent.setAttribute('y', padding[0] + (height - buttonComponent.AABBBounds.height()) / 2);\n  } else if (textBaseline === 'bottom') {\n    buttonComponent.setAttribute('y', padding[0] + height - buttonComponent.AABBBounds.height());\n  } else {\n    buttonComponent.setAttribute('y', padding[0]);\n  }\n\n  return cellGroup;\n}\n\nfunction createButton(\n  col: number,\n  row: number,\n  colWidth: number | 'auto',\n  cellWidth: number,\n  cellHeight: number,\n  padding: number[],\n  cellTheme: IThemeSpec,\n  define: ButtonColumnDefine,\n  table: BaseTableAPI\n) {\n  const style = table._getCellStyle(col, row) as ButtonStyle;\n  const buttonColor = getProp('buttonColor', style, col, row, table);\n  const buttonBorderColor = getProp('buttonBorderColor', style, col, row, table);\n  const buttonLineWidth = getProp('buttonLineWidth', style, col, row, table);\n  const buttonBorderRadius = getProp('buttonBorderRadius', style, col, row, table);\n  const buttonHoverColor = getProp('buttonHoverColor', style, col, row, table);\n  const buttonHoverBorderColor = getProp('buttonHoverBorderColor', style, col, row, table);\n  const buttonPadding = getProp('buttonPadding', style, col, row, table);\n  const buttonTextHoverColor = getProp('buttonTextHoverColor', style, col, row, table);\n  const buttonDisableColor = getProp('buttonDisableColor', style, col, row, table);\n  const buttonDisableBorderColor = getProp('buttonDisableBorderColor', style, col, row, table);\n  const buttonTextDisableColor = getProp('buttonTextDisableColor', style, col, row, table);\n\n  const value = table.getCellValue(col, row) as string | { text: string; checked: boolean; disable: boolean } | boolean;\n  const dataValue = table.getCellOriginValue(col, row);\n  const hierarchyOffset = getHierarchyOffset(col, row, table);\n  const cellStyle = table._getCellStyle(col, row) as ButtonStyleOption; // to be fixed\n  const autoWrapText = cellStyle.autoWrapText ?? table.internalProps.autoWrapText;\n  const { lineClamp } = cellStyle;\n  const autoColWidth = colWidth === 'auto';\n  const autoRowHeight = table.isAutoRowHeight(row);\n\n  const { disable, text } = define;\n  const isDisable = getOrApply(disable as any, {\n    col,\n    row,\n    table,\n    context: null,\n    value,\n    dataValue\n  });\n  const buttonTextValue = getOrApply(text as any, {\n    col,\n    row,\n    table,\n    context: null,\n    value,\n    dataValue\n  });\n\n  const buttonText = buttonTextValue ?? (value as string) ?? '';\n\n  const attribute = {\n    maxLineWidth: autoColWidth ? Infinity : cellWidth - (padding[1] + padding[3] + hierarchyOffset),\n    // fill: true,\n    textAlign: 'left',\n    textBaseline: 'top',\n    autoWrapText,\n    lineClamp,\n    wordBreak: 'break-word',\n    // widthLimit: autoColWidth ? -1 : colWidth - (padding[1] + padding[3]),\n    heightLimit: autoRowHeight ? -1 : cellHeight - Math.floor(padding[0] + padding[2]),\n    pickable: false,\n    dx: hierarchyOffset,\n    whiteSpace: buttonText.length === 1 && !autoWrapText ? 'no-wrap' : 'normal'\n  };\n  const testAttribute = cellTheme.text ? (Object.assign({}, cellTheme.text, attribute) as any) : attribute;\n\n  const buttonAttributes: TagAttributes = {\n    x: 0,\n    y: 0,\n    cursor: isDisable ? 'not-allowed' : 'pointer',\n    disable: isDisable,\n    childrenPickable: false,\n    text: buttonText.length === 1 ? buttonText[0] : buttonText,\n    textStyle: testAttribute,\n    padding: buttonPadding,\n    panel: {\n      visible: true,\n      fill: isDisable ? buttonDisableColor : buttonColor,\n      stroke: isDisable ? buttonDisableBorderColor : buttonBorderColor,\n      lineWidth: buttonLineWidth,\n      cornerRadius: buttonBorderRadius\n    },\n    state: {\n      text: {\n        hover: {}\n      },\n      panel: {\n        hover: {\n          fill: buttonHoverColor,\n          stroke: buttonHoverBorderColor\n        }\n      }\n    }\n  } as any;\n  buttonTextDisableColor && (buttonAttributes.state.text.fill = buttonTextDisableColor);\n  buttonTextHoverColor && (buttonAttributes.state.text.hover.fill = buttonTextHoverColor);\n\n  const buttonComponent = new Tag(buttonAttributes);\n  buttonComponent.name = 'button';\n\n  if (!isDisable) {\n    buttonComponent.addEventListener('mouseenter', () => {\n      buttonComponent.addState('hover', true, false);\n      buttonComponent.stage.renderNextFrame();\n    });\n    buttonComponent.addEventListener('mouseleave', () => {\n      buttonComponent.removeState('hover', false);\n      buttonComponent.stage.renderNextFrame();\n    });\n  }\n\n  return buttonComponent;\n}\n\nexport type CreateButtonCellGroup = typeof createButtonCellGroup;\n"]}