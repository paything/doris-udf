{"version":3,"sources":["../src/scenegraph/group-creater/cell-type/checkbox-cell.ts"],"names":[],"mappings":"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","file":"checkbox-cell.js","sourcesContent":["import type { IThemeSpec } from './../../../vrender';\nimport { Group } from '../../graphic/group';\nimport type { CellInfo, CellRange, CheckboxColumnDefine, CheckboxStyleOption, SparklineSpec } from '../../../ts-types';\nimport type { BaseTableAPI } from '../../../ts-types/base-table';\nimport { isObject } from '@visactor/vutils';\nimport type { CheckboxAttributes } from './../../../vrender';\nimport { CheckBox } from './../../../vrender';\nimport { getHierarchyOffset } from '../../utils/get-hierarchy-offset';\nimport { getOrApply } from '../../../tools/helper';\nimport type { CheckboxStyle } from '../../../body-helper/style/CheckboxStyle';\nimport { getProp } from '../../utils/get-prop';\nimport { getCellBorderStrokeWidth } from '../../utils/cell-border-stroke-width';\nimport { dealWithIconLayout } from '../../utils/text-icon-layout';\n\nexport function createCheckboxCellGroup(\n  cellGroup: Group | null,\n  columnGroup: Group,\n  xOrigin: number,\n  yOrigin: number,\n  col: number,\n  row: number,\n  colWidth: number,\n  width: number,\n  height: number,\n  padding: number[],\n  textAlign: CanvasTextAlign,\n  textBaseline: CanvasTextBaseline,\n  mayHaveIcon: boolean,\n  table: BaseTableAPI,\n  cellTheme: IThemeSpec,\n  define: CheckboxColumnDefine,\n  range: CellRange | undefined,\n  isAsync: boolean\n) {\n  // cell\n  if (!cellGroup) {\n    const strokeArrayWidth = getCellBorderStrokeWidth(col, row, cellTheme, table);\n\n    if (isAsync) {\n      cellGroup = table.scenegraph.highPerformanceGetCell(col, row, true);\n      if (cellGroup && cellGroup.role === 'cell') {\n        cellGroup.setAttributes({\n          x: xOrigin,\n          y: yOrigin,\n          width,\n          height,\n          // 背景相关，cell背景由cellGroup绘制\n          lineWidth: cellTheme?.group?.lineWidth ?? undefined,\n          fill: cellTheme?.group?.fill ?? undefined,\n          stroke: cellTheme?.group?.stroke ?? undefined,\n          strokeArrayWidth: strokeArrayWidth,\n          strokeArrayColor: (cellTheme?.group as any)?.strokeArrayColor ?? undefined,\n          cursor: (cellTheme?.group as any)?.cursor ?? undefined,\n          lineDash: cellTheme?.group?.lineDash ?? undefined,\n          lineCap: 'butt',\n          clip: true,\n          cornerRadius: cellTheme.group.cornerRadius\n        } as any);\n      }\n    }\n    if (!cellGroup || cellGroup.role !== 'cell') {\n      cellGroup = new Group({\n        x: xOrigin,\n        y: yOrigin,\n        width,\n        height,\n        // 背景相关，cell背景由cellGroup绘制\n        lineWidth: cellTheme?.group?.lineWidth ?? undefined,\n        fill: cellTheme?.group?.fill ?? undefined,\n        stroke: cellTheme?.group?.stroke ?? undefined,\n        strokeArrayWidth: strokeArrayWidth,\n        strokeArrayColor: (cellTheme?.group as any)?.strokeArrayColor ?? undefined,\n        cursor: (cellTheme?.group as any)?.cursor ?? undefined,\n        lineDash: cellTheme?.group?.lineDash ?? undefined,\n        lineCap: 'butt',\n        clip: true,\n        cornerRadius: cellTheme.group.cornerRadius\n      } as any);\n      cellGroup.role = 'cell';\n      cellGroup.col = col;\n      cellGroup.row = row;\n      columnGroup?.addCellGroup(cellGroup);\n    }\n  }\n\n  let icons;\n  if (mayHaveIcon) {\n    let iconCol = col;\n    let iconRow = row;\n    if (range) {\n      iconCol = range.start.col;\n      iconRow = range.start.row;\n    }\n    icons = table.getCellIcons(iconCol, iconRow);\n  }\n\n  let iconWidth = 0;\n  let cellLeftIconWidth = 0;\n  let cellRightIconWidth = 0;\n  if (Array.isArray(icons) && icons.length !== 0) {\n    const { leftIconWidth, rightIconWidth, absoluteLeftIconWidth, absoluteRightIconWidth } = dealWithIconLayout(\n      icons,\n      cellGroup,\n      range,\n      table\n    );\n\n    iconWidth = leftIconWidth + rightIconWidth;\n    cellLeftIconWidth = leftIconWidth;\n    cellRightIconWidth = rightIconWidth;\n\n    // 更新各个部分横向位置\n    cellGroup.forEachChildren((child: any) => {\n      if (child.role === 'icon-left') {\n        child.setAttribute('x', child.attribute.x + padding[3]);\n      } else if (child.role === 'icon-right') {\n        child.setAttribute('x', child.attribute.x + width - rightIconWidth - padding[1]);\n      } else if (child.role === 'icon-absolute-right') {\n        child.setAttribute('x', child.attribute.x + width - absoluteRightIconWidth - padding[1]);\n      }\n    });\n\n    // 更新各个部分纵向位置\n    cellGroup.forEachChildren((child: any) => {\n      if (textBaseline === 'middle') {\n        child.setAttribute('y', (height - child.AABBBounds.height()) / 2);\n      } else if (textBaseline === 'bottom') {\n        child.setAttribute('y', height - child.AABBBounds.height() - padding[2]);\n      } else {\n        child.setAttribute('y', padding[0]);\n      }\n    });\n  }\n\n  // checkbox\n  const checkboxComponent = createCheckbox(\n    col,\n    row,\n    colWidth - iconWidth,\n    width,\n    height,\n    padding,\n    cellTheme,\n    define,\n    table\n  );\n  if (checkboxComponent) {\n    cellGroup.appendChild(checkboxComponent);\n  }\n\n  checkboxComponent.render();\n\n  width -= padding[1] + padding[3] + iconWidth;\n  height -= padding[0] + padding[2];\n  if (textAlign === 'center') {\n    checkboxComponent.setAttribute(\n      'x',\n      padding[3] + cellLeftIconWidth + (width - checkboxComponent.AABBBounds.width()) / 2\n    );\n  } else if (textAlign === 'right') {\n    checkboxComponent.setAttribute('x', padding[3] + cellLeftIconWidth + width - checkboxComponent.AABBBounds.width());\n  } else {\n    checkboxComponent.setAttribute('x', padding[3] + cellLeftIconWidth);\n  }\n\n  if (textBaseline === 'middle') {\n    checkboxComponent.setAttribute('y', padding[0] + (height - checkboxComponent.AABBBounds.height()) / 2);\n  } else if (textBaseline === 'bottom') {\n    checkboxComponent.setAttribute('y', padding[0] + height - checkboxComponent.AABBBounds.height());\n  } else {\n    checkboxComponent.setAttribute('y', padding[0]);\n  }\n\n  return cellGroup;\n}\n\nfunction createCheckbox(\n  col: number,\n  row: number,\n  colWidth: number | 'auto',\n  cellWidth: number,\n  cellHeight: number,\n  padding: number[],\n  cellTheme: IThemeSpec,\n  define: CheckboxColumnDefine,\n  table: BaseTableAPI\n) {\n  const style = table._getCellStyle(col, row) as CheckboxStyle;\n  const size = getProp('size', style, col, row, table);\n  const spaceBetweenTextAndIcon = getProp('spaceBetweenTextAndIcon', style, col, row, table);\n  const defaultFill = getProp('defaultFill', style, col, row, table);\n  const defaultStroke = getProp('defaultStroke', style, col, row, table);\n  const disableFill = getProp('disableFill', style, col, row, table);\n  const checkedFill = getProp('checkedFill', style, col, row, table);\n  const checkedStroke = getProp('checkedStroke', style, col, row, table);\n  const disableCheckedFill = getProp('disableCheckedFill', style, col, row, table);\n  const disableCheckedStroke = getProp('disableCheckedStroke', style, col, row, table);\n  const checkIconImage = getProp('checkIconImage', style, col, row, table);\n  const indeterminateIconImage = getProp('indeterminateIconImage', style, col, row, table);\n\n  const value = table.getCellValue(col, row) as string | { text: string; checked: boolean; disable: boolean } | boolean;\n  const dataValue = table.getCellOriginValue(col, row);\n  let isChecked;\n  let isDisabled;\n  let text = (value as string) ?? '';\n  if (isObject(value)) {\n    isChecked = value.checked;\n    isDisabled = value.disable;\n    text = value.text ?? '';\n  } else if (typeof value === 'boolean') {\n    isChecked = value;\n    text = '';\n  }\n  isChecked = table.stateManager.syncCheckedState(col, row, define.field as string | number, isChecked);\n  const hierarchyOffset = getHierarchyOffset(col, row, table);\n  const cellStyle = table._getCellStyle(col, row) as CheckboxStyleOption; // to be fixed\n  const autoWrapText = cellStyle.autoWrapText ?? table.internalProps.autoWrapText;\n  const { lineClamp } = cellStyle;\n  const { checked, disable } = define;\n  if (isChecked === undefined || isChecked === null || typeof isChecked === 'function') {\n    //isChecked无效值 取全局设置的值\n    const globalChecked = getOrApply(checked as any, {\n      col,\n      row,\n      table,\n      context: null,\n      value,\n      dataValue\n    });\n    isChecked = table.stateManager.syncCheckedState(col, row, define.field as string | number, globalChecked);\n  }\n  const globalDisable = getOrApply(disable as any, {\n    col,\n    row,\n    table,\n    context: null,\n    value,\n    dataValue\n  });\n\n  const autoColWidth = colWidth === 'auto';\n  const autoRowHeight = table.isAutoRowHeight(row);\n\n  const attribute = {\n    text: text.length === 1 ? text[0] : text,\n    maxLineWidth: autoColWidth\n      ? Infinity\n      : cellWidth - (padding[1] + padding[3] + hierarchyOffset) - size - spaceBetweenTextAndIcon,\n    // fill: true,\n    textAlign: 'left',\n    textBaseline: 'top',\n    autoWrapText,\n    lineClamp,\n    wordBreak: 'break-word',\n    // widthLimit: autoColWidth ? -1 : colWidth - (padding[1] + padding[3]),\n    heightLimit: autoRowHeight ? -1 : cellHeight - Math.floor(padding[0] + padding[2]),\n    pickable: false,\n    dx: hierarchyOffset,\n    whiteSpace: text.length === 1 && !autoWrapText ? 'no-wrap' : 'normal'\n  };\n  const testAttribute = cellTheme.text ? (Object.assign({}, cellTheme.text, attribute) as any) : attribute;\n  const checkboxAttributes: CheckboxAttributes = {\n    x: 0,\n    y: 0,\n    text: testAttribute,\n    icon: {\n      width: Math.floor(size / 1.4), // icon : box => 10 : 14\n      height: Math.floor(size / 1.4)\n    },\n    box: {\n      width: size,\n      height: size\n    },\n    spaceBetweenTextAndIcon,\n    disabled: isDisabled ?? globalDisable ?? false\n  };\n\n  if (isChecked === 'indeterminate') {\n    checkboxAttributes.checked = undefined;\n    checkboxAttributes.indeterminate = true;\n  } else {\n    checkboxAttributes.checked = isChecked;\n    checkboxAttributes.indeterminate = undefined;\n  }\n  defaultFill && (checkboxAttributes.box.fill = defaultFill);\n  defaultStroke && (checkboxAttributes.box.stroke = defaultStroke);\n  disableFill && (checkboxAttributes.box.disableFill = disableFill);\n  checkedFill && (checkboxAttributes.box.checkedFill = checkedFill);\n  checkedStroke && (checkboxAttributes.box.checkedStroke = checkedStroke);\n  disableCheckedFill && (checkboxAttributes.box.disableCheckedFill = disableCheckedFill);\n  disableCheckedStroke && (checkboxAttributes.box.disableCheckedStroke = disableCheckedStroke);\n  checkIconImage && (checkboxAttributes.icon.checkIconImage = checkIconImage);\n  indeterminateIconImage && (checkboxAttributes.icon.indeterminateIconImage = indeterminateIconImage);\n\n  const checkbox = new CheckBox(checkboxAttributes);\n  checkbox.name = 'checkbox';\n\n  return checkbox;\n}\n\nexport type CreateCheckboxCellGroup = typeof createCheckboxCellGroup;\n"]}