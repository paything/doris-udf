{"version":3,"sources":["../src/event/self-event-listener/pivot-chart/axis-hover.ts"],"names":[],"mappings":"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","file":"axis-hover.js","sourcesContent":["import { TABLE_EVENT_TYPE } from '../../../core/TABLE_EVENT_TYPE';\nimport type { PivotHeaderLayoutMap } from '../../../layout/pivot-header-layout';\nimport type { BaseTableAPI } from '../../../ts-types/base-table';\n\nexport function bindAxisHoverEvent(table: BaseTableAPI) {\n  if (!table.isPivotChart()) {\n    return;\n  }\n\n  table.on(TABLE_EVENT_TYPE.MOUSEENTER_CELL, e => {\n    const cellGroup = table.scenegraph.getCell(e.col, e.row);\n    cellGroup.forEachChildren(child => {\n      if (child.name === 'axis') {\n        const position = getAxisPosition(e.col, e.row, table.internalProps.layoutMap as PivotHeaderLayoutMap);\n        (e as any).axisPosition = position;\n        table.fireListeners(TABLE_EVENT_TYPE.MOUSEENTER_AXIS, e as any);\n      }\n    });\n  });\n\n  table.on(TABLE_EVENT_TYPE.MOUSELEAVE_CELL, e => {\n    const cellGroup = table.scenegraph.getCell(e.col, e.row);\n    cellGroup.forEachChildren(child => {\n      if (child.name === 'axis') {\n        const position = getAxisPosition(e.col, e.row, table.internalProps.layoutMap as PivotHeaderLayoutMap);\n        (e as any).axisPosition = position;\n        table.fireListeners(TABLE_EVENT_TYPE.MOUSELEAVE_AXIS, e as any);\n      }\n    });\n  });\n}\n\nfunction getAxisPosition(col: number, row: number, layout: PivotHeaderLayoutMap) {\n  if (layout.indicatorsAsCol) {\n    if (\n      layout.hasTwoIndicatorAxes &&\n      row === layout.columnHeaderLevelCount - 1 &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      return 'top';\n    } else if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      return 'bottom';\n    } else if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.rowHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      return 'left';\n    }\n  } else {\n    if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      return 'left';\n    } else if (\n      col === layout.colCount - layout.rightFrozenColCount &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      return 'right';\n    } else if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      return 'bottom';\n    }\n  }\n  return 'bottom';\n}\n"]}