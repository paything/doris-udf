{"version":3,"sources":["../src/layout/chart-helper/get-axis-config.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,kBAAkB,CAAC;AAKrE,OAAO,EAAE,kBAAkB,EAAE,MAAM,cAAc,CAAC;AAClD,OAAO,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAE7C,OAAO,EAAE,YAAY,EAAE,MAAM,gCAAgC,CAAC;AAC9D,OAAO,EAAE,OAAO,EAAE,MAAM,iCAAiC,CAAC;AAC1D,OAAO,EAAE,mBAAmB,EAAE,0BAA0B,EAAE,MAAM,cAAc,CAAC;AAQ/E,MAAM,UAAU,yBAAyB,CAAC,GAAW,EAAE,GAAW,EAAE,MAA4B;;IAC9F,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE;QACjC,OAAO,SAAS,CAAC;KAClB;IAGD,IAAI,MAAM,CAAC,eAAe,EAAE;QAC1B,IACE,MAAM,CAAC,mBAAmB;YAC1B,GAAG,KAAK,MAAM,CAAC,sBAAsB,GAAG,CAAC;YACzC,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YACA,MAAM,SAAS,GAAG,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,sBAAsB,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAC7G,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAG9F,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,SAAS,CAAC;YA2BvF,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YACD,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YAGD,OAAO,KAAK,CACV;gBACE,KAAK,EAAE,KAAK;aACb,EACD,UAAU,EACV;gBACE,MAAM,EAAE,KAAK;gBACb,IAAI,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,KAAI,QAAQ;gBAClC,KAAK,EAAE;oBACL,KAAK,EAAE,IAAI;iBACZ;gBACD,IAAI,EAAE;oBACJ,QAAQ,EAAE,mBAAmB,CAAC,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;iBACtE;gBACD,gBAAgB,EAAE,KAAK;gBACvB,kBAAkB,EAAE,KAAK;gBACzB,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB;YACrD,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YAEA,MAAM,aAAa,GAAG,MAAM,CAAC,0BAA0B,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAClE,IAAI,aAAa,GAAG,IAAI,CAAC;YACzB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,OAAO,CAAC,GAAG,CAAC,EAAE;gBAC3B,MAAM,IAAI,GAAG,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBAC1C,IAAI,IAAI,EAAE;oBACR,aAAa,GAAG,IAAI,CAAC;iBACtB;YACH,CAAC,CAAC,CAAC;YAEH,MAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAClF,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAG9F,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,SAAS,CAAC;YAiBvF,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YACD,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YAGD,OAAO,KAAK,CACV;gBACE,KAAK,EAAE;oBACL,OAAO,EAAE,IAAI;oBACb,IAAI,EAAG,aAAqB,aAArB,aAAa,uBAAb,aAAa,CAAU,KAAK;iBAEpC;gBACD,KAAK;aACN,EACD,UAAU,EACV;gBACE,MAAM,EAAE,QAAQ;gBAChB,IAAI,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,KAAI,QAAQ;gBAClC,KAAK,EAAE;oBACL,KAAK,EAAE,IAAI;iBACZ;gBACD,IAAI,EAAE;oBACJ,QAAQ,EAAE,mBAAmB,CAAC,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;iBACtE;gBACD,gBAAgB,EAAE,KAAK;gBACvB,kBAAkB,EAAE,KAAK;gBACzB,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,mBAAmB,GAAG,CAAC;YACtC,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YACA,IAAI,eAAe,GAAG,MAAM,CAAC,0BAA0B,CAAC,MAAM,CAAC,mBAAmB,EAAE,GAAG,CAAC,CAAC;YACzF,IAAI,OAAO,CAAC,eAAe,CAAC,EAAE;gBAC5B,eAAe,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;aACtC;YACD,MAAM,IAAI,GAAG,MAAA,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,mCAAK,EAAe,CAAC;YAEjF,MAAM,OAAO,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAChD,MAAM,MAAM,GAAG,MAAE,IAAY,CAAC,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,EAAE,CAAmB,mCAAI,EAAE,CAAC;YAErE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YACrF,IAAI,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,OAAO,MAAK,KAAK,EAAE;gBACjC,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAE9F,MAAM,IAAI,GAAG,MAAM,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YAElD,OAAO,KAAK,CACV;gBAEE,MAAM,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;gBAEtE,KAAK,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS;gBACzD,KAAK,EAAE;oBACL,UAAU,EAAE,IAAI;iBACjB;aACF,EACD,UAAU,EACV;gBACE,MAAM,EAAE,MAAM;gBAEd,IAAI,EAAE,MAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,mCAAI,MAAM;gBAChC,kBAAkB,EAAE,KAAK;gBAGzB,OAAO,EAAE,gBAAgB,CACvB,UAAU,EACV,CAAC,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,SAAS,mCAAI,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,iBAAyB,CACpG;gBACD,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;KACF;SAAM;QACL,IACE,GAAG,KAAK,MAAM,CAAC,mBAAmB,GAAG,CAAC;YACtC,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YAEA,MAAM,aAAa,GAAG,MAAM,CAAC,0BAA0B,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAClE,IAAI,aAAa,GAAG,IAAI,CAAC;YACzB,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,OAAO,CAAC,GAAG,CAAC,EAAE;gBAC3B,MAAM,IAAI,GAAG,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBAC1C,IAAI,IAAI,EAAE;oBACR,aAAa,GAAG,IAAI,CAAC;iBACtB;YACH,CAAC,CAAC,CAAC;YAEH,MAAM,SAAS,GAAG,QAAQ,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAChF,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAG9F,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,SAAS,CAAC;YAiBvF,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YACD,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YAGD,OAAO,KAAK,CACV;gBACE,KAAK,EAAE;oBACL,OAAO,EAAE,IAAI;oBACb,IAAI,EAAG,aAAqB,aAArB,aAAa,uBAAb,aAAa,CAAU,KAAK;oBACnC,UAAU,EAAE,IAAI;iBACjB;gBACD,KAAK,EAAE,KAAK;aACb,EACD,UAAU,EACV;gBACE,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,KAAI,QAAQ;gBAClC,KAAK,EAAE;oBACL,KAAK,EAAE,IAAI;iBACZ;gBACD,IAAI,EAAE;oBACJ,QAAQ,EAAE,mBAAmB,CAAC,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;iBACtE;gBACD,gBAAgB,EAAE,KAAK;gBACvB,kBAAkB,EAAE,KAAK;gBACzB,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB;YACpD,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YACA,MAAM,SAAS,GAAG,QAAQ,CAAC,OAAO,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,mBAAmB,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAC5G,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAG9F,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,SAAS,CAAC;YAiBvF,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YACD,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;gBAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;gBAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;oBACjB,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;iBACzB;aACF;YAGD,OAAO,KAAK,CACV;gBACE,KAAK,EAAE,KAAK;gBACZ,KAAK,EAAE;oBACL,UAAU,EAAE,IAAI;iBACjB;aACF,EACD,UAAU,EACV;gBACE,MAAM,EAAE,OAAO;gBACf,IAAI,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,KAAI,QAAQ;gBAClC,KAAK,EAAE;oBACL,KAAK,EAAE,IAAI;iBACZ;gBACD,IAAI,EAAE;oBACJ,QAAQ,EAAE,mBAAmB,CAAC,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;iBACtE;gBACD,gBAAgB,EAAE,KAAK;gBACvB,kBAAkB,EAAE,KAAK;gBACzB,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB;YACrD,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YAGA,IAAI,kBAAkB,GAAG,MAAM,CAAC,0BAA0B,CAAC,GAAG,EAAE,MAAM,CAAC,sBAAsB,CAAC,CAAC;YAC/F,IAAI,OAAO,CAAC,kBAAkB,CAAC,EAAE;gBAC/B,kBAAkB,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC;aAC5C;YACD,MAAM,IAAI,GAAG,MAAA,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,kBAAkB,CAAC,mCAAK,EAAe,CAAC;YAEpF,MAAM,OAAO,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAChD,MAAM,MAAM,GAAG,MAAE,IAAY,aAAZ,IAAI,uBAAJ,IAAI,CAAW,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,EAAE,CAAmB,mCAAI,EAAE,CAAC;YAEvE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;YAClG,IAAI,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,OAAO,MAAK,KAAK,EAAE;gBACjC,OAAO;aACR;YAED,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;YACjE,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAG9F,OAAO,KAAK,CACV;gBAEE,MAAM,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;gBAEtE,KAAK,EAAE,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS;aAC1D,EACD,UAAU,EACV;gBACE,MAAM,EAAE,QAAQ;gBAEhB,IAAI,EAAE,MAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,mCAAI,MAAM;gBAChC,kBAAkB,EAAE,KAAK;gBACzB,eAAe,EAAE,OAAO;aACzB,CACF,CAAC;SACH;KACF;IAED,OAAO,SAAS,CAAC;AACnB,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,GAAW,EAAE,GAAW,EAAE,MAAc,EAAE,MAA4B;;IAClG,MAAM,IAAI,GAAG,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IAC9C,MAAM,IAAI,GAAG,MAAA,IAAI,CAAC,IAAI,mCAAI,EAAE,CAAC;IAC5B,MAAM,CAAC,MAAqB,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QAC1D,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAM,EAAE,EAAE;YACtC,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjB;IACH,CAAC,CAAC,CAAC;IAEH,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,EAAE;QACzB,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAS,EAAE,EAAE;YACzC,OAAO,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,IAAI,UAAU,EAAE;YACd,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,UAAU,CAAC;YAC7C,IAAI,YAAY,CAAC;YACjB,IAAI,UAAe,CAAC;YACpB,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBAC7C,YAAY,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;oBAClE,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC7D,IAAI,KAAK,IAAI,CAAC,EAAE;wBACd,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBACjC;oBACD,OAAO,KAAK,CAAC;gBACf,CAAC,CAAC,CAAC;aACJ;iBAAM,IAAI,OAAO,CAAC,WAAW,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBACvD,YAAY,GAAG,WAAW,CAAC;aAC5B;YACD,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YAC1E,OAAO;gBACL,UAAU;gBACV,SAAS,EAAE,IAAI,CAAC,OAAO;gBACvB,WAAW;gBACX,WAAW;gBACX,YAAY;gBACZ,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,SAAS,EAAE,MAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,mCAAI,IAAI,CAAC,IAAI;aACzC,CAAC;SACH;KACF;IACD,MAAM,UAAU,GAAK,MAAM,CAAC,MAAqB,CAAC,cAAqC,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;QACxG,OAAO,UAAU,CAAC,MAAM,KAAK,MAAM,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;IAC1E,OAAO;QACL,UAAU;QACV,SAAS,EAAE,KAAK;QAEhB,WAAW;QACX,WAAW;QACX,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,SAAS,EAAE,IAAI,CAAC,IAAI;KACrB,CAAC;AACJ,CAAC;AAED,SAAS,cAAc,CAAC,IAAS,EAAE,MAAc,EAAE,MAA4B;IAI7E,MAAM,OAAO,GAAa,EAAE,CAAC;IAC7B,IAAI,MAAM,KAAK,MAAM,IAAI,MAAM,KAAK,OAAO,EAAE;QAC3C,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KAC/B;SAAM,IAAI,MAAM,KAAK,KAAK,IAAI,MAAM,KAAK,QAAQ,EAAE;QAClD,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC/B;IAED,IAAI,QAAQ,CAAC;IACb,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAC9B,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;KACtB;SAAM;QACL,QAAQ,GAAI,MAAM,CAAC,MAAqB,CAAC,cAAoC,CAAC;KAC/E;IAED,IAAI,WAAW,GAAG,KAAK,CAAC;IACxB,IAAI,WAAW,GAAG,KAAK,CAAC;IACxB,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,IAAI,GAAU,EAAE,CAAC;QACvB,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;YAC7B,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjB;QACH,CAAC,CAAC,CAAC;QACH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpC,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACrB,IACE,IAAI,CAAC,IAAI;gBAET,IAAI,CAAC,IAAI,CAAC,MAAM;gBAChB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;oBACnB,OAAO,QAAQ,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC1C,CAAC,CAAC,EACF;gBAEA,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;gBACjD,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;aAClD;SACF;KACF;IAGD,OAAO;QACL,WAAW;QACX,WAAW;KACZ,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,YAAY,CAC1B,eAA+D,EAC/D,aAAuB,EACvB,WAAoB,EACpB,OAAe,EACf,QAA2B;;IAE3B,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,KAAK,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC;QAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,MAAM,WAAW,GAAG,YAAY,CAAC,eAAe,EAAE,aAAa,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YACpG,IAAI,WAAW,EAAE;gBACf,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;gBACjD,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;aAClD;SACF;QACD,IAAI,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YAC9C,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;KACb;IACD,IAAI,UAAU,GAAG,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAG,QAAQ,CAAC,CAAC;IAC3C,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE;QACvB,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;KAC5B;IACD,IAAI,CAAC,UAAU,EAAE;QACf,OAAO,IAAI,CAAC;KACb;IAID,MAAM,IAAI,GAAG,eAAe,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,KAAK,GAAG,KAAK,CAAC,EAAE,EAAE,MAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAG,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,EAAE,CAAkC,mCAAI,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IAEvG,IAAI,KAAK,CAAC,WAAW,IAAI,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,GAAG,EAAE;QACtD,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC;KAC/B;IACD,IAAI,KAAK,CAAC,WAAW,IAAI,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,GAAG,EAAE;QACtD,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC;KAC/B;IACD,IAAI,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,EAAE;QAC3B,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE;YACjB,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;SACf;aAAM;YACL,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;SACf;KACF;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,GAAW,EAAE,GAAW,EAAE,MAA4B;IACtF,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE;QACjC,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,CAAC,eAAe,EAAE;QAC1B,IACE,MAAM,CAAC,mBAAmB;YAC1B,GAAG,KAAK,MAAM,CAAC,sBAAsB,GAAG,CAAC;YACzC,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YAEA,OAAO,IAAI,CAAC;SACb;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB;YACrD,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YAEA,OAAO,IAAI,CAAC;SACb;KACF;SAAM;QACL,IACE,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB;YACrD,GAAG,IAAI,MAAM,CAAC,mBAAmB;YACjC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB,EAClD;YAEA,OAAO,IAAI,CAAC;SACb;KACF;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,GAAW,EAAE,GAAW,EAAE,MAA4B;IACtF,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE;QACjC,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,CAAC,eAAe,EAAE;QAC1B,IACE,GAAG,KAAK,MAAM,CAAC,mBAAmB,GAAG,CAAC;YACtC,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YAEA,OAAO,IAAI,CAAC;SACb;KACF;SAAM;QACL,IACE,GAAG,KAAK,MAAM,CAAC,mBAAmB,GAAG,CAAC;YACtC,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YAEA,OAAO,IAAI,CAAC;SACb;aAAM,IACL,GAAG,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,mBAAmB;YACpD,GAAG,IAAI,MAAM,CAAC,sBAAsB;YACpC,GAAG,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EACnD;YAEA,OAAO,IAAI,CAAC;SACb;KACF;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,IAAW,SAGV;AAHD,WAAW,SAAS;IAClB,kCAAqB,CAAA;IACrB,sCAAyB,CAAA;AAC3B,CAAC,EAHU,SAAS,KAAT,SAAS,QAGnB;AAGD,SAAS,gBAAgB,CAAC,IAAS,EAAE,YAAqB;IAIxD,IAAI,OAAO,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,CAAC;IAC5B,IAAI,YAAY,IAAI,CAAC,OAAO,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,CAAC,EAAE;QAC1C,OAAO,GAAG,OAAO,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,CAAA,CAAC,CAAC,CAAC,IAAI,CAAC;KAC1D;IACD,OAAO,OAAO,CAAC;AACjB,CAAC;AAGD,SAAS,OAAO,CAAC,MAAmB;IAClC,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,KAAK,CAAC;AACjD,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,IAAS,EAAE,eAAoB,EAAE,YAAqB,EAAE,WAAoB;IACxG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QACjD,OAAO,CAAC,YAAY,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,YAAY,IAAI,CAAC,WAAW,CAAC,CAAC;KACzE;IAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACzC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,YAAY,IAAI,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC9F,OAAO,IAAI,CAAC;SACb;QAED,IAAI,YAAY,IAAI,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC7F,OAAO,IAAI,CAAC;SACb;QAED,IAAI,CAAC,YAAY,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC7F,OAAO,IAAI,CAAC;SACb;QAED,IAAI,YAAY,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC5F,OAAO,IAAI,CAAC;SACb;KACF;IAED,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/C,MAAM,QAAQ,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,YAAY,IAAI,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC9F,OAAO,IAAI,CAAC;aACb;YAED,IAAI,YAAY,IAAI,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC7F,OAAO,IAAI,CAAC;aACb;YAED,IAAI,CAAC,YAAY,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC7F,OAAO,IAAI,CAAC;aACb;YAED,IAAI,YAAY,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC5F,OAAO,IAAI,CAAC;aACb;SACF;KACF;IAED,OAAO,CAAC,YAAY,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,YAAY,IAAI,CAAC,WAAW,CAAC,CAAC;AAC1E,CAAC;AAED,SAAS,QAAQ,CACf,QAA6C,EAC7C,gBAAwB,EACxB,gBAAwB,EACxB,kBAA0B,EAC1B,kBAA0B,EAC1B,GAAW,EACX,GAAW,EACX,mBAA2B,EAC3B,MAA4B;IAE5B,MAAM,aAAa,GAAG,MAAM,CAAC,0BAA0B,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;IAChG,IAAI,IAAI,CAAC;IACT,IAAI,QAAQ,KAAK,KAAK,IAAI,QAAQ,KAAK,QAAQ,EAAE;QAC/C,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;KACxC;SAAM;QACL,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;KACxC;IAED,MAAM,WAAW,GAAG,iBAAiB,CACnC,gBAAgB,EAChB,gBAAgB,EAChB,mBAAmB,EACnB,QAAQ,EACR,aAAa,EACb,IAAI,EACJ,MAAM,CACP,CAAC;IAEF,IAAI,CAAC,WAAW,EAAE;QAChB,OAAO,SAAS,CAAC;KAClB;IAED,MAAM,eAAe,GACnB,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC;IAEzG,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,sBAAsB,CACzD,gBAAgB,EAChB,gBAAgB,EAChB,WAAW,CAAC,KAAK,EACjB,WAAW,CAAC,WAAW,EACvB,WAAW,CAAC,WAAW,EACvB,WAAW,CAAC,KAAK,EACjB,aAAa,EACb,eAAe,EACf,IAAI,EACJ,MAAM,CACP,CAAC;IAEF,IAAI,WAAW,CAAC,KAAK,KAAK,CAAC,IAAI,WAAW,EAAE;QAE1C,MAAM,2BAA2B,GAAG,OAAO,CAAC,WAAW,CACrD,6BAA6B,CACC,CAAC;QACjC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,2BAA2B,CACtE,WAAW,CAAC,KAAK,CAAC,GAAG,EACrB,WAAW,CAAC,KAAK,CAAC,GAAG,EAErB,WAAW,CAAC,UAAU,EACtB,WAAW,CAAC,WAAW,EAEvB,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,KAAK;YACzC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,iBAAiB;YACnE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,kBAAkB,EACvE;YACE,WAAW;YACX,WAAW;SACZ,CACF,CAAC;QACF,WAAW,CAAC,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACpC,WAAW,CAAC,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACpC,WAAW,CAAC,KAAK,GAAG,QAAQ,CAAC;KAC9B;IAEA,WAAmB,CAAC,WAAW,GAAG,WAAW,CAAC;IAC9C,WAAmB,CAAC,WAAW,GAAG,WAAW,CAAC;IAE/C,OAAO,WAAqF,CAAC;AAC/F,CAAC;AAED,SAAS,iBAAiB,CACxB,GAAW,EACX,GAAW,EACX,KAAa,EACb,QAA6C,EAC7C,aAAuB,EACvB,IAAY,EACZ,MAA4B;IAE5B,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,aAAa,CACvG,GAAG,EACH,GAAG,EACH,QAAQ,EACR,MAAM,CACP,CAAC;IAMF,MAAM,KAAK,GAAG,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,aAAa,EAAE,WAAW,EAAE,IAAI,EAAE,YAAY,aAAZ,YAAY,cAAZ,YAAY,GAAI,KAAK,CAAC,CAAC;IAEpH,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,SAAS,CAAC;KAClB;IAED,IAAI,SAAS,EAAE;QACb,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACnC;IACD,IAAI,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,KAAI,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,EAAE;QAC/C,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACnC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;KACpC;IAGD,MAAM,2BAA2B,GAAG,OAAO,CAAC,WAAW,CAAC,6BAA6B,CAAgC,CAAC;IACtH,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,2BAA2B,CACxE,KAAK,CAAC,GAAG,EACT,KAAK,CAAC,GAAG,EACT,UAAU,EACV,WAAW,EAEX,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,KAAK;QACzC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,iBAAiB;QACnE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,kBAAkB,CACxE,CAAC;IACF,IAAI,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,EAAE;QACpB,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACzB,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;KAC1B;IAGD,MAAM,KAAK,GAAG,SAAS,CAAC;IAExB,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;QAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;KAC5B;IACD,IAAI,QAAQ,CAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,GAAG,CAAC,EAAE;QAC7B,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;KAC5B;IAED,OAAO;QACL,KAAK,EAAE,YAAY,aAAZ,YAAY,cAAZ,YAAY,GAAI,KAAK;QAC5B,KAAK;QACL,KAAK;QACL,WAAW;QACX,WAAW;QACX,UAAU;QACV,KAAK;QACL,SAAS;KACV,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,oBAAoB,CAClC,GAAW,EACX,GAAW,EACX,KAAa,EACb,QAA6C,EAC7C,eAAoD,EACpD,aAAuB,EACvB,IAAY,EACZ,MAA4B;IAE5B,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,iBAAiB,CACvE,GAAG,EACH,GAAG,EACH,KAAK,EACL,QAAQ,EACR,aAAa,EACb,IAAI,EACJ,MAAM,CACP,CAAC;IACF,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,sBAAsB,CACzD,GAAG,EACH,GAAG,EACH,KAAK,EACL,WAAW,EACX,WAAW,EACX,KAAK,EACL,aAAa,EACb,eAAe,EACf,IAAI,EACJ,MAAM,CACP,CAAC;IAEF,IAAI,KAAK,KAAK,CAAC,IAAI,WAAW,EAAE;QAE9B,MAAM,2BAA2B,GAAG,OAAO,CAAC,WAAW,CACrD,6BAA6B,CACC,CAAC;QACjC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,2BAA2B,CACtE,KAAK,CAAC,GAAG,EACT,KAAK,CAAC,GAAG,EACT,KAAK,CAAC,EAAE,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,cAAc,EAAE,WAAW,CAAC,MAAM,EAAE,EAAE,CAAC,EACnF,WAAW,EAEX,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,KAAK;YACzC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,iBAAiB;YACnE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,kBAAkB,EACvE;YACE,WAAW;YACX,WAAW;SACZ,CACF,CAAC;QACF,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACxB,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;KAEzB;IAED,OAAO;QACL,UAAU;QACV,KAAK;QACL,WAAW;QACX,WAAW;KACZ,CAAC;AACJ,CAAC;AAED,SAAS,sBAAsB,CAC7B,GAAW,EACX,GAAW,EACX,KAAa,EACb,WAAoB,EACpB,WAAoB,EACpB,KAAgB,EAChB,aAAuB,EACvB,eAAoD,EACpD,IAAY,EACZ,MAA4B;IAE5B,IAAI,WAAqB,CAAC;IAC1B,IAAI,WAGH,CAAC;IAEF,IAAI,CAAC,WAAW,IAAI,CAAC,WAAW,EAAE;QAChC,OAAO;YACL,WAAW;YACX,WAAW;SACZ,CAAC;KACH;IAED,MAAM,YAAY,GAAG,iBAAiB,CACpC,GAAG,EACH,GAAG,EACH,aAAa,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,EAChC,eAAe,EACf,aAAa,EACb,IAAI,EACJ,MAAM,CACP,CAAC;IACF,IAAI,YAAY,EAAE;QAChB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,YAAY,CAAC;QAC1D,WAAW,GAAG,QAAQ,CAAC;QACvB,IAAI,WAAW,EAAE;YACf,MAAM,KAAK,GAAG,kBAAkB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YAClD,IAAI,KAAK,EAAE;gBACT,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC5B,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC5B,WAAW,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAClC,WAAW,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aACnC;SACF;QACD,IAAI,WAAW,EAAE;YACf,IAAI,CAAC,WAAW,EAAE;gBAChB,WAAW,GAAG,QAAQ,CAAC;aACxB;iBAAM;gBACL,WAAW,GAAG,0BAA0B,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;aACjG;SACF;KACF;IAED,OAAO;QACL,WAAW;QACX,WAAW;KACZ,CAAC;AACJ,CAAC","file":"get-axis-config.js","sourcesContent":["import { isArray, isNumber, isValid, merge } from '@visactor/vutils';\nimport type { PivotHeaderLayoutMap } from '../pivot-header-layout';\nimport type { ITableAxisOption } from '../../ts-types/component/axis';\nimport type { PivotChart } from '../../PivotChart';\nimport type { CollectedValue } from '../../ts-types';\nimport { getNewRangeToAlign } from './zero-align';\nimport { Factory } from '../../core/factory';\nimport type { GetAxisDomainRangeAndLabels } from './get-axis-domain';\nimport { getQuadProps } from '../../scenegraph/utils/padding';\nimport { getProp } from '../../scenegraph/utils/get-prop';\nimport { getTickModeFunction, getZeroAlignTickAlignTicks } from './tick-align';\n\ntype AxisRange = {\n  min: number;\n  max: number;\n};\n\nexport type GetAxisConfigInPivotChart = (col: number, row: number, layout: PivotHeaderLayoutMap) => any;\nexport function getAxisConfigInPivotChart(col: number, row: number, layout: PivotHeaderLayoutMap): any {\n  if (!layout._table.isPivotChart()) {\n    return undefined;\n  }\n\n  // 是否是指标\n  if (layout.indicatorsAsCol) {\n    if (\n      layout.hasTwoIndicatorAxes &&\n      row === layout.columnHeaderLevelCount - 1 &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      const axisRange = getRange('top', col, row + 1, col, layout.columnHeaderLevelCount - 1, col, row, 1, layout);\n      if (!axisRange) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col, row + 1);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col, row + 1, layout._table));\n\n      // range for top axis\n      const { range, ticks, axisOption, targetTicks, targetRange, index, theme } = axisRange;\n\n      // if (isZeroAlign) {\n      //   // range for bottom axis\n      //   const subAxisRange = getRange(\n      //     'bottom',\n      //     col,\n      //     row + 1,\n      //     col,\n      //     layout.columnHeaderLevelCount - 1,\n      //     col,\n      //     row,\n      //     0,\n      //     layout\n      //   );\n\n      //   if (subAxisRange) {\n      //     const { range: subRange } = subAxisRange;\n\n      //     const align = getNewRangeToAlign(range, subRange);\n      //     if (align) {\n      //       range.min = align.range1[0];\n      //       range.max = align.range1[1];\n      //     }\n      //   }\n      // }\n\n      if (isNumber(axisOption?.min)) {\n        range.min = axisOption.min;\n        if (range.min > 0) {\n          axisOption.zero = false;\n        }\n      }\n      if (isNumber(axisOption?.max)) {\n        range.max = axisOption.max;\n        if (range.max < 0) {\n          axisOption.zero = false;\n        }\n      }\n\n      // 顶部副指标轴\n      return merge(\n        {\n          range: range\n        },\n        axisOption,\n        {\n          orient: 'top',\n          type: axisOption?.type || 'linear',\n          label: {\n            flush: true\n          },\n          tick: {\n            tickMode: getTickModeFunction(targetTicks, targetRange, range, index)\n          },\n          __ticksForVTable: ticks,\n          __vtableChartTheme: theme,\n          __vtablePadding: padding\n        }\n      );\n    } else if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      // const indicatorKeys = layout.getIndicatorKeyInChartSpec(col, row).slice(0, 2);\n      const indicatorKeys = layout.getIndicatorKeyInChartSpec(col, row);\n      let indicatorInfo = null;\n      indicatorKeys?.forEach(key => {\n        const info = layout.getIndicatorInfo(key);\n        if (info) {\n          indicatorInfo = info;\n        }\n      });\n\n      const axisRange = getRange('bottom', col, row - 1, col, row, col, row, 0, layout);\n      if (!axisRange) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col, row - 1);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col, row - 1, layout._table));\n\n      // range for bottom axis\n      const { range, ticks, axisOption, index, targetTicks, targetRange, theme } = axisRange;\n\n      // if (isZeroAlign) {\n      //   // range for top axis\n      //   const subAxisRange = getRange('top', col, row - 1, col, row, col, row, 1, layout);\n\n      //   if (subAxisRange) {\n      //     const { range: subRange } = subAxisRange;\n\n      //     const align = getNewRangeToAlign(range, subRange);\n      //     if (align) {\n      //       range.min = align.range1[0];\n      //       range.max = align.range1[1];\n      //     }\n      //   }\n      // }\n\n      if (isNumber(axisOption?.min)) {\n        range.min = axisOption.min;\n        if (range.min > 0) {\n          axisOption.zero = false;\n        }\n      }\n      if (isNumber(axisOption?.max)) {\n        range.max = axisOption.max;\n        if (range.max < 0) {\n          axisOption.zero = false;\n        }\n      }\n\n      // 底侧指标轴\n      return merge(\n        {\n          title: {\n            visible: true,\n            text: (indicatorInfo as any)?.title\n            // autoRotate: true\n          },\n          range\n        },\n        axisOption,\n        {\n          orient: 'bottom',\n          type: axisOption?.type || 'linear',\n          label: {\n            flush: true\n          },\n          tick: {\n            tickMode: getTickModeFunction(targetTicks, targetRange, range, index)\n          },\n          __ticksForVTable: ticks,\n          __vtableChartTheme: theme,\n          __vtablePadding: padding\n        }\n      );\n    } else if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      let rowDimensionKey = layout.getDimensionKeyInChartSpec(layout.rowHeaderLevelCount, row);\n      if (isArray(rowDimensionKey)) {\n        rowDimensionKey = rowDimensionKey[0];\n      }\n      const data = layout.dataset.collectedValues[rowDimensionKey] ?? ([] as string[]);\n\n      const rowPath = layout.getRowKeysPath(col, row);\n      const domain = ((data as any)[rowPath ?? ''] as Array<string>) ?? [];\n\n      const { axisOption, theme, chartType } = getAxisOption(col + 1, row, 'left', layout);\n      if (axisOption?.visible === false) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col + 1, row);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col + 1, row, layout._table));\n\n      const spec = layout.getRawChartSpec(col + 1, row);\n      // 左侧维度轴\n      return merge(\n        {\n          // domain: chartType === 'scatter' ? undefined : Array.from(domain),\n          domain: axisOption?.type === 'linear' ? undefined : Array.from(domain),\n          // range: chartType === 'scatter' ? domain : undefined,\n          range: axisOption?.type === 'linear' ? domain : undefined,\n          title: {\n            autoRotate: true\n          }\n        },\n        axisOption,\n        {\n          orient: 'left',\n          // type: chartType === 'scatter' ? axisOption?.type ?? 'linear' : 'band',\n          type: axisOption?.type ?? 'band',\n          __vtableChartTheme: theme,\n          // 默认左侧维度轴对应的图表direction 为 horizontal\n          // 散点图特殊处理\n          inverse: transformInverse(\n            axisOption,\n            (spec?.direction ?? (chartType === 'scatter' ? 'vertical' : 'horizontal')) === Direction.horizontal\n          ),\n          __vtablePadding: padding\n        }\n      );\n    }\n  } else {\n    if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      // const indicatorKeys = layout.getIndicatorKeyInChartSpec(col, row).slice(0, 2);\n      const indicatorKeys = layout.getIndicatorKeyInChartSpec(col, row);\n      let indicatorInfo = null;\n      indicatorKeys?.forEach(key => {\n        const info = layout.getIndicatorInfo(key);\n        if (info) {\n          indicatorInfo = info;\n        }\n      });\n\n      const axisRange = getRange('left', col + 1, row, col, row, col, row, 0, layout);\n      if (!axisRange) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col + 1, row);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col + 1, row, layout._table));\n\n      // range for left axis\n      const { range, ticks, axisOption, index, targetTicks, targetRange, theme } = axisRange;\n\n      // if (isZeroAlign) {\n      //   // range for right axis\n      //   const subAxisRange = getRange('right', col + 1, row, col, row, col, row, 1, layout);\n\n      //   if (subAxisRange) {\n      //     const { range: subRange } = subAxisRange;\n\n      //     const align = getNewRangeToAlign(range, subRange);\n      //     if (align) {\n      //       range.min = align.range1[0];\n      //       range.max = align.range1[1];\n      //     }\n      //   }\n      // }\n\n      if (isNumber(axisOption?.min)) {\n        range.min = axisOption.min;\n        if (range.min > 0) {\n          axisOption.zero = false;\n        }\n      }\n      if (isNumber(axisOption?.max)) {\n        range.max = axisOption.max;\n        if (range.max < 0) {\n          axisOption.zero = false;\n        }\n      }\n\n      // 左侧指标轴\n      return merge(\n        {\n          title: {\n            visible: true,\n            text: (indicatorInfo as any)?.title,\n            autoRotate: true\n          },\n          range: range\n        },\n        axisOption,\n        {\n          orient: 'left',\n          type: axisOption?.type || 'linear',\n          label: {\n            flush: true\n          },\n          tick: {\n            tickMode: getTickModeFunction(targetTicks, targetRange, range, index)\n          },\n          __ticksForVTable: ticks,\n          __vtableChartTheme: theme,\n          __vtablePadding: padding\n        }\n      );\n    } else if (\n      col === layout.colCount - layout.rightFrozenColCount &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      const axisRange = getRange('right', col - 1, row, layout.rowHeaderLevelCount - 1, row, col, row, 1, layout);\n      if (!axisRange) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col - 1, row);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col - 1, row, layout._table));\n\n      // range for right axis\n      const { range, ticks, axisOption, index, targetTicks, targetRange, theme } = axisRange;\n\n      // if (isZeroAlign) {\n      //   // range for left axis\n      //   const subAxisRange = getRange('left', col - 1, row, layout.rowHeaderLevelCount - 1, row, col, row, 0, layout);\n\n      //   if (subAxisRange) {\n      //     const { range: subRange } = subAxisRange;\n\n      //     const align = getNewRangeToAlign(range, subRange);\n      //     if (align) {\n      //       range.min = align.range1[0];\n      //       range.max = align.range1[1];\n      //     }\n      //   }\n      // }\n\n      if (isNumber(axisOption?.min)) {\n        range.min = axisOption.min;\n        if (range.min > 0) {\n          axisOption.zero = false;\n        }\n      }\n      if (isNumber(axisOption?.max)) {\n        range.max = axisOption.max;\n        if (range.max < 0) {\n          axisOption.zero = false;\n        }\n      }\n\n      // 右侧副指标轴\n      return merge(\n        {\n          range: range,\n          title: {\n            autoRotate: true\n          }\n        },\n        axisOption,\n        {\n          orient: 'right',\n          type: axisOption?.type || 'linear',\n          label: {\n            flush: true\n          },\n          tick: {\n            tickMode: getTickModeFunction(targetTicks, targetRange, range, index)\n          },\n          __ticksForVTable: ticks,\n          __vtableChartTheme: theme,\n          __vtablePadding: padding\n        }\n      );\n    } else if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      // const indicatorKeys = layout.getIndicatorKeyInChartSpec(col, row);\n\n      let columnDimensionKey = layout.getDimensionKeyInChartSpec(col, layout.columnHeaderLevelCount);\n      if (isArray(columnDimensionKey)) {\n        columnDimensionKey = columnDimensionKey[0];\n      }\n      const data = layout.dataset.collectedValues[columnDimensionKey] ?? ([] as string[]);\n\n      const colPath = layout.getColKeysPath(col, row);\n      const domain = ((data as any)?.[colPath ?? ''] as Array<string>) ?? [];\n\n      const { axisOption, isPercent, theme, chartType } = getAxisOption(col, row - 1, 'bottom', layout);\n      if (axisOption?.visible === false) {\n        return;\n      }\n\n      const chartCellStyle = layout._table._getCellStyle(col, row - 1);\n      const padding = getQuadProps(getProp('padding', chartCellStyle, col, row - 1, layout._table));\n\n      // 底部维度轴\n      return merge(\n        {\n          // domain: chartType === 'scatter' ? undefined : Array.from(domain),\n          domain: axisOption?.type === 'linear' ? undefined : Array.from(domain),\n          // range: chartType === 'scatter' ? domain : undefined\n          range: axisOption?.type === 'linear' ? domain : undefined\n        },\n        axisOption,\n        {\n          orient: 'bottom',\n          // type: chartType === 'scatter' ? axisOption?.type ?? 'linear' : 'band',\n          type: axisOption?.type ?? 'band',\n          __vtableChartTheme: theme,\n          __vtablePadding: padding\n        }\n      );\n    }\n  }\n\n  return undefined;\n}\n\nexport function getAxisOption(col: number, row: number, orient: string, layout: PivotHeaderLayoutMap) {\n  const spec = layout.getRawChartSpec(col, row);\n  const axes = spec.axes ?? [];\n  (layout._table as PivotChart).pivotChartAxes.forEach(axis => {\n    const index = axes.findIndex((a: any) => {\n      return axis.orient === a.orient;\n    });\n    if (index === -1) {\n      axes.push(axis);\n    }\n  });\n\n  if (spec && isArray(axes)) {\n    const axisOption = axes.find((axis: any) => {\n      return axis.orient === orient;\n    });\n    if (axisOption) {\n      const { seriesIndex, seriesId } = axisOption;\n      let seriesIndice;\n      let seriesSpec: any;\n      if (isValid(seriesId) && isArray(spec.series)) {\n        seriesIndice = (isArray(seriesId) ? seriesId : [seriesId]).map(id => {\n          const index = spec.series.findIndex((s: any) => s.id === id);\n          if (index >= 0) {\n            seriesSpec = spec.series[index];\n          }\n          return index;\n        });\n      } else if (isValid(seriesIndex) && isArray(spec.series)) {\n        seriesIndice = seriesIndex;\n      }\n      const { isZeroAlign, isTickAlign } = checkZeroAlign(spec, orient, layout);\n      return {\n        axisOption,\n        isPercent: spec.percent,\n        isZeroAlign,\n        isTickAlign,\n        seriesIndice,\n        theme: spec.theme,\n        chartType: seriesSpec?.type ?? spec.type\n      };\n    }\n  }\n  const axisOption = ((layout._table as PivotChart).pivotChartAxes as ITableAxisOption[]).find(axisOption => {\n    return axisOption.orient === orient;\n  });\n  const { isZeroAlign, isTickAlign } = checkZeroAlign(spec, orient, layout);\n  return {\n    axisOption,\n    isPercent: false,\n    // isZeroAlign: checkZeroAlign(spec, orient, layout),\n    isZeroAlign,\n    isTickAlign,\n    theme: spec.theme,\n    chartType: spec.type\n  };\n}\n\nfunction checkZeroAlign(spec: any, orient: string, layout: PivotHeaderLayoutMap) {\n  // check condition:\n  // 1. two axes and one set sync\n  // 2. axisId in sync is another\n  const orients: string[] = [];\n  if (orient === 'left' || orient === 'right') {\n    orients.push('left', 'right');\n  } else if (orient === 'top' || orient === 'bottom') {\n    orients.push('top', 'bottom');\n  }\n  // const spec = layout.getRawChartSpec(col, row);\n  let axesSpec;\n  if (spec && isArray(spec.axes)) {\n    axesSpec = spec.axes;\n  } else {\n    axesSpec = (layout._table as PivotChart).pivotChartAxes as ITableAxisOption[];\n  }\n\n  let isZeroAlign = false;\n  let isTickAlign = false;\n  if (isArray(axesSpec)) {\n    const axes: any[] = [];\n    axesSpec.forEach((axis: any) => {\n      if (orients.includes(axis.orient)) {\n        axes.push(axis);\n      }\n    });\n    for (let i = 0; i < axes.length; i++) {\n      const axis = axes[i];\n      if (\n        axis.sync &&\n        // axis.sync.zeroAlign &&\n        axis.sync.axisId &&\n        axes.find(axisSync => {\n          return axisSync.id === axis.sync.axisId;\n        })\n      ) {\n        // return true;\n        isZeroAlign = isZeroAlign || axis.sync.zeroAlign;\n        isTickAlign = isTickAlign || axis.sync.tickAlign;\n      }\n    }\n  }\n\n  // return false;\n  return {\n    isZeroAlign,\n    isTickAlign\n  };\n}\n\nexport function getAxisRange(\n  collectedValues: Record<string, Record<string, CollectedValue>>,\n  indicatorKeys: string[],\n  isZeroAlign: boolean,\n  colPath: string,\n  seriesId: number | number[]\n): AxisRange | null {\n  if (isArray(seriesId)) {\n    const range = { min: Infinity, max: -Infinity };\n    for (let i = 0; i < seriesId.length; i++) {\n      const singleRange = getAxisRange(collectedValues, indicatorKeys, isZeroAlign, colPath, seriesId[i]);\n      if (singleRange) {\n        range.min = Math.min(range.min, singleRange.min);\n        range.max = Math.max(range.max, singleRange.max);\n      }\n    }\n    if (isFinite(range.min) && isFinite(range.max)) {\n      return range;\n    }\n    return null;\n  }\n  let defaultKey = indicatorKeys?.[seriesId];\n  if (isArray(defaultKey)) {\n    defaultKey = defaultKey[0];\n  }\n  if (!defaultKey) {\n    return null;\n  }\n  // const data = collectedValues[defaultKey + (isZeroAlign ? '_align' : '')]\n  //   ? collectedValues[defaultKey + (isZeroAlign ? '_align' : '')]\n  //   : collectedValues[defaultKey];\n  const data = collectedValues[defaultKey];\n  const range = merge({}, (data?.[colPath ?? ''] as { min: number; max: number }) ?? { min: 0, max: 1 });\n\n  if (range.positiveMax && range.positiveMax > range.max) {\n    range.max = range.positiveMax;\n  }\n  if (range.negativeMin && range.negativeMin < range.min) {\n    range.min = range.negativeMin;\n  }\n  if (range.min === range.max) {\n    if (range.min > 0) {\n      range.min = 0;\n    } else {\n      range.max = 0;\n    }\n  }\n\n  return range;\n}\n\nexport function isTopOrBottomAxis(col: number, row: number, layout: PivotHeaderLayoutMap): boolean {\n  if (!layout._table.isPivotChart()) {\n    return false;\n  }\n\n  if (layout.indicatorsAsCol) {\n    if (\n      layout.hasTwoIndicatorAxes &&\n      row === layout.columnHeaderLevelCount - 1 &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      // 顶部副指标轴\n      return true;\n    } else if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      // 底侧指标轴\n      return true;\n    }\n  } else {\n    if (\n      row === layout.rowCount - layout.bottomFrozenRowCount &&\n      col >= layout.rowHeaderLevelCount &&\n      col < layout.colCount - layout.rightFrozenColCount\n    ) {\n      // 底部维度轴\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function isLeftOrRightAxis(col: number, row: number, layout: PivotHeaderLayoutMap): boolean {\n  if (!layout._table.isPivotChart()) {\n    return false;\n  }\n\n  if (layout.indicatorsAsCol) {\n    if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      // 左侧维度轴\n      return true;\n    }\n  } else {\n    if (\n      col === layout.rowHeaderLevelCount - 1 &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      // 左侧指标轴\n      return true;\n    } else if (\n      col === layout.colCount - layout.rightFrozenColCount &&\n      row >= layout.columnHeaderLevelCount &&\n      row < layout.rowCount - layout.bottomFrozenRowCount\n    ) {\n      // 右侧副指标轴\n      return true;\n    }\n  }\n  return false;\n}\n\nconst enum Direction {\n  vertical = 'vertical',\n  horizontal = 'horizontal'\n}\n\n// align with vchart (packages/vchart/src/component/axis/cartesian/util/common.ts)\nfunction transformInverse(spec: any, isHorizontal: boolean) {\n  // 这里处理下 direction === 'horizontal' 下的 Y 轴\n  // 因为 Y 轴绘制的时候默认是从下至上绘制的，但是在 direction === 'horizontal' 场景下，图表应该是按照从上至下阅读的\n  // 所以这里在这种场景下坐标轴会默认 inverse 已达到效果\n  let inverse = spec?.inverse;\n  if (isHorizontal && !isXAxis(spec?.orient)) {\n    inverse = isValid(spec?.inverse) ? !spec?.inverse : true;\n  }\n  return inverse;\n}\n\ntype IOrientType = 'left' | 'top' | 'right' | 'bottom' | 'z';\nfunction isXAxis(orient: IOrientType) {\n  return orient === 'bottom' || orient === 'top';\n}\n\nexport function hasLinearAxis(spec: any, tableAxesConfig: any, isHorizontal: boolean, isThisXAxis: boolean): boolean {\n  if (!isArray(spec.axes) || spec.axes.length === 0) {\n    return (isHorizontal && isThisXAxis) || (!isHorizontal && !isThisXAxis);\n  }\n\n  for (let i = 0; i < spec.axes.length; i++) {\n    const axisSpec = spec.axes[i];\n    if (!isHorizontal && isThisXAxis && axisSpec.orient === 'bottom' && axisSpec.type === 'linear') {\n      return true;\n    }\n\n    if (isHorizontal && isThisXAxis && axisSpec.orient === 'bottom' && axisSpec.type !== 'linear') {\n      return true;\n    }\n\n    if (!isHorizontal && !isThisXAxis && axisSpec.orient === 'left' && axisSpec.type !== 'linear') {\n      return true;\n    }\n\n    if (isHorizontal && !isThisXAxis && axisSpec.orient === 'left' && axisSpec.type === 'linear') {\n      return true;\n    }\n  }\n\n  if (isArray(tableAxesConfig) && tableAxesConfig.length > 0) {\n    for (let i = 0; i < tableAxesConfig.length; i++) {\n      const axisSpec = tableAxesConfig[i];\n      if (!isHorizontal && isThisXAxis && axisSpec.orient === 'bottom' && axisSpec.type === 'linear') {\n        return true;\n      }\n\n      if (isHorizontal && isThisXAxis && axisSpec.orient === 'bottom' && axisSpec.type !== 'linear') {\n        return true;\n      }\n\n      if (!isHorizontal && !isThisXAxis && axisSpec.orient === 'left' && axisSpec.type !== 'linear') {\n        return true;\n      }\n\n      if (isHorizontal && !isThisXAxis && axisSpec.orient === 'left' && axisSpec.type === 'linear') {\n        return true;\n      }\n    }\n  }\n\n  return (isHorizontal && isThisXAxis) || (!isHorizontal && !isThisXAxis);\n}\n\nfunction getRange(\n  position: 'left' | 'right' | 'top' | 'bottom',\n  colForAxisOption: number,\n  rowForAxisOption: number,\n  colForIndicatorKey: number,\n  rowForIndicatorKey: number,\n  col: number,\n  row: number,\n  defaultSeriesIndice: number,\n  layout: PivotHeaderLayoutMap\n) {\n  const indicatorKeys = layout.getIndicatorKeyInChartSpec(colForIndicatorKey, rowForIndicatorKey);\n  let path;\n  if (position === 'top' || position === 'bottom') {\n    path = layout.getColKeysPath(col, row);\n  } else {\n    path = layout.getRowKeysPath(col, row);\n  }\n\n  const rangeConfig = getChartAxisRange(\n    colForAxisOption,\n    rowForAxisOption,\n    defaultSeriesIndice,\n    position,\n    indicatorKeys,\n    path,\n    layout\n  );\n\n  if (!rangeConfig) {\n    return undefined;\n  }\n\n  const subAxisPosition =\n    position === 'bottom' ? 'top' : position === 'top' ? 'bottom' : position === 'left' ? 'right' : 'left';\n\n  const { targetRange, targetTicks } = getTargetRangeAndTicks(\n    colForAxisOption,\n    rowForAxisOption,\n    rangeConfig.index,\n    rangeConfig.isZeroAlign,\n    rangeConfig.isTickAlign,\n    rangeConfig.range,\n    indicatorKeys,\n    subAxisPosition,\n    path,\n    layout\n  );\n\n  if (rangeConfig.index !== 0 && targetTicks) {\n    // reset range\n    const getAxisDomainRangeAndLabels = Factory.getFunction(\n      'getAxisDomainRangeAndLabels'\n    ) as GetAxisDomainRangeAndLabels;\n    const { range: newRange, ticks: newTicks } = getAxisDomainRangeAndLabels(\n      rangeConfig.range.min,\n      rangeConfig.range.max,\n      // merge({}, rangeConfig.axisOption, { nice: true, tick: { forceTickCount: targetTicks.length } }),\n      rangeConfig.axisOption,\n      rangeConfig.isZeroAlign,\n      // layout._table.getColWidth(col)\n      position === 'bottom' || position === 'top'\n        ? layout._table.getColWidth(col) || layout._table.tableNoFrameWidth\n        : layout._table.getRowHeight(row) || layout._table.tableNoFrameHeight, // avoid 0, 0 causes NaN\n      {\n        targetTicks,\n        targetRange\n      }\n    );\n    rangeConfig.range.min = newRange[0];\n    rangeConfig.range.max = newRange[1];\n    rangeConfig.ticks = newTicks;\n  }\n\n  (rangeConfig as any).targetRange = targetRange;\n  (rangeConfig as any).targetTicks = targetTicks;\n\n  return rangeConfig as typeof rangeConfig & { targetRange: AxisRange; targetTicks: number[] };\n}\n\nfunction getChartAxisRange(\n  col: number,\n  row: number,\n  index: number,\n  position: 'bottom' | 'top' | 'left' | 'right',\n  indicatorKeys: string[],\n  path: string,\n  layout: PivotHeaderLayoutMap\n) {\n  const { axisOption, isPercent, isZeroAlign, isTickAlign, seriesIndice, theme, chartType } = getAxisOption(\n    col,\n    row,\n    position,\n    layout\n  );\n\n  // if (axisOption?.visible === false) {\n  //   return undefined;\n  // }\n\n  const range = getAxisRange(layout.dataset.collectedValues, indicatorKeys, isZeroAlign, path, seriesIndice ?? index);\n\n  if (!range) {\n    return undefined;\n  }\n\n  if (isPercent) {\n    range.min = range.min < 0 ? -1 : 0;\n    range.max = range.max > 0 ? 1 : 0;\n  }\n  if (axisOption?.zero || range.min === range.max) {\n    range.min = Math.min(range.min, 0);\n    range.max = Math.max(range.max, 0);\n  }\n  // let ticks;\n  // if (axisOption?.nice || isTickAlign) {\n  const getAxisDomainRangeAndLabels = Factory.getFunction('getAxisDomainRangeAndLabels') as GetAxisDomainRangeAndLabels;\n  const { range: axisRange, ticks: selfTicks } = getAxisDomainRangeAndLabels(\n    range.min,\n    range.max,\n    axisOption,\n    isZeroAlign,\n    // layout._table.getColWidth(col)\n    position === 'bottom' || position === 'top'\n      ? layout._table.getColWidth(col) || layout._table.tableNoFrameWidth\n      : layout._table.getRowHeight(row) || layout._table.tableNoFrameHeight // avoid 0, 0 causes NaN\n  );\n  if (axisOption?.nice) {\n    range.min = axisRange[0];\n    range.max = axisRange[1];\n  }\n  // if (isTickAlign) {\n  // }\n  const ticks = selfTicks;\n  // }\n  if (isNumber(axisOption?.min)) {\n    range.min = axisOption.min;\n  }\n  if (isNumber(axisOption?.max)) {\n    range.max = axisOption.max;\n  }\n\n  return {\n    index: seriesIndice ?? index,\n    range,\n    ticks,\n    isZeroAlign,\n    isTickAlign,\n    axisOption,\n    theme,\n    chartType\n  };\n}\n\nexport function getAxisRangeAndTicks(\n  col: number,\n  row: number,\n  index: number,\n  position: 'bottom' | 'top' | 'left' | 'right',\n  subAxisPosition: 'bottom' | 'top' | 'left' | 'right',\n  indicatorKeys: string[],\n  path: string,\n  layout: PivotHeaderLayoutMap\n) {\n  const { range, isZeroAlign, isTickAlign, axisOption } = getChartAxisRange(\n    col,\n    row,\n    index,\n    position,\n    indicatorKeys,\n    path,\n    layout\n  );\n  const { targetRange, targetTicks } = getTargetRangeAndTicks(\n    col,\n    row,\n    index,\n    isZeroAlign,\n    isTickAlign,\n    range,\n    indicatorKeys,\n    subAxisPosition,\n    path,\n    layout\n  );\n\n  if (index !== 0 && targetTicks) {\n    // reset range\n    const getAxisDomainRangeAndLabels = Factory.getFunction(\n      'getAxisDomainRangeAndLabels'\n    ) as GetAxisDomainRangeAndLabels;\n    const { range: newRange, ticks: newTicks } = getAxisDomainRangeAndLabels(\n      range.min,\n      range.max,\n      merge({}, axisOption, { nice: true, tick: { forceTickCount: targetTicks.length } }),\n      isZeroAlign,\n      // layout._table.getColWidth(col)\n      position === 'bottom' || position === 'top'\n        ? layout._table.getColWidth(col) || layout._table.tableNoFrameWidth\n        : layout._table.getRowHeight(row) || layout._table.tableNoFrameHeight, // avoid 0, 0 causes NaN\n      {\n        targetTicks,\n        targetRange\n      }\n    );\n    range.min = newRange[0];\n    range.max = newRange[1];\n    // axisOption.ticks = newTicks;\n  }\n\n  return {\n    axisOption,\n    range,\n    targetTicks,\n    targetRange\n  };\n}\n\nfunction getTargetRangeAndTicks(\n  col: number,\n  row: number,\n  index: number,\n  isZeroAlign: boolean,\n  isTickAlign: boolean,\n  range: AxisRange,\n  indicatorKeys: string[],\n  subAxisPosition: 'bottom' | 'top' | 'left' | 'right',\n  path: string,\n  layout: PivotHeaderLayoutMap\n) {\n  let targetTicks: number[];\n  let targetRange: {\n    max: number;\n    min: number;\n  };\n\n  if (!isZeroAlign && !isTickAlign) {\n    return {\n      targetTicks,\n      targetRange\n    };\n  }\n\n  const subAxisRange = getChartAxisRange(\n    col,\n    row,\n    indicatorKeys.length - 1 - index,\n    subAxisPosition,\n    indicatorKeys,\n    path,\n    layout\n  );\n  if (subAxisRange) {\n    const { range: subRange, ticks: subTicks } = subAxisRange;\n    targetRange = subRange;\n    if (isZeroAlign) {\n      const align = getNewRangeToAlign(range, subRange);\n      if (align) {\n        range.min = align.range1[0];\n        range.max = align.range1[1];\n        targetRange.min = align.range2[0];\n        targetRange.max = align.range2[1];\n      }\n    }\n    if (isTickAlign) {\n      if (!isZeroAlign) {\n        targetTicks = subTicks;\n      } else {\n        targetTicks = getZeroAlignTickAlignTicks(targetRange, col, row, index, subAxisPosition, layout);\n      }\n    }\n  }\n\n  return {\n    targetTicks,\n    targetRange\n  };\n}\n"]}