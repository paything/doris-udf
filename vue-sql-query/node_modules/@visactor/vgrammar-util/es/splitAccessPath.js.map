{"version":3,"sources":["../src/splitAccessPath.ts"],"names":[],"mappings":"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","file":"splitAccessPath.js","sourcesContent":["/* Adapted from vega by University of Washington Interactive Data Lab\n * https://vega.github.io/vega/\n * Licensed under the BSD-3-Clause\n\n * url: https://github.com/vega/vega/blob/main/packages/vega-util/src/splitAccessPath.js\n * License: https://github.com/vega/vega/blob/main/LICENSE\n * @license\n */\n\nimport { error } from './error';\n\nexport const splitAccessPath = (p: string) => {\n  const path: string[] = [];\n  const n = p.length;\n\n  let q = null;\n  let b = 0;\n  let s = '';\n  let i: number;\n  let j: number;\n  let c;\n\n  p += '';\n\n  const push = () => {\n    path.push(s + p.substring(i, j));\n    s = '';\n    i = j + 1;\n  };\n\n  for (i = 0, j = 0; j < n; j += 1) {\n    c = p[j];\n    if (c === '\\\\') {\n      s += p.substring(i, j);\n      s += p.substring(++j, ++j);\n      i = j;\n    } else if (c === q) {\n      push();\n      q = null;\n      b = -1;\n    } else if (q) {\n      continue;\n    } else if (i === b && c === '\"') {\n      i = j + 1;\n      q = c;\n      // eslint-disable-next-line quotes\n    } else if (i === b && c === \"'\") {\n      i = j + 1;\n      q = c;\n    } else if (c === '.' && !b) {\n      if (j > i) {\n        push();\n      } else {\n        i = j + 1;\n      }\n    } else if (c === '[') {\n      if (j > i) {\n        push();\n      }\n      i = j + 1;\n      b = i;\n    } else if (c === ']') {\n      if (!b) {\n        error('Access path missing open bracket: ' + p);\n      }\n      if (b > 0) {\n        push();\n      }\n      b = 0;\n      i = j + 1;\n    }\n  }\n\n  if (b) {\n    error('Access path missing closing bracket: ' + p);\n  }\n  if (q) {\n    error('Access path missing closing quote: ' + p);\n  }\n\n  if (j > i) {\n    j += 1;\n    push();\n  }\n\n  return path;\n};\n"]}